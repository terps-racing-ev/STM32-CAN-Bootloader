ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bootloader.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/bootloader.c"
  20              		.section	.text.Bootloader_ReadFlash,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	Bootloader_ReadFlash:
  27              	.LVL0:
  28              	.LFB138:
   1:Core/Src/bootloader.c **** /* USER CODE BEGIN Header */
   2:Core/Src/bootloader.c **** /**
   3:Core/Src/bootloader.c ****   ******************************************************************************
   4:Core/Src/bootloader.c ****   * @file           : bootloader.c
   5:Core/Src/bootloader.c ****   * @brief          : CAN Bootloader implementation for STM32L432
   6:Core/Src/bootloader.c ****   ******************************************************************************
   7:Core/Src/bootloader.c ****   * @attention
   8:Core/Src/bootloader.c ****   *
   9:Core/Src/bootloader.c ****   * This bootloader implements a CAN-based firmware update mechanism.
  10:Core/Src/bootloader.c ****   * It allows flashing new application firmware via CAN bus messages.
  11:Core/Src/bootloader.c ****   *
  12:Core/Src/bootloader.c ****   ******************************************************************************
  13:Core/Src/bootloader.c ****   */
  14:Core/Src/bootloader.c **** /* USER CODE END Header */
  15:Core/Src/bootloader.c **** 
  16:Core/Src/bootloader.c **** /* Includes ------------------------------------------------------------------*/
  17:Core/Src/bootloader.c **** #include "bootloader.h"
  18:Core/Src/bootloader.c **** #include <string.h>
  19:Core/Src/bootloader.c **** 
  20:Core/Src/bootloader.c **** /* Private variables ---------------------------------------------------------*/
  21:Core/Src/bootloader.c **** static CAN_HandleTypeDef *hcan_bootloader;
  22:Core/Src/bootloader.c **** static BootloaderStatus_t bootloader_status;
  23:Core/Src/bootloader.c **** static CAN_RxHeaderTypeDef rx_header;
  24:Core/Src/bootloader.c **** static uint8_t rx_data[8];
  25:Core/Src/bootloader.c **** static uint8_t tx_data[8];
  26:Core/Src/bootloader.c **** static CAN_TxHeaderTypeDef tx_header;
  27:Core/Src/bootloader.c **** static uint32_t tx_mailbox;
  28:Core/Src/bootloader.c **** static uint8_t flash_buffer[8];     /* Buffer for 8-byte flash writes (two 4-byte chunks) */
  29:Core/Src/bootloader.c **** static uint16_t buffer_index = 0;   /* Current position in flash_buffer */
  30:Core/Src/bootloader.c **** static volatile uint8_t jump_to_app_flag = 0;  /* Flag to trigger jump from main loop */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 2


  31:Core/Src/bootloader.c **** static volatile uint8_t can_command_received = 0;  /* Flag to disable auto-jump timeout */
  32:Core/Src/bootloader.c **** static uint32_t last_heartbeat_time = 0;  /* Last heartbeat timestamp for resetting on commands */
  33:Core/Src/bootloader.c **** 
  34:Core/Src/bootloader.c **** /* Private function prototypes -----------------------------------------------*/
  35:Core/Src/bootloader.c **** static void Bootloader_ConfigureCANFilter(void);
  36:Core/Src/bootloader.c **** static uint8_t Bootloader_EraseApplicationFlash(void);
  37:Core/Src/bootloader.c **** static uint8_t Bootloader_WriteFlash(uint32_t address, uint8_t *data, uint16_t length);
  38:Core/Src/bootloader.c **** static uint8_t Bootloader_ReadFlash(uint32_t address, uint8_t *data, uint16_t length);
  39:Core/Src/bootloader.c **** static void Bootloader_DeInit(void);
  40:Core/Src/bootloader.c **** static void Bootloader_SendACK(void);
  41:Core/Src/bootloader.c **** static void Bootloader_SendNACK(uint8_t error_code);
  42:Core/Src/bootloader.c **** static void Bootloader_WaitForCANTransmission(void);
  43:Core/Src/bootloader.c **** 
  44:Core/Src/bootloader.c **** /**
  45:Core/Src/bootloader.c ****   * @brief  Initialize the bootloader
  46:Core/Src/bootloader.c ****   * @param  hcan: pointer to CAN handle
  47:Core/Src/bootloader.c ****   * @retval None
  48:Core/Src/bootloader.c ****   */
  49:Core/Src/bootloader.c **** void Bootloader_Init(CAN_HandleTypeDef *hcan)
  50:Core/Src/bootloader.c **** {
  51:Core/Src/bootloader.c ****     hcan_bootloader = hcan;
  52:Core/Src/bootloader.c ****     
  53:Core/Src/bootloader.c ****     /* Initialize bootloader status */
  54:Core/Src/bootloader.c ****     memset(&bootloader_status, 0, sizeof(BootloaderStatus_t));
  55:Core/Src/bootloader.c ****     bootloader_status.state = BL_STATE_IDLE;
  56:Core/Src/bootloader.c ****     bootloader_status.current_address = APPLICATION_ADDRESS;
  57:Core/Src/bootloader.c ****     
  58:Core/Src/bootloader.c ****     /* Configure CAN filter */
  59:Core/Src/bootloader.c ****     Bootloader_ConfigureCANFilter();
  60:Core/Src/bootloader.c ****     
  61:Core/Src/bootloader.c ****     /* Start CAN peripheral */
  62:Core/Src/bootloader.c ****     if (HAL_CAN_Start(hcan_bootloader) != HAL_OK)
  63:Core/Src/bootloader.c ****     {
  64:Core/Src/bootloader.c ****         Error_Handler();
  65:Core/Src/bootloader.c ****     }
  66:Core/Src/bootloader.c ****     
  67:Core/Src/bootloader.c ****     /* Activate CAN RX notification */
  68:Core/Src/bootloader.c ****     if (HAL_CAN_ActivateNotification(hcan_bootloader, CAN_IT_RX_FIFO0_MSG_PENDING) != HAL_OK)
  69:Core/Src/bootloader.c ****     {
  70:Core/Src/bootloader.c ****         Error_Handler();
  71:Core/Src/bootloader.c ****     }
  72:Core/Src/bootloader.c ****     
  73:Core/Src/bootloader.c ****     /* Configure TX header */
  74:Core/Src/bootloader.c ****     tx_header.StdId = 0;
  75:Core/Src/bootloader.c ****     tx_header.ExtId = CAN_BOOTLOADER_ID;
  76:Core/Src/bootloader.c ****     tx_header.IDE = CAN_ID_EXT;
  77:Core/Src/bootloader.c ****     tx_header.RTR = CAN_RTR_DATA;
  78:Core/Src/bootloader.c ****     tx_header.DLC = 8;
  79:Core/Src/bootloader.c ****     tx_header.TransmitGlobalTime = DISABLE;
  80:Core/Src/bootloader.c **** }
  81:Core/Src/bootloader.c **** 
  82:Core/Src/bootloader.c **** /**
  83:Core/Src/bootloader.c ****   * @brief  Configure CAN filter to accept bootloader messages
  84:Core/Src/bootloader.c ****   * @retval None
  85:Core/Src/bootloader.c ****   */
  86:Core/Src/bootloader.c **** static void Bootloader_ConfigureCANFilter(void)
  87:Core/Src/bootloader.c **** {
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 3


  88:Core/Src/bootloader.c ****     CAN_FilterTypeDef can_filter;
  89:Core/Src/bootloader.c ****     
  90:Core/Src/bootloader.c ****     can_filter.FilterBank = 0;
  91:Core/Src/bootloader.c ****     can_filter.FilterMode = CAN_FILTERMODE_IDMASK;
  92:Core/Src/bootloader.c ****     can_filter.FilterScale = CAN_FILTERSCALE_32BIT;
  93:Core/Src/bootloader.c ****     /* For extended IDs: bits [28:13] in FilterIdHigh, bits [12:0] + IDE in FilterIdLow */
  94:Core/Src/bootloader.c ****     can_filter.FilterIdHigh = (CAN_HOST_ID >> 13) & 0xFFFF;
  95:Core/Src/bootloader.c ****     can_filter.FilterIdLow = ((CAN_HOST_ID << 3) & 0xFFF8) | 0x0004;  /* IDE bit set */
  96:Core/Src/bootloader.c ****     can_filter.FilterMaskIdHigh = 0xFFFF;  /* Match all upper bits */
  97:Core/Src/bootloader.c ****     can_filter.FilterMaskIdLow = 0xFFFC;   /* Match lower bits + IDE */
  98:Core/Src/bootloader.c ****     can_filter.FilterFIFOAssignment = CAN_RX_FIFO0;
  99:Core/Src/bootloader.c ****     can_filter.FilterActivation = ENABLE;
 100:Core/Src/bootloader.c ****     can_filter.SlaveStartFilterBank = 14;
 101:Core/Src/bootloader.c ****     
 102:Core/Src/bootloader.c ****     if (HAL_CAN_ConfigFilter(hcan_bootloader, &can_filter) != HAL_OK)
 103:Core/Src/bootloader.c ****     {
 104:Core/Src/bootloader.c ****         Error_Handler();
 105:Core/Src/bootloader.c ****     }
 106:Core/Src/bootloader.c **** }
 107:Core/Src/bootloader.c **** 
 108:Core/Src/bootloader.c **** /**
 109:Core/Src/bootloader.c ****   * @brief  Main bootloader loop
 110:Core/Src/bootloader.c ****   * @retval None
 111:Core/Src/bootloader.c ****   */
 112:Core/Src/bootloader.c **** void Bootloader_Main(void)
 113:Core/Src/bootloader.c **** {
 114:Core/Src/bootloader.c ****     uint32_t timeout_start = HAL_GetTick();
 115:Core/Src/bootloader.c ****     uint32_t last_heartbeat = HAL_GetTick();
 116:Core/Src/bootloader.c ****     uint32_t last_led_toggle = HAL_GetTick();
 117:Core/Src/bootloader.c ****     uint8_t timeout_expired = 0;
 118:Core/Src/bootloader.c ****     
 119:Core/Src/bootloader.c ****     /* Initialize the static heartbeat time variable */
 120:Core/Src/bootloader.c ****     last_heartbeat_time = last_heartbeat;
 121:Core/Src/bootloader.c ****     
 122:Core/Src/bootloader.c ****     /* Send ready message */
 123:Core/Src/bootloader.c ****     tx_data[0] = RESP_READY;
 124:Core/Src/bootloader.c ****     tx_data[1] = 0x01;  /* Bootloader version */
 125:Core/Src/bootloader.c ****     tx_data[2] = 0x00;  /* Bootloader subversion */
 126:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 127:Core/Src/bootloader.c ****     
 128:Core/Src/bootloader.c ****     /* Main bootloader loop with timeout */
 129:Core/Src/bootloader.c ****     while (1)
 130:Core/Src/bootloader.c ****     {
 131:Core/Src/bootloader.c ****         /* Rapid LED flash to indicate bootloader mode (100ms toggle = 5Hz blink) */
 132:Core/Src/bootloader.c ****         if ((HAL_GetTick() - last_led_toggle) >= 100)
 133:Core/Src/bootloader.c ****         {
 134:Core/Src/bootloader.c ****             HAL_GPIO_TogglePin(LED_PORT, LED_PIN);
 135:Core/Src/bootloader.c ****             last_led_toggle = HAL_GetTick();
 136:Core/Src/bootloader.c ****         }
 137:Core/Src/bootloader.c ****         
 138:Core/Src/bootloader.c ****         /* Update local heartbeat from static variable (may be reset by command processing) */
 139:Core/Src/bootloader.c ****         last_heartbeat = last_heartbeat_time;
 140:Core/Src/bootloader.c ****         
 141:Core/Src/bootloader.c ****         /* Send heartbeat message periodically only when idle */
 142:Core/Src/bootloader.c ****         if (bootloader_status.state == BL_STATE_IDLE && 
 143:Core/Src/bootloader.c ****             (HAL_GetTick() - last_heartbeat) >= HEARTBEAT_INTERVAL_MS)
 144:Core/Src/bootloader.c ****         {
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 4


 145:Core/Src/bootloader.c ****             /* Send ready/heartbeat message */
 146:Core/Src/bootloader.c ****             tx_data[0] = RESP_READY;
 147:Core/Src/bootloader.c ****             tx_data[1] = 0x01;  /* Bootloader version */
 148:Core/Src/bootloader.c ****             tx_data[2] = 0x00;  /* Bootloader subversion */
 149:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 150:Core/Src/bootloader.c ****             last_heartbeat = HAL_GetTick();
 151:Core/Src/bootloader.c ****             last_heartbeat_time = last_heartbeat;  /* Update static variable */
 152:Core/Src/bootloader.c ****         }
 153:Core/Src/bootloader.c ****         
 154:Core/Src/bootloader.c ****         /* Check for timeout to auto-jump to application */
 155:Core/Src/bootloader.c ****         /* Only auto-jump if: timeout expired AND no CAN commands received AND valid app exists */
 156:Core/Src/bootloader.c ****         if (!timeout_expired && !can_command_received &&
 157:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 158:Core/Src/bootloader.c ****         {
 159:Core/Src/bootloader.c ****             timeout_expired = 1;
 160:Core/Src/bootloader.c **** 
 161:Core/Src/bootloader.c ****             /* Only jump if we have a valid application flag set */
 162:Core/Src/bootloader.c ****             if (Bootloader_CheckApplicationValidFlag())
 163:Core/Src/bootloader.c ****             {
 164:Core/Src/bootloader.c ****                 /* Send timeout jump message */
 165:Core/Src/bootloader.c ****                 tx_data[0] = RESP_READY;
 166:Core/Src/bootloader.c ****                 tx_data[1] = 0xAA;  /* Special: Timeout auto-jump */
 167:Core/Src/bootloader.c ****                 tx_data[2] = 0x55;
 168:Core/Src/bootloader.c ****                 Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 169:Core/Src/bootloader.c **** 
 170:Core/Src/bootloader.c ****                 /* Wait for message to send */
 171:Core/Src/bootloader.c ****                 Bootloader_WaitForCANTransmission();
 172:Core/Src/bootloader.c ****                 HAL_Delay(10);
 173:Core/Src/bootloader.c **** 
 174:Core/Src/bootloader.c ****                 /* Jump to application */
 175:Core/Src/bootloader.c ****                 Bootloader_JumpToApplication();
 176:Core/Src/bootloader.c ****             }
 177:Core/Src/bootloader.c ****             /* If no valid app, stay in bootloader mode indefinitely */
 178:Core/Src/bootloader.c ****         }
 179:Core/Src/bootloader.c ****         
 180:Core/Src/bootloader.c ****         /* Check if we should jump to application (from CAN command) */
 181:Core/Src/bootloader.c ****         if (jump_to_app_flag)
 182:Core/Src/bootloader.c ****         {
 183:Core/Src/bootloader.c ****             /* Send a pre-jump indicator message (using READY with special code) */
 184:Core/Src/bootloader.c ****             tx_data[0] = RESP_READY;
 185:Core/Src/bootloader.c ****             tx_data[1] = 0xFF;  /* Special: About to jump */
 186:Core/Src/bootloader.c ****             tx_data[2] = 0xFF;
 187:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 188:Core/Src/bootloader.c ****             
 189:Core/Src/bootloader.c ****             /* Wait for this message to be sent */
 190:Core/Src/bootloader.c ****             Bootloader_WaitForCANTransmission();
 191:Core/Src/bootloader.c ****             
 192:Core/Src/bootloader.c ****             /* Jump to application (this function should not return) */
 193:Core/Src/bootloader.c ****             Bootloader_JumpToApplication();
 194:Core/Src/bootloader.c ****             
 195:Core/Src/bootloader.c ****             /* If we get here, jump failed - reset the flag */
 196:Core/Src/bootloader.c ****             jump_to_app_flag = 0;
 197:Core/Src/bootloader.c ****         }
 198:Core/Src/bootloader.c ****         
 199:Core/Src/bootloader.c ****         /* Process received CAN messages (handled in interrupt) */
 200:Core/Src/bootloader.c ****         HAL_Delay(1);
 201:Core/Src/bootloader.c ****     }
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 5


 202:Core/Src/bootloader.c **** }
 203:Core/Src/bootloader.c **** 
 204:Core/Src/bootloader.c **** /**
 205:Core/Src/bootloader.c ****   * @brief  Process received CAN message
 206:Core/Src/bootloader.c ****   * @retval None
 207:Core/Src/bootloader.c ****   */
 208:Core/Src/bootloader.c **** void Bootloader_ProcessCANMessage(void)
 209:Core/Src/bootloader.c **** {
 210:Core/Src/bootloader.c ****     uint8_t command;
 211:Core/Src/bootloader.c ****     uint32_t address;
 212:Core/Src/bootloader.c ****     uint16_t length;
 213:Core/Src/bootloader.c ****     uint8_t result;
 214:Core/Src/bootloader.c ****     static uint32_t *last_heartbeat_ptr = NULL;
 215:Core/Src/bootloader.c **** 
 216:Core/Src/bootloader.c ****     /* Mark that a CAN command has been received - disable auto-jump timeout */
 217:Core/Src/bootloader.c ****     can_command_received = 1;
 218:Core/Src/bootloader.c ****     
 219:Core/Src/bootloader.c ****     /* Reset heartbeat timer to prevent heartbeat from being sent immediately after command */
 220:Core/Src/bootloader.c ****     last_heartbeat_time = HAL_GetTick();
 221:Core/Src/bootloader.c **** 
 222:Core/Src/bootloader.c ****     /* Get the command byte */
 223:Core/Src/bootloader.c ****     command = rx_data[0];
 224:Core/Src/bootloader.c **** 
 225:Core/Src/bootloader.c ****     switch (command)
 226:Core/Src/bootloader.c ****     {
 227:Core/Src/bootloader.c ****         case CMD_GET_STATUS:
 228:Core/Src/bootloader.c ****             /* Send status information */
 229:Core/Src/bootloader.c ****             tx_data[0] = RESP_DATA;
 230:Core/Src/bootloader.c ****             tx_data[1] = bootloader_status.state;
 231:Core/Src/bootloader.c ****             tx_data[2] = bootloader_status.last_error;
 232:Core/Src/bootloader.c ****             tx_data[3] = (bootloader_status.bytes_written >> 24) & 0xFF;
 233:Core/Src/bootloader.c ****             tx_data[4] = (bootloader_status.bytes_written >> 16) & 0xFF;
 234:Core/Src/bootloader.c ****             tx_data[5] = (bootloader_status.bytes_written >> 8) & 0xFF;
 235:Core/Src/bootloader.c ****             tx_data[6] = bootloader_status.bytes_written & 0xFF;
 236:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_DATA, tx_data, 8);
 237:Core/Src/bootloader.c ****             break;
 238:Core/Src/bootloader.c ****             
 239:Core/Src/bootloader.c ****         case CMD_ERASE_FLASH:
 240:Core/Src/bootloader.c ****             /* Erase application flash area */
 241:Core/Src/bootloader.c ****             bootloader_status.state = BL_STATE_ERASING;
 242:Core/Src/bootloader.c ****             
 243:Core/Src/bootloader.c ****             /* Clear the application valid flag first */
 244:Core/Src/bootloader.c ****             Bootloader_ClearApplicationValidFlag();
 245:Core/Src/bootloader.c ****             
 246:Core/Src/bootloader.c ****             result = Bootloader_EraseApplicationFlash();
 247:Core/Src/bootloader.c ****             if (result == ERR_NONE)
 248:Core/Src/bootloader.c ****             {
 249:Core/Src/bootloader.c ****                 bootloader_status.bytes_written = 0;
 250:Core/Src/bootloader.c ****                 bootloader_status.current_address = APPLICATION_ADDRESS;
 251:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 252:Core/Src/bootloader.c ****             }
 253:Core/Src/bootloader.c ****             else
 254:Core/Src/bootloader.c ****             {
 255:Core/Src/bootloader.c ****                 Bootloader_SendNACK(result);
 256:Core/Src/bootloader.c ****             }
 257:Core/Src/bootloader.c ****             bootloader_status.state = BL_STATE_IDLE;
 258:Core/Src/bootloader.c ****             break;
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 6


 259:Core/Src/bootloader.c ****             
 260:Core/Src/bootloader.c ****         case CMD_SET_ADDRESS:
 261:Core/Src/bootloader.c ****             /* Set the current write address */
 262:Core/Src/bootloader.c ****             address = (rx_data[1] << 24) | (rx_data[2] << 16) |
 263:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 264:Core/Src/bootloader.c **** 
 265:Core/Src/bootloader.c ****             /* Validate address is in application area (not in permanent storage) */
 266:Core/Src/bootloader.c ****             if (address >= APPLICATION_ADDRESS && address <= APPLICATION_END_ADDRESS)
 267:Core/Src/bootloader.c ****             {
 268:Core/Src/bootloader.c ****                 bootloader_status.current_address = address;
 269:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer */
 270:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 271:Core/Src/bootloader.c ****             }
 272:Core/Src/bootloader.c ****             else
 273:Core/Src/bootloader.c ****             {
 274:Core/Src/bootloader.c ****                 Bootloader_SendNACK(ERR_INVALID_ADDRESS);
 275:Core/Src/bootloader.c ****             }
 276:Core/Src/bootloader.c ****             break;
 277:Core/Src/bootloader.c ****             
 278:Core/Src/bootloader.c ****         case CMD_WRITE_DATA:
 279:Core/Src/bootloader.c ****             /* Write data to flash at current address */
 280:Core/Src/bootloader.c ****             /* Expected format: [CMD] [0x04] [byte0] [byte1] [byte2] [byte3] ... */
 281:Core/Src/bootloader.c ****             /* Receives 4 bytes per message, buffers two messages (8 bytes) before writing */
 282:Core/Src/bootloader.c ****             bootloader_status.state = BL_STATE_WRITING;
 283:Core/Src/bootloader.c ****             length = rx_data[1];  /* Data length - should always be 4 */
 284:Core/Src/bootloader.c ****             
 285:Core/Src/bootloader.c ****             if (length != 4)
 286:Core/Src/bootloader.c ****             {
 287:Core/Src/bootloader.c ****                 Bootloader_SendNACK(ERR_INVALID_DATA_LENGTH);
 288:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_IDLE;
 289:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer on error */
 290:Core/Src/bootloader.c ****                 break;
 291:Core/Src/bootloader.c ****             }
 292:Core/Src/bootloader.c ****             
 293:Core/Src/bootloader.c ****             /* Copy 4 bytes to buffer */
 294:Core/Src/bootloader.c ****             for (uint8_t i = 0; i < 4; i++)
 295:Core/Src/bootloader.c ****             {
 296:Core/Src/bootloader.c ****                 flash_buffer[buffer_index++] = rx_data[2 + i];
 297:Core/Src/bootloader.c ****             }
 298:Core/Src/bootloader.c ****             
 299:Core/Src/bootloader.c ****             /* Write to flash when we have 8 bytes (two 4-byte chunks) */
 300:Core/Src/bootloader.c ****             if (buffer_index >= 8)
 301:Core/Src/bootloader.c ****             {
 302:Core/Src/bootloader.c ****                 result = Bootloader_WriteFlash(bootloader_status.current_address, 
 303:Core/Src/bootloader.c ****                                                flash_buffer, 8);
 304:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 305:Core/Src/bootloader.c ****                 {
 306:Core/Src/bootloader.c ****                     bootloader_status.current_address += 8;
 307:Core/Src/bootloader.c ****                     bootloader_status.bytes_written += 8;
 308:Core/Src/bootloader.c ****                     buffer_index = 0;
 309:Core/Src/bootloader.c ****                     Bootloader_SendACK();
 310:Core/Src/bootloader.c ****                 }
 311:Core/Src/bootloader.c ****                 else
 312:Core/Src/bootloader.c ****                 {
 313:Core/Src/bootloader.c ****                     buffer_index = 0;  /* Reset buffer on write failure */
 314:Core/Src/bootloader.c ****                     Bootloader_SendNACK(result);
 315:Core/Src/bootloader.c ****                 }
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 7


 316:Core/Src/bootloader.c ****             }
 317:Core/Src/bootloader.c ****             else
 318:Core/Src/bootloader.c ****             {
 319:Core/Src/bootloader.c ****                 Bootloader_SendACK();  /* Data buffered, waiting for more */
 320:Core/Src/bootloader.c ****             }
 321:Core/Src/bootloader.c ****             
 322:Core/Src/bootloader.c ****             bootloader_status.state = BL_STATE_IDLE;
 323:Core/Src/bootloader.c ****             break;
 324:Core/Src/bootloader.c ****             
 325:Core/Src/bootloader.c ****         case CMD_WRITE_FLASH:
 326:Core/Src/bootloader.c ****             /* Legacy write command - write address and data in one message */
 327:Core/Src/bootloader.c ****             address = (rx_data[1] << 24) | (rx_data[2] << 16) |
 328:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 329:Core/Src/bootloader.c ****             length = rx_data[5];
 330:Core/Src/bootloader.c **** 
 331:Core/Src/bootloader.c ****             /* Validate address is in application area (not in permanent storage) */
 332:Core/Src/bootloader.c ****             if (address >= APPLICATION_ADDRESS && address <= APPLICATION_END_ADDRESS)
 333:Core/Src/bootloader.c ****             {
 334:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_WRITING;
 335:Core/Src/bootloader.c ****                 result = Bootloader_WriteFlash(address, &rx_data[6], length);
 336:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 337:Core/Src/bootloader.c ****                 {
 338:Core/Src/bootloader.c ****                     Bootloader_SendACK();
 339:Core/Src/bootloader.c ****                 }
 340:Core/Src/bootloader.c ****                 else
 341:Core/Src/bootloader.c ****                 {
 342:Core/Src/bootloader.c ****                     Bootloader_SendNACK(result);
 343:Core/Src/bootloader.c ****                 }
 344:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_IDLE;
 345:Core/Src/bootloader.c ****             }
 346:Core/Src/bootloader.c ****             else
 347:Core/Src/bootloader.c ****             {
 348:Core/Src/bootloader.c ****                 Bootloader_SendNACK(ERR_INVALID_ADDRESS);
 349:Core/Src/bootloader.c ****             }
 350:Core/Src/bootloader.c ****             break;
 351:Core/Src/bootloader.c ****             
 352:Core/Src/bootloader.c ****         case CMD_READ_FLASH:
 353:Core/Src/bootloader.c ****             /* Read flash memory */
 354:Core/Src/bootloader.c ****             address = (rx_data[1] << 24) | (rx_data[2] << 16) |
 355:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 356:Core/Src/bootloader.c ****             length = rx_data[5];
 357:Core/Src/bootloader.c **** 
 358:Core/Src/bootloader.c ****             /* Allow reading from application area only (not permanent storage during flash ops) */
 359:Core/Src/bootloader.c ****             if (address >= APPLICATION_ADDRESS && address <= APPLICATION_END_ADDRESS && length <= 7
 360:Core/Src/bootloader.c ****             {
 361:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_READING;
 362:Core/Src/bootloader.c ****                 tx_data[0] = RESP_DATA;
 363:Core/Src/bootloader.c ****                 result = Bootloader_ReadFlash(address, &tx_data[1], length);
 364:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 365:Core/Src/bootloader.c ****                 {
 366:Core/Src/bootloader.c ****                     Bootloader_SendCANMessage(RESP_DATA, tx_data, length + 1);
 367:Core/Src/bootloader.c ****                 }
 368:Core/Src/bootloader.c ****                 else
 369:Core/Src/bootloader.c ****                 {
 370:Core/Src/bootloader.c ****                     Bootloader_SendNACK(result);
 371:Core/Src/bootloader.c ****                 }
 372:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_IDLE;
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 8


 373:Core/Src/bootloader.c ****             }
 374:Core/Src/bootloader.c ****             else
 375:Core/Src/bootloader.c ****             {
 376:Core/Src/bootloader.c ****                 Bootloader_SendNACK(ERR_INVALID_ADDRESS);
 377:Core/Src/bootloader.c ****             }
 378:Core/Src/bootloader.c ****             break;
 379:Core/Src/bootloader.c ****             
 380:Core/Src/bootloader.c ****         case CMD_JUMP_TO_APP:
 381:Core/Src/bootloader.c ****             /* Jump to application - set flag to jump from main loop, not from interrupt */
 382:Core/Src/bootloader.c ****             if (Bootloader_CheckValidApplication())
 383:Core/Src/bootloader.c ****             {
 384:Core/Src/bootloader.c ****                 /* Set the valid application flag in flash for future auto-boots */
 385:Core/Src/bootloader.c ****                 result = Bootloader_SetApplicationValidFlag();
 386:Core/Src/bootloader.c ****                 if (result != ERR_NONE)
 387:Core/Src/bootloader.c ****                 {
 388:Core/Src/bootloader.c ****                     /* Log error but still try to jump - flag write failure shouldn't prevent immed
 389:Core/Src/bootloader.c ****                     bootloader_status.last_error = result;
 390:Core/Src/bootloader.c ****                 }
 391:Core/Src/bootloader.c ****                 
 392:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 393:Core/Src/bootloader.c ****                 jump_to_app_flag = 1;  /* Set flag to trigger jump from main loop */
 394:Core/Src/bootloader.c ****             }
 395:Core/Src/bootloader.c ****             else
 396:Core/Src/bootloader.c ****             {
 397:Core/Src/bootloader.c ****                 Bootloader_SendNACK(ERR_NO_VALID_APP);
 398:Core/Src/bootloader.c ****             }
 399:Core/Src/bootloader.c ****             break;
 400:Core/Src/bootloader.c ****             
 401:Core/Src/bootloader.c ****         default:
 402:Core/Src/bootloader.c ****             /* Unknown command */
 403:Core/Src/bootloader.c ****             Bootloader_SendNACK(ERR_INVALID_COMMAND);
 404:Core/Src/bootloader.c ****             break;
 405:Core/Src/bootloader.c ****     }
 406:Core/Src/bootloader.c **** }
 407:Core/Src/bootloader.c **** 
 408:Core/Src/bootloader.c **** /**
 409:Core/Src/bootloader.c ****   * @brief  Erase application flash area
 410:Core/Src/bootloader.c ****   * @retval Error code
 411:Core/Src/bootloader.c ****   */
 412:Core/Src/bootloader.c **** static uint8_t Bootloader_EraseApplicationFlash(void)
 413:Core/Src/bootloader.c **** {
 414:Core/Src/bootloader.c ****     FLASH_EraseInitTypeDef erase_init;
 415:Core/Src/bootloader.c ****     uint32_t page_error;
 416:Core/Src/bootloader.c ****     HAL_StatusTypeDef status;
 417:Core/Src/bootloader.c ****     
 418:Core/Src/bootloader.c ****     /* Calculate first and last pages for application */
 419:Core/Src/bootloader.c ****     uint32_t first_page = (APPLICATION_ADDRESS - 0x08000000) / FLASH_PAGE_SIZE;
 420:Core/Src/bootloader.c ****     uint32_t num_pages = APPLICATION_SIZE / FLASH_PAGE_SIZE;
 421:Core/Src/bootloader.c ****     
 422:Core/Src/bootloader.c ****     /* Unlock flash */
 423:Core/Src/bootloader.c ****     HAL_FLASH_Unlock();
 424:Core/Src/bootloader.c ****     
 425:Core/Src/bootloader.c ****     /* Clear all flash flags */
 426:Core/Src/bootloader.c ****     __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_ALL_ERRORS);
 427:Core/Src/bootloader.c ****     
 428:Core/Src/bootloader.c ****     /* Configure erase */
 429:Core/Src/bootloader.c ****     erase_init.TypeErase = FLASH_TYPEERASE_PAGES;
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 9


 430:Core/Src/bootloader.c ****     erase_init.Banks = FLASH_BANK_1;
 431:Core/Src/bootloader.c ****     erase_init.Page = first_page;
 432:Core/Src/bootloader.c ****     erase_init.NbPages = num_pages;
 433:Core/Src/bootloader.c ****     
 434:Core/Src/bootloader.c ****     /* Perform erase */
 435:Core/Src/bootloader.c ****     status = HAL_FLASHEx_Erase(&erase_init, &page_error);
 436:Core/Src/bootloader.c ****     
 437:Core/Src/bootloader.c ****     /* Lock flash */
 438:Core/Src/bootloader.c ****     HAL_FLASH_Lock();
 439:Core/Src/bootloader.c ****     
 440:Core/Src/bootloader.c ****     if (status != HAL_OK)
 441:Core/Src/bootloader.c ****     {
 442:Core/Src/bootloader.c ****         bootloader_status.last_error = ERR_FLASH_ERASE_FAILED;
 443:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
 444:Core/Src/bootloader.c ****     }
 445:Core/Src/bootloader.c ****     
 446:Core/Src/bootloader.c ****     bootloader_status.last_error = ERR_NONE;
 447:Core/Src/bootloader.c ****     return ERR_NONE;
 448:Core/Src/bootloader.c **** }
 449:Core/Src/bootloader.c **** 
 450:Core/Src/bootloader.c **** /**
 451:Core/Src/bootloader.c ****   * @brief  Write data to flash
 452:Core/Src/bootloader.c ****   * @param  address: Flash address to write
 453:Core/Src/bootloader.c ****   * @param  data: Pointer to data buffer
 454:Core/Src/bootloader.c ****   * @param  length: Number of bytes to write (must be multiple of 8)
 455:Core/Src/bootloader.c ****   * @retval Error code
 456:Core/Src/bootloader.c ****   */
 457:Core/Src/bootloader.c **** static uint8_t Bootloader_WriteFlash(uint32_t address, uint8_t *data, uint16_t length)
 458:Core/Src/bootloader.c **** {
 459:Core/Src/bootloader.c ****     HAL_StatusTypeDef status = HAL_OK;
 460:Core/Src/bootloader.c ****     uint32_t i;
 461:Core/Src/bootloader.c ****     uint64_t data64;
 462:Core/Src/bootloader.c **** 
 463:Core/Src/bootloader.c ****     /* Validate parameters - protect permanent storage area */
 464:Core/Src/bootloader.c ****     if (address < APPLICATION_ADDRESS || address > APPLICATION_END_ADDRESS)
 465:Core/Src/bootloader.c ****     {
 466:Core/Src/bootloader.c ****         bootloader_status.last_error = ERR_INVALID_ADDRESS;
 467:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 468:Core/Src/bootloader.c ****     }
 469:Core/Src/bootloader.c **** 
 470:Core/Src/bootloader.c ****     /* Ensure write doesn't overflow into permanent storage */
 471:Core/Src/bootloader.c ****     if ((address + length - 1) > APPLICATION_END_ADDRESS)
 472:Core/Src/bootloader.c ****     {
 473:Core/Src/bootloader.c ****         bootloader_status.last_error = ERR_INVALID_ADDRESS;
 474:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 475:Core/Src/bootloader.c ****     }
 476:Core/Src/bootloader.c ****     
 477:Core/Src/bootloader.c ****     /* Length must be multiple of 8 for double word programming */
 478:Core/Src/bootloader.c ****     if (length % 8 != 0)
 479:Core/Src/bootloader.c ****     {
 480:Core/Src/bootloader.c ****         bootloader_status.last_error = ERR_INVALID_DATA_LENGTH;
 481:Core/Src/bootloader.c ****         return ERR_INVALID_DATA_LENGTH;
 482:Core/Src/bootloader.c ****     }
 483:Core/Src/bootloader.c ****     
 484:Core/Src/bootloader.c ****     /* Unlock flash */
 485:Core/Src/bootloader.c ****     HAL_FLASH_Unlock();
 486:Core/Src/bootloader.c ****     
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 10


 487:Core/Src/bootloader.c ****     /* Clear all flash flags */
 488:Core/Src/bootloader.c ****     __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_ALL_ERRORS);
 489:Core/Src/bootloader.c ****     
 490:Core/Src/bootloader.c ****     /* Write data in 64-bit chunks */
 491:Core/Src/bootloader.c ****     for (i = 0; i < length; i += 8)
 492:Core/Src/bootloader.c ****     {
 493:Core/Src/bootloader.c ****         /* Combine 8 bytes into 64-bit value */
 494:Core/Src/bootloader.c ****         data64 = ((uint64_t)data[i + 0] << 0)  |
 495:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 1] << 8)  |
 496:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 2] << 16) |
 497:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 3] << 24) |
 498:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 4] << 32) |
 499:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 5] << 40) |
 500:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 6] << 48) |
 501:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 7] << 56);
 502:Core/Src/bootloader.c ****         
 503:Core/Src/bootloader.c ****         status = HAL_FLASH_Program(FLASH_TYPEPROGRAM_DOUBLEWORD, address + i, data64);
 504:Core/Src/bootloader.c ****         
 505:Core/Src/bootloader.c ****         if (status != HAL_OK)
 506:Core/Src/bootloader.c ****         {
 507:Core/Src/bootloader.c ****             break;
 508:Core/Src/bootloader.c ****         }
 509:Core/Src/bootloader.c ****     }
 510:Core/Src/bootloader.c ****     
 511:Core/Src/bootloader.c ****     /* Lock flash */
 512:Core/Src/bootloader.c ****     HAL_FLASH_Lock();
 513:Core/Src/bootloader.c ****     
 514:Core/Src/bootloader.c ****     if (status != HAL_OK)
 515:Core/Src/bootloader.c ****     {
 516:Core/Src/bootloader.c ****         bootloader_status.last_error = ERR_FLASH_WRITE_FAILED;
 517:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 518:Core/Src/bootloader.c ****     }
 519:Core/Src/bootloader.c ****     
 520:Core/Src/bootloader.c ****     bootloader_status.last_error = ERR_NONE;
 521:Core/Src/bootloader.c ****     return ERR_NONE;
 522:Core/Src/bootloader.c **** }
 523:Core/Src/bootloader.c **** 
 524:Core/Src/bootloader.c **** /**
 525:Core/Src/bootloader.c ****   * @brief  Read data from flash
 526:Core/Src/bootloader.c ****   * @param  address: Flash address to read
 527:Core/Src/bootloader.c ****   * @param  data: Pointer to data buffer
 528:Core/Src/bootloader.c ****   * @param  length: Number of bytes to read
 529:Core/Src/bootloader.c ****   * @retval Error code
 530:Core/Src/bootloader.c ****   */
 531:Core/Src/bootloader.c **** static uint8_t Bootloader_ReadFlash(uint32_t address, uint8_t *data, uint16_t length)
 532:Core/Src/bootloader.c **** {
  29              		.loc 1 532 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 533:Core/Src/bootloader.c ****     uint16_t i;
  34              		.loc 1 533 5 view .LVU1
 534:Core/Src/bootloader.c ****     uint8_t *flash_ptr = (uint8_t *)address;
  35              		.loc 1 534 5 view .LVU2
 535:Core/Src/bootloader.c **** 
 536:Core/Src/bootloader.c ****     /* Validate address - protect permanent storage area */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 11


 537:Core/Src/bootloader.c ****     if (address < APPLICATION_ADDRESS || address > APPLICATION_END_ADDRESS)
  36              		.loc 1 537 5 view .LVU3
  37              		.loc 1 537 39 is_stmt 0 view .LVU4
  38 0000 00F17843 		add	r3, r0, #-134217728
  39 0004 A3F50043 		sub	r3, r3, #32768
  40              		.loc 1 537 8 view .LVU5
  41 0008 B3F5503F 		cmp	r3, #212992
  42 000c 13D2     		bcs	.L5
 532:Core/Src/bootloader.c ****     uint16_t i;
  43              		.loc 1 532 1 view .LVU6
  44 000e 10B4     		push	{r4}
  45              		.cfi_def_cfa_offset 4
  46              		.cfi_offset 4, -4
 538:Core/Src/bootloader.c ****     {
 539:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 540:Core/Src/bootloader.c ****     }
 541:Core/Src/bootloader.c **** 
 542:Core/Src/bootloader.c ****     /* Ensure read doesn't overflow into permanent storage */
 543:Core/Src/bootloader.c ****     if ((address + length - 1) > APPLICATION_END_ADDRESS)
  47              		.loc 1 543 5 is_stmt 1 view .LVU7
  48              		.loc 1 543 18 is_stmt 0 view .LVU8
  49 0010 1318     		adds	r3, r2, r0
  50              		.loc 1 543 27 view .LVU9
  51 0012 013B     		subs	r3, r3, #1
  52              		.loc 1 543 8 view .LVU10
  53 0014 0A4C     		ldr	r4, .L11
  54 0016 A342     		cmp	r3, r4
  55 0018 0FD2     		bcs	.L6
 544:Core/Src/bootloader.c ****     {
 545:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 546:Core/Src/bootloader.c ****     }
 547:Core/Src/bootloader.c ****     
 548:Core/Src/bootloader.c ****     /* Read data */
 549:Core/Src/bootloader.c ****     for (i = 0; i < length; i++)
  56              		.loc 1 549 12 view .LVU11
  57 001a 0023     		movs	r3, #0
  58 001c 05E0     		b	.L3
  59              	.LVL1:
  60              	.L4:
 550:Core/Src/bootloader.c ****     {
 551:Core/Src/bootloader.c ****         data[i] = flash_ptr[i];
  61              		.loc 1 551 9 is_stmt 1 view .LVU12
  62              		.loc 1 551 28 is_stmt 0 view .LVU13
  63 001e 10F803C0 		ldrb	ip, [r0, r3]	@ zero_extendqisi2
  64              		.loc 1 551 17 view .LVU14
  65 0022 01F803C0 		strb	ip, [r1, r3]
 549:Core/Src/bootloader.c ****     {
  66              		.loc 1 549 30 is_stmt 1 discriminator 3 view .LVU15
  67 0026 0133     		adds	r3, r3, #1
  68              	.LVL2:
 549:Core/Src/bootloader.c ****     {
  69              		.loc 1 549 30 is_stmt 0 discriminator 3 view .LVU16
  70 0028 9BB2     		uxth	r3, r3
  71              	.LVL3:
  72              	.L3:
 549:Core/Src/bootloader.c ****     {
  73              		.loc 1 549 19 is_stmt 1 discriminator 1 view .LVU17
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 12


  74 002a 9342     		cmp	r3, r2
  75 002c F7D3     		bcc	.L4
 552:Core/Src/bootloader.c ****     }
 553:Core/Src/bootloader.c ****     
 554:Core/Src/bootloader.c ****     return ERR_NONE;
  76              		.loc 1 554 12 is_stmt 0 view .LVU18
  77 002e 0020     		movs	r0, #0
  78              	.LVL4:
  79              	.L2:
 555:Core/Src/bootloader.c **** }
  80              		.loc 1 555 1 view .LVU19
  81 0030 5DF8044B 		ldr	r4, [sp], #4
  82              		.cfi_restore 4
  83              		.cfi_def_cfa_offset 0
  84 0034 7047     		bx	lr
  85              	.LVL5:
  86              	.L5:
 539:Core/Src/bootloader.c ****     }
  87              		.loc 1 539 16 view .LVU20
  88 0036 0220     		movs	r0, #2
  89              	.LVL6:
  90              		.loc 1 555 1 view .LVU21
  91 0038 7047     		bx	lr
  92              	.LVL7:
  93              	.L6:
  94              		.cfi_def_cfa_offset 4
  95              		.cfi_offset 4, -4
 545:Core/Src/bootloader.c ****     }
  96              		.loc 1 545 16 view .LVU22
  97 003a 0220     		movs	r0, #2
  98              	.LVL8:
 545:Core/Src/bootloader.c ****     }
  99              		.loc 1 545 16 view .LVU23
 100 003c F8E7     		b	.L2
 101              	.L12:
 102 003e 00BF     		.align	2
 103              	.L11:
 104 0040 00C00308 		.word	134463488
 105              		.cfi_endproc
 106              	.LFE138:
 108              		.section	.text.Bootloader_ConfigureCANFilter,"ax",%progbits
 109              		.align	1
 110              		.syntax unified
 111              		.thumb
 112              		.thumb_func
 114              	Bootloader_ConfigureCANFilter:
 115              	.LFB133:
  87:Core/Src/bootloader.c ****     CAN_FilterTypeDef can_filter;
 116              		.loc 1 87 1 is_stmt 1 view -0
 117              		.cfi_startproc
 118              		@ args = 0, pretend = 0, frame = 40
 119              		@ frame_needed = 0, uses_anonymous_args = 0
 120 0000 00B5     		push	{lr}
 121              		.cfi_def_cfa_offset 4
 122              		.cfi_offset 14, -4
 123 0002 8BB0     		sub	sp, sp, #44
 124              		.cfi_def_cfa_offset 48
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 13


  88:Core/Src/bootloader.c ****     
 125              		.loc 1 88 5 view .LVU25
  90:Core/Src/bootloader.c ****     can_filter.FilterMode = CAN_FILTERMODE_IDMASK;
 126              		.loc 1 90 5 view .LVU26
  90:Core/Src/bootloader.c ****     can_filter.FilterMode = CAN_FILTERMODE_IDMASK;
 127              		.loc 1 90 27 is_stmt 0 view .LVU27
 128 0004 0023     		movs	r3, #0
 129 0006 0593     		str	r3, [sp, #20]
  91:Core/Src/bootloader.c ****     can_filter.FilterScale = CAN_FILTERSCALE_32BIT;
 130              		.loc 1 91 5 is_stmt 1 view .LVU28
  91:Core/Src/bootloader.c ****     can_filter.FilterScale = CAN_FILTERSCALE_32BIT;
 131              		.loc 1 91 27 is_stmt 0 view .LVU29
 132 0008 0693     		str	r3, [sp, #24]
  92:Core/Src/bootloader.c ****     /* For extended IDs: bits [28:13] in FilterIdHigh, bits [12:0] + IDE in FilterIdLow */
 133              		.loc 1 92 5 is_stmt 1 view .LVU30
  92:Core/Src/bootloader.c ****     /* For extended IDs: bits [28:13] in FilterIdHigh, bits [12:0] + IDE in FilterIdLow */
 134              		.loc 1 92 28 is_stmt 0 view .LVU31
 135 000a 0122     		movs	r2, #1
 136 000c 0792     		str	r2, [sp, #28]
  94:Core/Src/bootloader.c ****     can_filter.FilterIdLow = ((CAN_HOST_ID << 3) & 0xFFF8) | 0x0004;  /* IDE bit set */
 137              		.loc 1 94 5 is_stmt 1 view .LVU32
  94:Core/Src/bootloader.c ****     can_filter.FilterIdLow = ((CAN_HOST_ID << 3) & 0xFFF8) | 0x0004;  /* IDE bit set */
 138              		.loc 1 94 29 is_stmt 0 view .LVU33
 139 000e 4FF44041 		mov	r1, #49152
 140 0012 0091     		str	r1, [sp]
  95:Core/Src/bootloader.c ****     can_filter.FilterMaskIdHigh = 0xFFFF;  /* Match all upper bits */
 141              		.loc 1 95 5 is_stmt 1 view .LVU34
  95:Core/Src/bootloader.c ****     can_filter.FilterMaskIdHigh = 0xFFFF;  /* Match all upper bits */
 142              		.loc 1 95 28 is_stmt 0 view .LVU35
 143 0014 43F60C01 		movw	r1, #14348
 144 0018 0191     		str	r1, [sp, #4]
  96:Core/Src/bootloader.c ****     can_filter.FilterMaskIdLow = 0xFFFC;   /* Match lower bits + IDE */
 145              		.loc 1 96 5 is_stmt 1 view .LVU36
  96:Core/Src/bootloader.c ****     can_filter.FilterMaskIdLow = 0xFFFC;   /* Match lower bits + IDE */
 146              		.loc 1 96 33 is_stmt 0 view .LVU37
 147 001a 4FF6FF71 		movw	r1, #65535
 148 001e 0291     		str	r1, [sp, #8]
  97:Core/Src/bootloader.c ****     can_filter.FilterFIFOAssignment = CAN_RX_FIFO0;
 149              		.loc 1 97 5 is_stmt 1 view .LVU38
  97:Core/Src/bootloader.c ****     can_filter.FilterFIFOAssignment = CAN_RX_FIFO0;
 150              		.loc 1 97 32 is_stmt 0 view .LVU39
 151 0020 4FF6FC71 		movw	r1, #65532
 152 0024 0391     		str	r1, [sp, #12]
  98:Core/Src/bootloader.c ****     can_filter.FilterActivation = ENABLE;
 153              		.loc 1 98 5 is_stmt 1 view .LVU40
  98:Core/Src/bootloader.c ****     can_filter.FilterActivation = ENABLE;
 154              		.loc 1 98 37 is_stmt 0 view .LVU41
 155 0026 0493     		str	r3, [sp, #16]
  99:Core/Src/bootloader.c ****     can_filter.SlaveStartFilterBank = 14;
 156              		.loc 1 99 5 is_stmt 1 view .LVU42
  99:Core/Src/bootloader.c ****     can_filter.SlaveStartFilterBank = 14;
 157              		.loc 1 99 33 is_stmt 0 view .LVU43
 158 0028 0892     		str	r2, [sp, #32]
 100:Core/Src/bootloader.c ****     
 159              		.loc 1 100 5 is_stmt 1 view .LVU44
 100:Core/Src/bootloader.c ****     
 160              		.loc 1 100 37 is_stmt 0 view .LVU45
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 14


 161 002a 0E23     		movs	r3, #14
 162 002c 0993     		str	r3, [sp, #36]
 102:Core/Src/bootloader.c ****     {
 163              		.loc 1 102 5 is_stmt 1 view .LVU46
 102:Core/Src/bootloader.c ****     {
 164              		.loc 1 102 9 is_stmt 0 view .LVU47
 165 002e 6946     		mov	r1, sp
 166 0030 054B     		ldr	r3, .L17
 167 0032 1868     		ldr	r0, [r3]
 168 0034 FFF7FEFF 		bl	HAL_CAN_ConfigFilter
 169              	.LVL9:
 102:Core/Src/bootloader.c ****     {
 170              		.loc 1 102 8 discriminator 1 view .LVU48
 171 0038 10B9     		cbnz	r0, .L16
 172              	.L13:
 106:Core/Src/bootloader.c **** 
 173              		.loc 1 106 1 view .LVU49
 174 003a 0BB0     		add	sp, sp, #44
 175              		.cfi_remember_state
 176              		.cfi_def_cfa_offset 4
 177              		@ sp needed
 178 003c 5DF804FB 		ldr	pc, [sp], #4
 179              	.L16:
 180              		.cfi_restore_state
 104:Core/Src/bootloader.c ****     }
 181              		.loc 1 104 9 is_stmt 1 view .LVU50
 182 0040 FFF7FEFF 		bl	Error_Handler
 183              	.LVL10:
 106:Core/Src/bootloader.c **** 
 184              		.loc 1 106 1 is_stmt 0 view .LVU51
 185 0044 F9E7     		b	.L13
 186              	.L18:
 187 0046 00BF     		.align	2
 188              	.L17:
 189 0048 00000000 		.word	hcan_bootloader
 190              		.cfi_endproc
 191              	.LFE133:
 193              		.section	.text.Bootloader_WaitForCANTransmission,"ax",%progbits
 194              		.align	1
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 199              	Bootloader_WaitForCANTransmission:
 200              	.LFB141:
 556:Core/Src/bootloader.c **** 
 557:Core/Src/bootloader.c **** /**
 558:Core/Src/bootloader.c ****   * @brief  Check if valid application exists
 559:Core/Src/bootloader.c ****   * @retval 1 if valid application, 0 otherwise
 560:Core/Src/bootloader.c ****   */
 561:Core/Src/bootloader.c **** uint8_t Bootloader_CheckValidApplication(void)
 562:Core/Src/bootloader.c **** {
 563:Core/Src/bootloader.c ****     uint32_t stack_pointer = *(__IO uint32_t *)APPLICATION_ADDRESS;
 564:Core/Src/bootloader.c ****     uint32_t reset_handler = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 565:Core/Src/bootloader.c ****     
 566:Core/Src/bootloader.c ****     /* Check if stack pointer is in valid RAM range */
 567:Core/Src/bootloader.c ****     if ((stack_pointer & 0xFFF00000) != 0x20000000)
 568:Core/Src/bootloader.c ****     {
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 15


 569:Core/Src/bootloader.c ****         return 0;
 570:Core/Src/bootloader.c ****     }
 571:Core/Src/bootloader.c ****     
 572:Core/Src/bootloader.c ****     /* Check if reset handler is in valid flash range (odd address for Thumb) */
 573:Core/Src/bootloader.c ****     if ((reset_handler & 0xFF000000) != 0x08000000 || (reset_handler & 0x01) == 0)
 574:Core/Src/bootloader.c ****     {
 575:Core/Src/bootloader.c ****         return 0;
 576:Core/Src/bootloader.c ****     }
 577:Core/Src/bootloader.c ****     
 578:Core/Src/bootloader.c ****     return 1;
 579:Core/Src/bootloader.c **** }
 580:Core/Src/bootloader.c **** 
 581:Core/Src/bootloader.c **** /**
 582:Core/Src/bootloader.c ****   * @brief  De-initialize peripherals before jumping to application
 583:Core/Src/bootloader.c ****   * @retval None
 584:Core/Src/bootloader.c ****   */
 585:Core/Src/bootloader.c **** static void Bootloader_DeInit(void)
 586:Core/Src/bootloader.c **** {
 587:Core/Src/bootloader.c ****     /* Turn off and de-initialize LED */
 588:Core/Src/bootloader.c ****     HAL_GPIO_WritePin(LED_PORT, LED_PIN, GPIO_PIN_RESET);
 589:Core/Src/bootloader.c ****     HAL_GPIO_DeInit(LED_PORT, LED_PIN);
 590:Core/Src/bootloader.c ****     
 591:Core/Src/bootloader.c ****     /* Disable CAN */
 592:Core/Src/bootloader.c ****     HAL_CAN_DeactivateNotification(hcan_bootloader, CAN_IT_RX_FIFO0_MSG_PENDING);
 593:Core/Src/bootloader.c ****     HAL_CAN_Stop(hcan_bootloader);
 594:Core/Src/bootloader.c ****     HAL_CAN_MspDeInit(hcan_bootloader);
 595:Core/Src/bootloader.c ****     
 596:Core/Src/bootloader.c ****     /* Disable SysTick */
 597:Core/Src/bootloader.c ****     SysTick->CTRL = 0;
 598:Core/Src/bootloader.c ****     SysTick->LOAD = 0;
 599:Core/Src/bootloader.c ****     SysTick->VAL = 0;
 600:Core/Src/bootloader.c ****     
 601:Core/Src/bootloader.c ****     /* Disable all interrupts */
 602:Core/Src/bootloader.c ****     __disable_irq();
 603:Core/Src/bootloader.c ****     
 604:Core/Src/bootloader.c ****     /* Disable all peripheral clocks */
 605:Core/Src/bootloader.c ****     __HAL_RCC_GPIOA_CLK_DISABLE();
 606:Core/Src/bootloader.c ****     __HAL_RCC_GPIOB_CLK_DISABLE();
 607:Core/Src/bootloader.c ****     __HAL_RCC_CAN1_CLK_DISABLE();
 608:Core/Src/bootloader.c **** }
 609:Core/Src/bootloader.c **** 
 610:Core/Src/bootloader.c **** /**
 611:Core/Src/bootloader.c ****   * @brief  Wait for all CAN transmissions to complete
 612:Core/Src/bootloader.c ****   * @retval None
 613:Core/Src/bootloader.c ****   */
 614:Core/Src/bootloader.c **** static void Bootloader_WaitForCANTransmission(void)
 615:Core/Src/bootloader.c **** {
 201              		.loc 1 615 1 is_stmt 1 view -0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205 0000 10B5     		push	{r4, lr}
 206              		.cfi_def_cfa_offset 8
 207              		.cfi_offset 4, -8
 208              		.cfi_offset 14, -4
 616:Core/Src/bootloader.c ****     uint32_t timeout = 0;
 209              		.loc 1 616 5 view .LVU53
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 16


 210              	.LVL11:
 617:Core/Src/bootloader.c ****     
 618:Core/Src/bootloader.c ****     /* Wait until all 3 TX mailboxes are free (all transmissions complete) */
 619:Core/Src/bootloader.c ****     while (HAL_CAN_GetTxMailboxesFreeLevel(hcan_bootloader) != 3 && timeout < 1000000)
 211              		.loc 1 619 5 view .LVU54
 616:Core/Src/bootloader.c ****     uint32_t timeout = 0;
 212              		.loc 1 616 14 is_stmt 0 view .LVU55
 213 0002 0024     		movs	r4, #0
 214              	.LVL12:
 215              	.L20:
 216              		.loc 1 619 66 is_stmt 1 view .LVU56
 217              		.loc 1 619 12 is_stmt 0 view .LVU57
 218 0004 074B     		ldr	r3, .L24
 219 0006 1868     		ldr	r0, [r3]
 220 0008 FFF7FEFF 		bl	HAL_CAN_GetTxMailboxesFreeLevel
 221              	.LVL13:
 222              		.loc 1 619 66 discriminator 1 view .LVU58
 223 000c 0328     		cmp	r0, #3
 224 000e 04D0     		beq	.L21
 225 0010 054B     		ldr	r3, .L24+4
 226 0012 9C42     		cmp	r4, r3
 227 0014 01D8     		bhi	.L21
 620:Core/Src/bootloader.c ****     {
 621:Core/Src/bootloader.c ****         timeout++;
 228              		.loc 1 621 9 is_stmt 1 view .LVU59
 229              		.loc 1 621 16 is_stmt 0 view .LVU60
 230 0016 0134     		adds	r4, r4, #1
 231              	.LVL14:
 232              		.loc 1 621 16 view .LVU61
 233 0018 F4E7     		b	.L20
 234              	.LVL15:
 235              	.L21:
 622:Core/Src/bootloader.c ****     }
 623:Core/Src/bootloader.c ****     
 624:Core/Src/bootloader.c ****     /* Additional delay to ensure message physically leaves the CAN controller */
 625:Core/Src/bootloader.c ****     HAL_Delay(10);
 236              		.loc 1 625 5 is_stmt 1 view .LVU62
 237 001a 0A20     		movs	r0, #10
 238 001c FFF7FEFF 		bl	HAL_Delay
 239              	.LVL16:
 626:Core/Src/bootloader.c **** }
 240              		.loc 1 626 1 is_stmt 0 view .LVU63
 241 0020 10BD     		pop	{r4, pc}
 242              	.LVL17:
 243              	.L25:
 244              		.loc 1 626 1 view .LVU64
 245 0022 00BF     		.align	2
 246              	.L24:
 247 0024 00000000 		.word	hcan_bootloader
 248 0028 3F420F00 		.word	999999
 249              		.cfi_endproc
 250              	.LFE141:
 252              		.section	.text.Bootloader_EraseApplicationFlash,"ax",%progbits
 253              		.align	1
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 17


 258              	Bootloader_EraseApplicationFlash:
 259              	.LFB136:
 413:Core/Src/bootloader.c ****     FLASH_EraseInitTypeDef erase_init;
 260              		.loc 1 413 1 is_stmt 1 view -0
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 24
 263              		@ frame_needed = 0, uses_anonymous_args = 0
 264 0000 10B5     		push	{r4, lr}
 265              		.cfi_def_cfa_offset 8
 266              		.cfi_offset 4, -8
 267              		.cfi_offset 14, -4
 268 0002 86B0     		sub	sp, sp, #24
 269              		.cfi_def_cfa_offset 32
 414:Core/Src/bootloader.c ****     uint32_t page_error;
 270              		.loc 1 414 5 view .LVU66
 415:Core/Src/bootloader.c ****     HAL_StatusTypeDef status;
 271              		.loc 1 415 5 view .LVU67
 416:Core/Src/bootloader.c ****     
 272              		.loc 1 416 5 view .LVU68
 419:Core/Src/bootloader.c ****     uint32_t num_pages = APPLICATION_SIZE / FLASH_PAGE_SIZE;
 273              		.loc 1 419 5 view .LVU69
 274              	.LVL18:
 420:Core/Src/bootloader.c ****     
 275              		.loc 1 420 5 view .LVU70
 423:Core/Src/bootloader.c ****     
 276              		.loc 1 423 5 view .LVU71
 277 0004 FFF7FEFF 		bl	HAL_FLASH_Unlock
 278              	.LVL19:
 426:Core/Src/bootloader.c ****     
 279              		.loc 1 426 5 view .LVU72
 426:Core/Src/bootloader.c ****     
 280              		.loc 1 426 5 view .LVU73
 426:Core/Src/bootloader.c ****     
 281              		.loc 1 426 5 discriminator 1 view .LVU74
 282 0008 104B     		ldr	r3, .L31
 283 000a 9A69     		ldr	r2, [r3, #24]
 284 000c 42F04042 		orr	r2, r2, #-1073741824
 285 0010 9A61     		str	r2, [r3, #24]
 426:Core/Src/bootloader.c ****     
 286              		.loc 1 426 5 discriminator 3 view .LVU75
 426:Core/Src/bootloader.c ****     
 287              		.loc 1 426 5 discriminator 4 view .LVU76
 288 0012 4CF2FA32 		movw	r2, #50170
 289 0016 1A61     		str	r2, [r3, #16]
 426:Core/Src/bootloader.c ****     
 290              		.loc 1 426 5 discriminator 6 view .LVU77
 429:Core/Src/bootloader.c ****     erase_init.Banks = FLASH_BANK_1;
 291              		.loc 1 429 5 view .LVU78
 429:Core/Src/bootloader.c ****     erase_init.Banks = FLASH_BANK_1;
 292              		.loc 1 429 26 is_stmt 0 view .LVU79
 293 0018 0023     		movs	r3, #0
 294 001a 0293     		str	r3, [sp, #8]
 430:Core/Src/bootloader.c ****     erase_init.Page = first_page;
 295              		.loc 1 430 5 is_stmt 1 view .LVU80
 430:Core/Src/bootloader.c ****     erase_init.Page = first_page;
 296              		.loc 1 430 22 is_stmt 0 view .LVU81
 297 001c 0123     		movs	r3, #1
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 18


 298 001e 0393     		str	r3, [sp, #12]
 431:Core/Src/bootloader.c ****     erase_init.NbPages = num_pages;
 299              		.loc 1 431 5 is_stmt 1 view .LVU82
 431:Core/Src/bootloader.c ****     erase_init.NbPages = num_pages;
 300              		.loc 1 431 21 is_stmt 0 view .LVU83
 301 0020 1023     		movs	r3, #16
 302 0022 0493     		str	r3, [sp, #16]
 432:Core/Src/bootloader.c ****     
 303              		.loc 1 432 5 is_stmt 1 view .LVU84
 432:Core/Src/bootloader.c ****     
 304              		.loc 1 432 24 is_stmt 0 view .LVU85
 305 0024 6823     		movs	r3, #104
 306 0026 0593     		str	r3, [sp, #20]
 435:Core/Src/bootloader.c ****     
 307              		.loc 1 435 5 is_stmt 1 view .LVU86
 435:Core/Src/bootloader.c ****     
 308              		.loc 1 435 14 is_stmt 0 view .LVU87
 309 0028 01A9     		add	r1, sp, #4
 310 002a 02A8     		add	r0, sp, #8
 311 002c FFF7FEFF 		bl	HAL_FLASHEx_Erase
 312              	.LVL20:
 313 0030 0446     		mov	r4, r0
 314              	.LVL21:
 438:Core/Src/bootloader.c ****     
 315              		.loc 1 438 5 is_stmt 1 view .LVU88
 316 0032 FFF7FEFF 		bl	HAL_FLASH_Lock
 317              	.LVL22:
 440:Core/Src/bootloader.c ****     {
 318              		.loc 1 440 5 view .LVU89
 440:Core/Src/bootloader.c ****     {
 319              		.loc 1 440 8 is_stmt 0 view .LVU90
 320 0036 2CB9     		cbnz	r4, .L30
 446:Core/Src/bootloader.c ****     return ERR_NONE;
 321              		.loc 1 446 5 is_stmt 1 view .LVU91
 446:Core/Src/bootloader.c ****     return ERR_NONE;
 322              		.loc 1 446 34 is_stmt 0 view .LVU92
 323 0038 054B     		ldr	r3, .L31+4
 324 003a 0022     		movs	r2, #0
 325 003c 1A74     		strb	r2, [r3, #16]
 447:Core/Src/bootloader.c **** }
 326              		.loc 1 447 5 is_stmt 1 view .LVU93
 327              	.LVL23:
 328              	.L28:
 448:Core/Src/bootloader.c **** 
 329              		.loc 1 448 1 is_stmt 0 view .LVU94
 330 003e 2046     		mov	r0, r4
 331 0040 06B0     		add	sp, sp, #24
 332              		.cfi_remember_state
 333              		.cfi_def_cfa_offset 8
 334              		@ sp needed
 335 0042 10BD     		pop	{r4, pc}
 336              	.LVL24:
 337              	.L30:
 338              		.cfi_restore_state
 442:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
 339              		.loc 1 442 9 is_stmt 1 view .LVU95
 442:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 19


 340              		.loc 1 442 38 is_stmt 0 view .LVU96
 341 0044 0324     		movs	r4, #3
 342              	.LVL25:
 442:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
 343              		.loc 1 442 38 view .LVU97
 344 0046 024B     		ldr	r3, .L31+4
 345 0048 1C74     		strb	r4, [r3, #16]
 443:Core/Src/bootloader.c ****     }
 346              		.loc 1 443 9 is_stmt 1 view .LVU98
 443:Core/Src/bootloader.c ****     }
 347              		.loc 1 443 16 is_stmt 0 view .LVU99
 348 004a F8E7     		b	.L28
 349              	.L32:
 350              		.align	2
 351              	.L31:
 352 004c 00200240 		.word	1073881088
 353 0050 00000000 		.word	bootloader_status
 354              		.cfi_endproc
 355              	.LFE136:
 357              		.section	.text.Bootloader_WriteFlash,"ax",%progbits
 358              		.align	1
 359              		.syntax unified
 360              		.thumb
 361              		.thumb_func
 363              	Bootloader_WriteFlash:
 364              	.LVL26:
 365              	.LFB137:
 458:Core/Src/bootloader.c ****     HAL_StatusTypeDef status = HAL_OK;
 366              		.loc 1 458 1 is_stmt 1 view -0
 367              		.cfi_startproc
 368              		@ args = 0, pretend = 0, frame = 0
 369              		@ frame_needed = 0, uses_anonymous_args = 0
 458:Core/Src/bootloader.c ****     HAL_StatusTypeDef status = HAL_OK;
 370              		.loc 1 458 1 is_stmt 0 view .LVU101
 371 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 372              		.cfi_def_cfa_offset 24
 373              		.cfi_offset 4, -24
 374              		.cfi_offset 5, -20
 375              		.cfi_offset 6, -16
 376              		.cfi_offset 7, -12
 377              		.cfi_offset 8, -8
 378              		.cfi_offset 14, -4
 459:Core/Src/bootloader.c ****     uint32_t i;
 379              		.loc 1 459 5 is_stmt 1 view .LVU102
 380              	.LVL27:
 460:Core/Src/bootloader.c ****     uint64_t data64;
 381              		.loc 1 460 5 view .LVU103
 461:Core/Src/bootloader.c **** 
 382              		.loc 1 461 5 view .LVU104
 464:Core/Src/bootloader.c ****     {
 383              		.loc 1 464 5 view .LVU105
 464:Core/Src/bootloader.c ****     {
 384              		.loc 1 464 39 is_stmt 0 view .LVU106
 385 0004 00F17843 		add	r3, r0, #-134217728
 386 0008 A3F50043 		sub	r3, r3, #32768
 464:Core/Src/bootloader.c ****     {
 387              		.loc 1 464 8 view .LVU107
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 20


 388 000c B3F5503F 		cmp	r3, #212992
 389 0010 3DD2     		bcs	.L43
 390 0012 0646     		mov	r6, r0
 391 0014 0D46     		mov	r5, r1
 392 0016 1746     		mov	r7, r2
 471:Core/Src/bootloader.c ****     {
 393              		.loc 1 471 5 is_stmt 1 view .LVU108
 471:Core/Src/bootloader.c ****     {
 394              		.loc 1 471 18 is_stmt 0 view .LVU109
 395 0018 1318     		adds	r3, r2, r0
 471:Core/Src/bootloader.c ****     {
 396              		.loc 1 471 27 view .LVU110
 397 001a 013B     		subs	r3, r3, #1
 471:Core/Src/bootloader.c ****     {
 398              		.loc 1 471 8 view .LVU111
 399 001c 2D4A     		ldr	r2, .L47
 400              	.LVL28:
 471:Core/Src/bootloader.c ****     {
 401              		.loc 1 471 8 view .LVU112
 402 001e 9342     		cmp	r3, r2
 403 0020 3BD2     		bcs	.L44
 478:Core/Src/bootloader.c ****     {
 404              		.loc 1 478 5 is_stmt 1 view .LVU113
 478:Core/Src/bootloader.c ****     {
 405              		.loc 1 478 8 is_stmt 0 view .LVU114
 406 0022 17F0070F 		tst	r7, #7
 407 0026 3ED1     		bne	.L45
 485:Core/Src/bootloader.c ****     
 408              		.loc 1 485 5 is_stmt 1 view .LVU115
 409 0028 FFF7FEFF 		bl	HAL_FLASH_Unlock
 410              	.LVL29:
 488:Core/Src/bootloader.c ****     
 411              		.loc 1 488 5 view .LVU116
 488:Core/Src/bootloader.c ****     
 412              		.loc 1 488 5 view .LVU117
 488:Core/Src/bootloader.c ****     
 413              		.loc 1 488 5 discriminator 1 view .LVU118
 414 002c 2A4B     		ldr	r3, .L47+4
 415 002e 9A69     		ldr	r2, [r3, #24]
 416 0030 42F04042 		orr	r2, r2, #-1073741824
 417 0034 9A61     		str	r2, [r3, #24]
 488:Core/Src/bootloader.c ****     
 418              		.loc 1 488 5 discriminator 3 view .LVU119
 488:Core/Src/bootloader.c ****     
 419              		.loc 1 488 5 discriminator 4 view .LVU120
 420 0036 4CF2FA32 		movw	r2, #50170
 421 003a 1A61     		str	r2, [r3, #16]
 488:Core/Src/bootloader.c ****     
 422              		.loc 1 488 5 discriminator 6 view .LVU121
 491:Core/Src/bootloader.c ****     {
 423              		.loc 1 491 5 view .LVU122
 424              	.LVL30:
 491:Core/Src/bootloader.c ****     {
 425              		.loc 1 491 12 is_stmt 0 view .LVU123
 426 003c 0024     		movs	r4, #0
 459:Core/Src/bootloader.c ****     uint32_t i;
 427              		.loc 1 459 23 view .LVU124
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 21


 428 003e A046     		mov	r8, r4
 429              	.LVL31:
 430              	.L38:
 491:Core/Src/bootloader.c ****     {
 431              		.loc 1 491 19 is_stmt 1 discriminator 1 view .LVU125
 432 0040 A742     		cmp	r7, r4
 433 0042 36D9     		bls	.L39
 494:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 1] << 8)  |
 434              		.loc 1 494 9 view .LVU126
 494:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 1] << 8)  |
 435              		.loc 1 494 33 is_stmt 0 view .LVU127
 436 0044 2A5D     		ldrb	r2, [r5, r4]	@ zero_extendqisi2
 495:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 2] << 16) |
 437              		.loc 1 495 33 view .LVU128
 438 0046 05EB040C 		add	ip, r5, r4
 439 004a 9CF80130 		ldrb	r3, [ip, #1]	@ zero_extendqisi2
 494:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 1] << 8)  |
 440              		.loc 1 494 48 view .LVU129
 441 004e 42EA0322 		orr	r2, r2, r3, lsl #8
 496:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 3] << 24) |
 442              		.loc 1 496 33 view .LVU130
 443 0052 9CF80230 		ldrb	r3, [ip, #2]	@ zero_extendqisi2
 495:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 2] << 16) |
 444              		.loc 1 495 48 view .LVU131
 445 0056 42EA0342 		orr	r2, r2, r3, lsl #16
 497:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 4] << 32) |
 446              		.loc 1 497 33 view .LVU132
 447 005a 9CF80300 		ldrb	r0, [ip, #3]	@ zero_extendqisi2
 497:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 4] << 32) |
 448              		.loc 1 497 48 view .LVU133
 449 005e 9CF80430 		ldrb	r3, [ip, #4]	@ zero_extendqisi2
 499:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 6] << 48) |
 450              		.loc 1 499 33 view .LVU134
 451 0062 9CF80510 		ldrb	r1, [ip, #5]	@ zero_extendqisi2
 498:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 5] << 40) |
 452              		.loc 1 498 48 view .LVU135
 453 0066 43EA0123 		orr	r3, r3, r1, lsl #8
 500:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 7] << 56);
 454              		.loc 1 500 33 view .LVU136
 455 006a 9CF80610 		ldrb	r1, [ip, #6]	@ zero_extendqisi2
 499:Core/Src/bootloader.c ****                  ((uint64_t)data[i + 6] << 48) |
 456              		.loc 1 499 48 view .LVU137
 457 006e 43EA0143 		orr	r3, r3, r1, lsl #16
 501:Core/Src/bootloader.c ****         
 458              		.loc 1 501 33 view .LVU138
 459 0072 9CF80710 		ldrb	r1, [ip, #7]	@ zero_extendqisi2
 460              	.LVL32:
 503:Core/Src/bootloader.c ****         
 461              		.loc 1 503 9 is_stmt 1 view .LVU139
 503:Core/Src/bootloader.c ****         
 462              		.loc 1 503 18 is_stmt 0 view .LVU140
 463 0076 42EA0062 		orr	r2, r2, r0, lsl #24
 464              	.LVL33:
 503:Core/Src/bootloader.c ****         
 465              		.loc 1 503 18 view .LVU141
 466 007a 43EA0163 		orr	r3, r3, r1, lsl #24
 467              	.LVL34:
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 22


 503:Core/Src/bootloader.c ****         
 468              		.loc 1 503 18 view .LVU142
 469 007e A119     		adds	r1, r4, r6
 470 0080 0020     		movs	r0, #0
 471 0082 FFF7FEFF 		bl	HAL_FLASH_Program
 472              	.LVL35:
 505:Core/Src/bootloader.c ****         {
 473              		.loc 1 505 9 is_stmt 1 view .LVU143
 505:Core/Src/bootloader.c ****         {
 474              		.loc 1 505 12 is_stmt 0 view .LVU144
 475 0086 8046     		mov	r8, r0
 476 0088 98B9     		cbnz	r0, .L39
 491:Core/Src/bootloader.c ****     {
 477              		.loc 1 491 31 is_stmt 1 discriminator 2 view .LVU145
 478 008a 0834     		adds	r4, r4, #8
 479              	.LVL36:
 491:Core/Src/bootloader.c ****     {
 480              		.loc 1 491 31 is_stmt 0 discriminator 2 view .LVU146
 481 008c D8E7     		b	.L38
 482              	.LVL37:
 483              	.L43:
 466:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 484              		.loc 1 466 9 is_stmt 1 view .LVU147
 466:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 485              		.loc 1 466 38 is_stmt 0 view .LVU148
 486 008e 4FF00208 		mov	r8, #2
 487 0092 124B     		ldr	r3, .L47+8
 488 0094 83F81080 		strb	r8, [r3, #16]
 467:Core/Src/bootloader.c ****     }
 489              		.loc 1 467 9 is_stmt 1 view .LVU149
 467:Core/Src/bootloader.c ****     }
 490              		.loc 1 467 16 is_stmt 0 view .LVU150
 491 0098 13E0     		b	.L35
 492              	.LVL38:
 493              	.L44:
 473:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 494              		.loc 1 473 9 is_stmt 1 view .LVU151
 473:Core/Src/bootloader.c ****         return ERR_INVALID_ADDRESS;
 495              		.loc 1 473 38 is_stmt 0 view .LVU152
 496 009a 4FF00208 		mov	r8, #2
 497 009e 0F4B     		ldr	r3, .L47+8
 498 00a0 83F81080 		strb	r8, [r3, #16]
 474:Core/Src/bootloader.c ****     }
 499              		.loc 1 474 9 is_stmt 1 view .LVU153
 474:Core/Src/bootloader.c ****     }
 500              		.loc 1 474 16 is_stmt 0 view .LVU154
 501 00a4 0DE0     		b	.L35
 502              	.L45:
 480:Core/Src/bootloader.c ****         return ERR_INVALID_DATA_LENGTH;
 503              		.loc 1 480 9 is_stmt 1 view .LVU155
 480:Core/Src/bootloader.c ****         return ERR_INVALID_DATA_LENGTH;
 504              		.loc 1 480 38 is_stmt 0 view .LVU156
 505 00a6 4FF00508 		mov	r8, #5
 506 00aa 0C4B     		ldr	r3, .L47+8
 507 00ac 83F81080 		strb	r8, [r3, #16]
 481:Core/Src/bootloader.c ****     }
 508              		.loc 1 481 9 is_stmt 1 view .LVU157
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 23


 481:Core/Src/bootloader.c ****     }
 509              		.loc 1 481 16 is_stmt 0 view .LVU158
 510 00b0 07E0     		b	.L35
 511              	.LVL39:
 512              	.L39:
 512:Core/Src/bootloader.c ****     
 513              		.loc 1 512 5 is_stmt 1 view .LVU159
 514 00b2 FFF7FEFF 		bl	HAL_FLASH_Lock
 515              	.LVL40:
 514:Core/Src/bootloader.c ****     {
 516              		.loc 1 514 5 view .LVU160
 514:Core/Src/bootloader.c ****     {
 517              		.loc 1 514 8 is_stmt 0 view .LVU161
 518 00b6 B8F1000F 		cmp	r8, #0
 519 00ba 05D1     		bne	.L46
 520:Core/Src/bootloader.c ****     return ERR_NONE;
 520              		.loc 1 520 5 is_stmt 1 view .LVU162
 520:Core/Src/bootloader.c ****     return ERR_NONE;
 521              		.loc 1 520 34 is_stmt 0 view .LVU163
 522 00bc 074B     		ldr	r3, .L47+8
 523 00be 0022     		movs	r2, #0
 524 00c0 1A74     		strb	r2, [r3, #16]
 521:Core/Src/bootloader.c **** }
 525              		.loc 1 521 5 is_stmt 1 view .LVU164
 526              	.LVL41:
 527              	.L35:
 522:Core/Src/bootloader.c **** 
 528              		.loc 1 522 1 is_stmt 0 view .LVU165
 529 00c2 4046     		mov	r0, r8
 530 00c4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 531              	.LVL42:
 532              	.L46:
 516:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 533              		.loc 1 516 9 is_stmt 1 view .LVU166
 516:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 534              		.loc 1 516 38 is_stmt 0 view .LVU167
 535 00c8 4FF00408 		mov	r8, #4
 536              	.LVL43:
 516:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 537              		.loc 1 516 38 view .LVU168
 538 00cc 034B     		ldr	r3, .L47+8
 539 00ce 83F81080 		strb	r8, [r3, #16]
 517:Core/Src/bootloader.c ****     }
 540              		.loc 1 517 9 is_stmt 1 view .LVU169
 517:Core/Src/bootloader.c ****     }
 541              		.loc 1 517 16 is_stmt 0 view .LVU170
 542 00d2 F6E7     		b	.L35
 543              	.L48:
 544              		.align	2
 545              	.L47:
 546 00d4 00C00308 		.word	134463488
 547 00d8 00200240 		.word	1073881088
 548 00dc 00000000 		.word	bootloader_status
 549              		.cfi_endproc
 550              	.LFE137:
 552              		.section	.text.Bootloader_DeInit,"ax",%progbits
 553              		.align	1
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 24


 554              		.syntax unified
 555              		.thumb
 556              		.thumb_func
 558              	Bootloader_DeInit:
 559              	.LFB140:
 586:Core/Src/bootloader.c ****     /* Turn off and de-initialize LED */
 560              		.loc 1 586 1 is_stmt 1 view -0
 561              		.cfi_startproc
 562              		@ args = 0, pretend = 0, frame = 0
 563              		@ frame_needed = 0, uses_anonymous_args = 0
 564 0000 10B5     		push	{r4, lr}
 565              		.cfi_def_cfa_offset 8
 566              		.cfi_offset 4, -8
 567              		.cfi_offset 14, -4
 588:Core/Src/bootloader.c ****     HAL_GPIO_DeInit(LED_PORT, LED_PIN);
 568              		.loc 1 588 5 view .LVU172
 569 0002 164C     		ldr	r4, .L51
 570 0004 0022     		movs	r2, #0
 571 0006 0821     		movs	r1, #8
 572 0008 2046     		mov	r0, r4
 573 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 574              	.LVL44:
 589:Core/Src/bootloader.c ****     
 575              		.loc 1 589 5 view .LVU173
 576 000e 0821     		movs	r1, #8
 577 0010 2046     		mov	r0, r4
 578 0012 FFF7FEFF 		bl	HAL_GPIO_DeInit
 579              	.LVL45:
 592:Core/Src/bootloader.c ****     HAL_CAN_Stop(hcan_bootloader);
 580              		.loc 1 592 5 view .LVU174
 581 0016 124C     		ldr	r4, .L51+4
 582 0018 0221     		movs	r1, #2
 583 001a 2068     		ldr	r0, [r4]
 584 001c FFF7FEFF 		bl	HAL_CAN_DeactivateNotification
 585              	.LVL46:
 593:Core/Src/bootloader.c ****     HAL_CAN_MspDeInit(hcan_bootloader);
 586              		.loc 1 593 5 view .LVU175
 587 0020 2068     		ldr	r0, [r4]
 588 0022 FFF7FEFF 		bl	HAL_CAN_Stop
 589              	.LVL47:
 594:Core/Src/bootloader.c ****     
 590              		.loc 1 594 5 view .LVU176
 591 0026 2068     		ldr	r0, [r4]
 592 0028 FFF7FEFF 		bl	HAL_CAN_MspDeInit
 593              	.LVL48:
 597:Core/Src/bootloader.c ****     SysTick->LOAD = 0;
 594              		.loc 1 597 5 view .LVU177
 597:Core/Src/bootloader.c ****     SysTick->LOAD = 0;
 595              		.loc 1 597 19 is_stmt 0 view .LVU178
 596 002c 4FF0E023 		mov	r3, #-536813568
 597 0030 0022     		movs	r2, #0
 598 0032 1A61     		str	r2, [r3, #16]
 598:Core/Src/bootloader.c ****     SysTick->VAL = 0;
 599              		.loc 1 598 5 is_stmt 1 view .LVU179
 598:Core/Src/bootloader.c ****     SysTick->VAL = 0;
 600              		.loc 1 598 19 is_stmt 0 view .LVU180
 601 0034 5A61     		str	r2, [r3, #20]
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 25


 599:Core/Src/bootloader.c ****     
 602              		.loc 1 599 5 is_stmt 1 view .LVU181
 599:Core/Src/bootloader.c ****     
 603              		.loc 1 599 18 is_stmt 0 view .LVU182
 604 0036 9A61     		str	r2, [r3, #24]
 602:Core/Src/bootloader.c ****     
 605              		.loc 1 602 5 is_stmt 1 view .LVU183
 606              	.LBB6:
 607              	.LBI6:
 608              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.2.0
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     08. May 2019
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2019 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 26


  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 27


 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __COMPILER_BARRIER
 117:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __COMPILER_BARRIER()                   __ASM volatile("":::"memory")
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 120:Drivers/CMSIS/Include/cmsis_gcc.h **** /* #########################  Startup and Lowlevel Init  ######################## */
 121:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 122:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __PROGRAM_START
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Initializes data and bss sections
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details This default implementations initialized all data and additional bss
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            sections relying on .copy.table and .zero.table specified properly
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****            in the used linker script.
 129:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 130:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE __NO_RETURN void __cmsis_start(void)
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 133:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern void _start(void) __NO_RETURN;
 134:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 135:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t const* src;
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __copy_table_t;
 140:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 141:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 143:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 144:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __zero_table_t;
 145:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 146:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_start__;
 147:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_end__;
 148:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_start__;
 149:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_end__;
 150:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 151:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__copy_table_t const* pTable = &__copy_table_start__; pTable < &__copy_table_end__; ++pTable
 152:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 153:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = pTable->src[i];
 154:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 155:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 156:Drivers/CMSIS/Include/cmsis_gcc.h ****  
 157:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__zero_table_t const* pTable = &__zero_table_start__; pTable < &__zero_table_end__; ++pTable
 158:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 159:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = 0u;
 160:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 161:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 28


 162:Drivers/CMSIS/Include/cmsis_gcc.h ****  
 163:Drivers/CMSIS/Include/cmsis_gcc.h ****   _start();
 164:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 165:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 166:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __PROGRAM_START           __cmsis_start
 167:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 168:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 169:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __INITIAL_SP
 170:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __INITIAL_SP              __StackTop
 171:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 172:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 173:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __STACK_LIMIT
 174:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __STACK_LIMIT             __StackLimit
 175:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 176:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 177:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE
 178:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE            __Vectors
 179:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 180:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 181:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE_ATTRIBUTE
 182:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE_ATTRIBUTE  __attribute((used, section(".vectors")))
 183:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 184:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 185:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 186:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 187:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 188:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 189:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 190:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 191:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 192:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 193:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 194:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 195:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 196:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 197:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 198:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 199:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 200:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 201:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 202:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 203:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 204:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 205:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 206:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 207:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 609              		.loc 2 207 27 view .LVU184
 610              	.LBB7:
 208:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 209:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 611              		.loc 2 209 3 view .LVU185
 612              		.syntax unified
 613              	@ 209 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 614 0038 72B6     		cpsid i
 615              	@ 0 "" 2
 616              		.thumb
 617              		.syntax unified
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 29


 618              	.LBE7:
 619              	.LBE6:
 605:Core/Src/bootloader.c ****     __HAL_RCC_GPIOB_CLK_DISABLE();
 620              		.loc 1 605 5 view .LVU186
 621 003a 03F1C043 		add	r3, r3, #1610612736
 622 003e 03F59833 		add	r3, r3, #77824
 623 0042 DA6C     		ldr	r2, [r3, #76]
 624 0044 22F00102 		bic	r2, r2, #1
 625 0048 DA64     		str	r2, [r3, #76]
 606:Core/Src/bootloader.c ****     __HAL_RCC_CAN1_CLK_DISABLE();
 626              		.loc 1 606 5 view .LVU187
 627 004a DA6C     		ldr	r2, [r3, #76]
 628 004c 22F00202 		bic	r2, r2, #2
 629 0050 DA64     		str	r2, [r3, #76]
 607:Core/Src/bootloader.c **** }
 630              		.loc 1 607 5 view .LVU188
 631 0052 9A6D     		ldr	r2, [r3, #88]
 632 0054 22F00072 		bic	r2, r2, #33554432
 633 0058 9A65     		str	r2, [r3, #88]
 608:Core/Src/bootloader.c **** 
 634              		.loc 1 608 1 is_stmt 0 view .LVU189
 635 005a 10BD     		pop	{r4, pc}
 636              	.L52:
 637              		.align	2
 638              	.L51:
 639 005c 00040048 		.word	1207960576
 640 0060 00000000 		.word	hcan_bootloader
 641              		.cfi_endproc
 642              	.LFE140:
 644              		.section	.text.Bootloader_Init,"ax",%progbits
 645              		.align	1
 646              		.global	Bootloader_Init
 647              		.syntax unified
 648              		.thumb
 649              		.thumb_func
 651              	Bootloader_Init:
 652              	.LVL49:
 653              	.LFB132:
  50:Core/Src/bootloader.c ****     hcan_bootloader = hcan;
 654              		.loc 1 50 1 is_stmt 1 view -0
 655              		.cfi_startproc
 656              		@ args = 0, pretend = 0, frame = 0
 657              		@ frame_needed = 0, uses_anonymous_args = 0
  50:Core/Src/bootloader.c ****     hcan_bootloader = hcan;
 658              		.loc 1 50 1 is_stmt 0 view .LVU191
 659 0000 10B5     		push	{r4, lr}
 660              		.cfi_def_cfa_offset 8
 661              		.cfi_offset 4, -8
 662              		.cfi_offset 14, -4
  51:Core/Src/bootloader.c ****     
 663              		.loc 1 51 5 is_stmt 1 view .LVU192
  51:Core/Src/bootloader.c ****     
 664              		.loc 1 51 21 is_stmt 0 view .LVU193
 665 0002 144C     		ldr	r4, .L59
 666 0004 2060     		str	r0, [r4]
  54:Core/Src/bootloader.c ****     bootloader_status.state = BL_STATE_IDLE;
 667              		.loc 1 54 5 is_stmt 1 view .LVU194
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 30


 668 0006 144B     		ldr	r3, .L59+4
 669 0008 0022     		movs	r2, #0
 670 000a 1A60     		str	r2, [r3]
 671 000c 5A60     		str	r2, [r3, #4]
 672 000e 9A60     		str	r2, [r3, #8]
 673 0010 DA60     		str	r2, [r3, #12]
 674 0012 1A61     		str	r2, [r3, #16]
  55:Core/Src/bootloader.c ****     bootloader_status.current_address = APPLICATION_ADDRESS;
 675              		.loc 1 55 5 view .LVU195
  56:Core/Src/bootloader.c ****     
 676              		.loc 1 56 5 view .LVU196
  56:Core/Src/bootloader.c ****     
 677              		.loc 1 56 39 is_stmt 0 view .LVU197
 678 0014 114A     		ldr	r2, .L59+8
 679 0016 5A60     		str	r2, [r3, #4]
  59:Core/Src/bootloader.c ****     
 680              		.loc 1 59 5 is_stmt 1 view .LVU198
 681 0018 FFF7FEFF 		bl	Bootloader_ConfigureCANFilter
 682              	.LVL50:
  62:Core/Src/bootloader.c ****     {
 683              		.loc 1 62 5 view .LVU199
  62:Core/Src/bootloader.c ****     {
 684              		.loc 1 62 9 is_stmt 0 view .LVU200
 685 001c 2068     		ldr	r0, [r4]
 686 001e FFF7FEFF 		bl	HAL_CAN_Start
 687              	.LVL51:
  62:Core/Src/bootloader.c ****     {
 688              		.loc 1 62 8 discriminator 1 view .LVU201
 689 0022 88B9     		cbnz	r0, .L57
 690              	.L54:
  68:Core/Src/bootloader.c ****     {
 691              		.loc 1 68 5 is_stmt 1 view .LVU202
  68:Core/Src/bootloader.c ****     {
 692              		.loc 1 68 9 is_stmt 0 view .LVU203
 693 0024 0221     		movs	r1, #2
 694 0026 0B4B     		ldr	r3, .L59
 695 0028 1868     		ldr	r0, [r3]
 696 002a FFF7FEFF 		bl	HAL_CAN_ActivateNotification
 697              	.LVL52:
  68:Core/Src/bootloader.c ****     {
 698              		.loc 1 68 8 discriminator 1 view .LVU204
 699 002e 70B9     		cbnz	r0, .L58
 700              	.L55:
  74:Core/Src/bootloader.c ****     tx_header.ExtId = CAN_BOOTLOADER_ID;
 701              		.loc 1 74 5 is_stmt 1 view .LVU205
  74:Core/Src/bootloader.c ****     tx_header.ExtId = CAN_BOOTLOADER_ID;
 702              		.loc 1 74 21 is_stmt 0 view .LVU206
 703 0030 0B4B     		ldr	r3, .L59+12
 704 0032 0022     		movs	r2, #0
 705 0034 1A60     		str	r2, [r3]
  75:Core/Src/bootloader.c ****     tx_header.IDE = CAN_ID_EXT;
 706              		.loc 1 75 5 is_stmt 1 view .LVU207
  75:Core/Src/bootloader.c ****     tx_header.IDE = CAN_ID_EXT;
 707              		.loc 1 75 21 is_stmt 0 view .LVU208
 708 0036 0B49     		ldr	r1, .L59+16
 709 0038 5960     		str	r1, [r3, #4]
  76:Core/Src/bootloader.c ****     tx_header.RTR = CAN_RTR_DATA;
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 31


 710              		.loc 1 76 5 is_stmt 1 view .LVU209
  76:Core/Src/bootloader.c ****     tx_header.RTR = CAN_RTR_DATA;
 711              		.loc 1 76 19 is_stmt 0 view .LVU210
 712 003a 0421     		movs	r1, #4
 713 003c 9960     		str	r1, [r3, #8]
  77:Core/Src/bootloader.c ****     tx_header.DLC = 8;
 714              		.loc 1 77 5 is_stmt 1 view .LVU211
  77:Core/Src/bootloader.c ****     tx_header.DLC = 8;
 715              		.loc 1 77 19 is_stmt 0 view .LVU212
 716 003e DA60     		str	r2, [r3, #12]
  78:Core/Src/bootloader.c ****     tx_header.TransmitGlobalTime = DISABLE;
 717              		.loc 1 78 5 is_stmt 1 view .LVU213
  78:Core/Src/bootloader.c ****     tx_header.TransmitGlobalTime = DISABLE;
 718              		.loc 1 78 19 is_stmt 0 view .LVU214
 719 0040 0821     		movs	r1, #8
 720 0042 1961     		str	r1, [r3, #16]
  79:Core/Src/bootloader.c **** }
 721              		.loc 1 79 5 is_stmt 1 view .LVU215
  79:Core/Src/bootloader.c **** }
 722              		.loc 1 79 34 is_stmt 0 view .LVU216
 723 0044 1A75     		strb	r2, [r3, #20]
  80:Core/Src/bootloader.c **** 
 724              		.loc 1 80 1 view .LVU217
 725 0046 10BD     		pop	{r4, pc}
 726              	.L57:
  64:Core/Src/bootloader.c ****     }
 727              		.loc 1 64 9 is_stmt 1 view .LVU218
 728 0048 FFF7FEFF 		bl	Error_Handler
 729              	.LVL53:
 730 004c EAE7     		b	.L54
 731              	.L58:
  70:Core/Src/bootloader.c ****     }
 732              		.loc 1 70 9 view .LVU219
 733 004e FFF7FEFF 		bl	Error_Handler
 734              	.LVL54:
 735 0052 EDE7     		b	.L55
 736              	.L60:
 737              		.align	2
 738              	.L59:
 739 0054 00000000 		.word	hcan_bootloader
 740 0058 00000000 		.word	bootloader_status
 741 005c 00800008 		.word	134250496
 742 0060 00000000 		.word	tx_header
 743 0064 00070018 		.word	402654976
 744              		.cfi_endproc
 745              	.LFE132:
 747              		.section	.text.Bootloader_CheckValidApplication,"ax",%progbits
 748              		.align	1
 749              		.global	Bootloader_CheckValidApplication
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 754              	Bootloader_CheckValidApplication:
 755              	.LFB139:
 562:Core/Src/bootloader.c ****     uint32_t stack_pointer = *(__IO uint32_t *)APPLICATION_ADDRESS;
 756              		.loc 1 562 1 view -0
 757              		.cfi_startproc
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 32


 758              		@ args = 0, pretend = 0, frame = 0
 759              		@ frame_needed = 0, uses_anonymous_args = 0
 760              		@ link register save eliminated.
 563:Core/Src/bootloader.c ****     uint32_t reset_handler = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 761              		.loc 1 563 5 view .LVU221
 563:Core/Src/bootloader.c ****     uint32_t reset_handler = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 762              		.loc 1 563 14 is_stmt 0 view .LVU222
 763 0000 094A     		ldr	r2, .L65
 764 0002 1368     		ldr	r3, [r2]
 765              	.LVL55:
 564:Core/Src/bootloader.c ****     
 766              		.loc 1 564 5 is_stmt 1 view .LVU223
 564:Core/Src/bootloader.c ****     
 767              		.loc 1 564 14 is_stmt 0 view .LVU224
 768 0004 5268     		ldr	r2, [r2, #4]
 769              	.LVL56:
 567:Core/Src/bootloader.c ****     {
 770              		.loc 1 567 5 is_stmt 1 view .LVU225
 567:Core/Src/bootloader.c ****     {
 771              		.loc 1 567 24 is_stmt 0 view .LVU226
 772 0006 6FF31303 		bfc	r3, #0, #20
 773              	.LVL57:
 567:Core/Src/bootloader.c ****     {
 774              		.loc 1 567 8 view .LVU227
 775 000a B3F1005F 		cmp	r3, #536870912
 776 000e 06D1     		bne	.L63
 573:Core/Src/bootloader.c ****     {
 777              		.loc 1 573 5 is_stmt 1 view .LVU228
 573:Core/Src/bootloader.c ****     {
 778              		.loc 1 573 52 is_stmt 0 view .LVU229
 779 0010 6FF35702 		bfc	r2, #1, #23
 780              	.LVL58:
 573:Core/Src/bootloader.c ****     {
 781              		.loc 1 573 8 view .LVU230
 782 0014 054B     		ldr	r3, .L65+4
 783 0016 9A42     		cmp	r2, r3
 784 0018 03D1     		bne	.L64
 578:Core/Src/bootloader.c **** }
 785              		.loc 1 578 12 view .LVU231
 786 001a 0120     		movs	r0, #1
 787 001c 7047     		bx	lr
 788              	.LVL59:
 789              	.L63:
 569:Core/Src/bootloader.c ****     }
 790              		.loc 1 569 16 view .LVU232
 791 001e 0020     		movs	r0, #0
 792 0020 7047     		bx	lr
 793              	.LVL60:
 794              	.L64:
 575:Core/Src/bootloader.c ****     }
 795              		.loc 1 575 16 view .LVU233
 796 0022 0020     		movs	r0, #0
 579:Core/Src/bootloader.c **** 
 797              		.loc 1 579 1 view .LVU234
 798 0024 7047     		bx	lr
 799              	.L66:
 800 0026 00BF     		.align	2
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 33


 801              	.L65:
 802 0028 00800008 		.word	134250496
 803 002c 01000008 		.word	134217729
 804              		.cfi_endproc
 805              	.LFE139:
 807              		.section	.text.Bootloader_SendCANMessage,"ax",%progbits
 808              		.align	1
 809              		.global	Bootloader_SendCANMessage
 810              		.syntax unified
 811              		.thumb
 812              		.thumb_func
 814              	Bootloader_SendCANMessage:
 815              	.LVL61:
 816              	.LFB145:
 627:Core/Src/bootloader.c **** 
 628:Core/Src/bootloader.c **** /**
 629:Core/Src/bootloader.c ****   * @brief  Jump to application
 630:Core/Src/bootloader.c ****   * @retval Error code (if returns, jump failed)
 631:Core/Src/bootloader.c ****   */
 632:Core/Src/bootloader.c **** uint8_t Bootloader_JumpToApplication(void)
 633:Core/Src/bootloader.c **** {
 634:Core/Src/bootloader.c ****     typedef void (*pFunction)(void);
 635:Core/Src/bootloader.c ****     pFunction jump_to_application;
 636:Core/Src/bootloader.c ****     uint32_t jump_address;
 637:Core/Src/bootloader.c ****     uint32_t app_stack_pointer;
 638:Core/Src/bootloader.c ****     uint8_t jump_info[8];
 639:Core/Src/bootloader.c ****     
 640:Core/Src/bootloader.c ****     /* Check if valid application exists */
 641:Core/Src/bootloader.c ****     if (!Bootloader_CheckValidApplication())
 642:Core/Src/bootloader.c ****     {
 643:Core/Src/bootloader.c ****         return ERR_NO_VALID_APP;
 644:Core/Src/bootloader.c ****     }
 645:Core/Src/bootloader.c ****     
 646:Core/Src/bootloader.c ****     /* Read application vector table */
 647:Core/Src/bootloader.c ****     app_stack_pointer = *(__IO uint32_t *)APPLICATION_ADDRESS;
 648:Core/Src/bootloader.c ****     jump_address = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 649:Core/Src/bootloader.c ****     
 650:Core/Src/bootloader.c ****     /* Send detailed jump information before jumping */
 651:Core/Src/bootloader.c ****     jump_info[0] = RESP_JUMP_INFO;
 652:Core/Src/bootloader.c ****     jump_info[1] = (app_stack_pointer >> 24) & 0xFF;  /* Stack pointer MSB */
 653:Core/Src/bootloader.c ****     jump_info[2] = (app_stack_pointer >> 16) & 0xFF;
 654:Core/Src/bootloader.c ****     jump_info[3] = (app_stack_pointer >> 8) & 0xFF;
 655:Core/Src/bootloader.c ****     jump_info[4] = app_stack_pointer & 0xFF;          /* Stack pointer LSB */
 656:Core/Src/bootloader.c ****     jump_info[5] = (jump_address >> 16) & 0xFF;       /* Reset vector high word */
 657:Core/Src/bootloader.c ****     jump_info[6] = (jump_address >> 8) & 0xFF;
 658:Core/Src/bootloader.c ****     jump_info[7] = jump_address & 0xFF;               /* Reset vector LSB */
 659:Core/Src/bootloader.c ****     
 660:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_JUMP_INFO, jump_info, 8);
 661:Core/Src/bootloader.c ****     
 662:Core/Src/bootloader.c ****     /* Wait for CAN transmission to complete */
 663:Core/Src/bootloader.c ****     Bootloader_WaitForCANTransmission();
 664:Core/Src/bootloader.c ****     
 665:Core/Src/bootloader.c ****     bootloader_status.state = BL_STATE_JUMPING;
 666:Core/Src/bootloader.c ****     
 667:Core/Src/bootloader.c ****     /* De-initialize peripherals */
 668:Core/Src/bootloader.c ****     Bootloader_DeInit();
 669:Core/Src/bootloader.c ****     
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 34


 670:Core/Src/bootloader.c ****     /* Get the application stack pointer */
 671:Core/Src/bootloader.c ****     __set_MSP(app_stack_pointer);
 672:Core/Src/bootloader.c ****     
 673:Core/Src/bootloader.c ****     /* Cast to function pointer */
 674:Core/Src/bootloader.c ****     jump_to_application = (pFunction)jump_address;
 675:Core/Src/bootloader.c ****     
 676:Core/Src/bootloader.c ****     /* Relocate vector table */
 677:Core/Src/bootloader.c ****     SCB->VTOR = APPLICATION_ADDRESS;
 678:Core/Src/bootloader.c ****     
 679:Core/Src/bootloader.c ****     /* Jump to application */
 680:Core/Src/bootloader.c ****     jump_to_application();
 681:Core/Src/bootloader.c ****     
 682:Core/Src/bootloader.c ****     /* Should never reach here */
 683:Core/Src/bootloader.c ****     return ERR_NONE;
 684:Core/Src/bootloader.c **** }
 685:Core/Src/bootloader.c **** 
 686:Core/Src/bootloader.c **** /**
 687:Core/Src/bootloader.c ****   * @brief  Send ACK message
 688:Core/Src/bootloader.c ****   * @retval None
 689:Core/Src/bootloader.c ****   */
 690:Core/Src/bootloader.c **** static void Bootloader_SendACK(void)
 691:Core/Src/bootloader.c **** {
 692:Core/Src/bootloader.c ****     tx_data[0] = RESP_ACK;
 693:Core/Src/bootloader.c ****     tx_data[1] = bootloader_status.last_error;
 694:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_ACK, tx_data, 2);
 695:Core/Src/bootloader.c **** }
 696:Core/Src/bootloader.c **** 
 697:Core/Src/bootloader.c **** /**
 698:Core/Src/bootloader.c ****   * @brief  Send NACK message
 699:Core/Src/bootloader.c ****   * @param  error_code: Error code to send
 700:Core/Src/bootloader.c ****   * @retval None
 701:Core/Src/bootloader.c ****   */
 702:Core/Src/bootloader.c **** static void Bootloader_SendNACK(uint8_t error_code)
 703:Core/Src/bootloader.c **** {
 704:Core/Src/bootloader.c ****     bootloader_status.last_error = error_code;
 705:Core/Src/bootloader.c ****     tx_data[0] = RESP_NACK;
 706:Core/Src/bootloader.c ****     tx_data[1] = error_code;
 707:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_NACK, tx_data, 2);
 708:Core/Src/bootloader.c **** }
 709:Core/Src/bootloader.c **** 
 710:Core/Src/bootloader.c **** /**
 711:Core/Src/bootloader.c ****   * @brief  Send CAN message
 712:Core/Src/bootloader.c ****   * @param  cmd: Command/response byte
 713:Core/Src/bootloader.c ****   * @param  data: Pointer to data buffer
 714:Core/Src/bootloader.c ****   * @param  length: Data length
 715:Core/Src/bootloader.c ****   * @retval None
 716:Core/Src/bootloader.c ****   */
 717:Core/Src/bootloader.c **** void Bootloader_SendCANMessage(uint8_t cmd, uint8_t *data, uint8_t length)
 718:Core/Src/bootloader.c **** {
 817              		.loc 1 718 1 is_stmt 1 view -0
 818              		.cfi_startproc
 819              		@ args = 0, pretend = 0, frame = 8
 820              		@ frame_needed = 0, uses_anonymous_args = 0
 821              		.loc 1 718 1 is_stmt 0 view .LVU236
 822 0000 00B5     		push	{lr}
 823              		.cfi_def_cfa_offset 4
 824              		.cfi_offset 14, -4
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 35


 825 0002 83B0     		sub	sp, sp, #12
 826              		.cfi_def_cfa_offset 16
 719:Core/Src/bootloader.c ****     uint8_t i;
 827              		.loc 1 719 5 is_stmt 1 view .LVU237
 720:Core/Src/bootloader.c ****     uint8_t tx_buffer[8] = {0};
 828              		.loc 1 720 5 view .LVU238
 829              		.loc 1 720 13 is_stmt 0 view .LVU239
 830 0004 0023     		movs	r3, #0
 831 0006 0093     		str	r3, [sp]
 832 0008 0193     		str	r3, [sp, #4]
 721:Core/Src/bootloader.c ****     
 722:Core/Src/bootloader.c ****     /* Copy data to TX buffer */
 723:Core/Src/bootloader.c ****     for (i = 0; i < length && i < 8; i++)
 833              		.loc 1 723 5 is_stmt 1 view .LVU240
 834              	.LVL62:
 835              		.loc 1 723 5 is_stmt 0 view .LVU241
 836 000a 08E0     		b	.L68
 837              	.LVL63:
 838              	.L70:
 724:Core/Src/bootloader.c ****     {
 725:Core/Src/bootloader.c ****         tx_buffer[i] = data[i];
 839              		.loc 1 725 9 is_stmt 1 view .LVU242
 840              		.loc 1 725 28 is_stmt 0 view .LVU243
 841 000c 11F803C0 		ldrb	ip, [r1, r3]	@ zero_extendqisi2
 842              		.loc 1 725 22 view .LVU244
 843 0010 03F10800 		add	r0, r3, #8
 844 0014 6844     		add	r0, sp, r0
 845 0016 00F808CC 		strb	ip, [r0, #-8]
 723:Core/Src/bootloader.c ****     {
 846              		.loc 1 723 39 is_stmt 1 discriminator 4 view .LVU245
 847 001a 0133     		adds	r3, r3, #1
 848              	.LVL64:
 723:Core/Src/bootloader.c ****     {
 849              		.loc 1 723 39 is_stmt 0 discriminator 4 view .LVU246
 850 001c DBB2     		uxtb	r3, r3
 851              	.LVL65:
 852              	.L68:
 723:Core/Src/bootloader.c ****     {
 853              		.loc 1 723 28 is_stmt 1 discriminator 1 view .LVU247
 854 001e 9342     		cmp	r3, r2
 855 0020 01D2     		bcs	.L69
 723:Core/Src/bootloader.c ****     {
 856              		.loc 1 723 28 is_stmt 0 discriminator 3 view .LVU248
 857 0022 072B     		cmp	r3, #7
 858 0024 F2D9     		bls	.L70
 859              	.L69:
 726:Core/Src/bootloader.c ****     }
 727:Core/Src/bootloader.c ****     
 728:Core/Src/bootloader.c ****     /* Set DLC */
 729:Core/Src/bootloader.c ****     tx_header.DLC = length;
 860              		.loc 1 729 5 is_stmt 1 view .LVU249
 861              		.loc 1 729 19 is_stmt 0 view .LVU250
 862 0026 0549     		ldr	r1, .L72
 863              	.LVL66:
 864              		.loc 1 729 19 view .LVU251
 865 0028 0A61     		str	r2, [r1, #16]
 730:Core/Src/bootloader.c ****     
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 36


 731:Core/Src/bootloader.c ****     /* Send message */
 732:Core/Src/bootloader.c ****     HAL_CAN_AddTxMessage(hcan_bootloader, &tx_header, tx_buffer, &tx_mailbox);
 866              		.loc 1 732 5 is_stmt 1 view .LVU252
 867 002a 054B     		ldr	r3, .L72+4
 868              	.LVL67:
 869              		.loc 1 732 5 is_stmt 0 view .LVU253
 870 002c 6A46     		mov	r2, sp
 871              	.LVL68:
 872              		.loc 1 732 5 view .LVU254
 873 002e 0548     		ldr	r0, .L72+8
 874 0030 0068     		ldr	r0, [r0]
 875 0032 FFF7FEFF 		bl	HAL_CAN_AddTxMessage
 876              	.LVL69:
 733:Core/Src/bootloader.c **** }
 877              		.loc 1 733 1 view .LVU255
 878 0036 03B0     		add	sp, sp, #12
 879              		.cfi_def_cfa_offset 4
 880              		@ sp needed
 881 0038 5DF804FB 		ldr	pc, [sp], #4
 882              	.L73:
 883              		.align	2
 884              	.L72:
 885 003c 00000000 		.word	tx_header
 886 0040 00000000 		.word	tx_mailbox
 887 0044 00000000 		.word	hcan_bootloader
 888              		.cfi_endproc
 889              	.LFE145:
 891              		.section	.text.Bootloader_SendACK,"ax",%progbits
 892              		.align	1
 893              		.syntax unified
 894              		.thumb
 895              		.thumb_func
 897              	Bootloader_SendACK:
 898              	.LFB143:
 691:Core/Src/bootloader.c ****     tx_data[0] = RESP_ACK;
 899              		.loc 1 691 1 is_stmt 1 view -0
 900              		.cfi_startproc
 901              		@ args = 0, pretend = 0, frame = 0
 902              		@ frame_needed = 0, uses_anonymous_args = 0
 903 0000 08B5     		push	{r3, lr}
 904              		.cfi_def_cfa_offset 8
 905              		.cfi_offset 3, -8
 906              		.cfi_offset 14, -4
 692:Core/Src/bootloader.c ****     tx_data[1] = bootloader_status.last_error;
 907              		.loc 1 692 5 view .LVU257
 692:Core/Src/bootloader.c ****     tx_data[1] = bootloader_status.last_error;
 908              		.loc 1 692 16 is_stmt 0 view .LVU258
 909 0002 0549     		ldr	r1, .L76
 910 0004 1020     		movs	r0, #16
 911 0006 0870     		strb	r0, [r1]
 693:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_ACK, tx_data, 2);
 912              		.loc 1 693 5 is_stmt 1 view .LVU259
 693:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_ACK, tx_data, 2);
 913              		.loc 1 693 35 is_stmt 0 view .LVU260
 914 0008 044B     		ldr	r3, .L76+4
 915 000a 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 693:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_ACK, tx_data, 2);
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 37


 916              		.loc 1 693 16 view .LVU261
 917 000c 4B70     		strb	r3, [r1, #1]
 694:Core/Src/bootloader.c **** }
 918              		.loc 1 694 5 is_stmt 1 view .LVU262
 919 000e 0222     		movs	r2, #2
 920 0010 FFF7FEFF 		bl	Bootloader_SendCANMessage
 921              	.LVL70:
 695:Core/Src/bootloader.c **** 
 922              		.loc 1 695 1 is_stmt 0 view .LVU263
 923 0014 08BD     		pop	{r3, pc}
 924              	.L77:
 925 0016 00BF     		.align	2
 926              	.L76:
 927 0018 00000000 		.word	tx_data
 928 001c 00000000 		.word	bootloader_status
 929              		.cfi_endproc
 930              	.LFE143:
 932              		.section	.text.Bootloader_SendNACK,"ax",%progbits
 933              		.align	1
 934              		.syntax unified
 935              		.thumb
 936              		.thumb_func
 938              	Bootloader_SendNACK:
 939              	.LVL71:
 940              	.LFB144:
 703:Core/Src/bootloader.c ****     bootloader_status.last_error = error_code;
 941              		.loc 1 703 1 is_stmt 1 view -0
 942              		.cfi_startproc
 943              		@ args = 0, pretend = 0, frame = 0
 944              		@ frame_needed = 0, uses_anonymous_args = 0
 703:Core/Src/bootloader.c ****     bootloader_status.last_error = error_code;
 945              		.loc 1 703 1 is_stmt 0 view .LVU265
 946 0000 08B5     		push	{r3, lr}
 947              		.cfi_def_cfa_offset 8
 948              		.cfi_offset 3, -8
 949              		.cfi_offset 14, -4
 950 0002 0346     		mov	r3, r0
 704:Core/Src/bootloader.c ****     tx_data[0] = RESP_NACK;
 951              		.loc 1 704 5 is_stmt 1 view .LVU266
 704:Core/Src/bootloader.c ****     tx_data[0] = RESP_NACK;
 952              		.loc 1 704 34 is_stmt 0 view .LVU267
 953 0004 044A     		ldr	r2, .L80
 954 0006 1074     		strb	r0, [r2, #16]
 705:Core/Src/bootloader.c ****     tx_data[1] = error_code;
 955              		.loc 1 705 5 is_stmt 1 view .LVU268
 705:Core/Src/bootloader.c ****     tx_data[1] = error_code;
 956              		.loc 1 705 16 is_stmt 0 view .LVU269
 957 0008 0449     		ldr	r1, .L80+4
 958 000a 1120     		movs	r0, #17
 959              	.LVL72:
 705:Core/Src/bootloader.c ****     tx_data[1] = error_code;
 960              		.loc 1 705 16 view .LVU270
 961 000c 0870     		strb	r0, [r1]
 706:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_NACK, tx_data, 2);
 962              		.loc 1 706 5 is_stmt 1 view .LVU271
 706:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_NACK, tx_data, 2);
 963              		.loc 1 706 16 is_stmt 0 view .LVU272
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 38


 964 000e 4B70     		strb	r3, [r1, #1]
 707:Core/Src/bootloader.c **** }
 965              		.loc 1 707 5 is_stmt 1 view .LVU273
 966 0010 0222     		movs	r2, #2
 707:Core/Src/bootloader.c **** }
 967              		.loc 1 707 5 is_stmt 0 view .LVU274
 968 0012 FFF7FEFF 		bl	Bootloader_SendCANMessage
 969              	.LVL73:
 708:Core/Src/bootloader.c **** 
 970              		.loc 1 708 1 view .LVU275
 971 0016 08BD     		pop	{r3, pc}
 972              	.L81:
 973              		.align	2
 974              	.L80:
 975 0018 00000000 		.word	bootloader_status
 976 001c 00000000 		.word	tx_data
 977              		.cfi_endproc
 978              	.LFE144:
 980              		.section	.text.Bootloader_JumpToApplication,"ax",%progbits
 981              		.align	1
 982              		.global	Bootloader_JumpToApplication
 983              		.syntax unified
 984              		.thumb
 985              		.thumb_func
 987              	Bootloader_JumpToApplication:
 988              	.LFB142:
 633:Core/Src/bootloader.c ****     typedef void (*pFunction)(void);
 989              		.loc 1 633 1 is_stmt 1 view -0
 990              		.cfi_startproc
 991              		@ args = 0, pretend = 0, frame = 8
 992              		@ frame_needed = 0, uses_anonymous_args = 0
 993 0000 70B5     		push	{r4, r5, r6, lr}
 994              		.cfi_def_cfa_offset 16
 995              		.cfi_offset 4, -16
 996              		.cfi_offset 5, -12
 997              		.cfi_offset 6, -8
 998              		.cfi_offset 14, -4
 999 0002 82B0     		sub	sp, sp, #8
 1000              		.cfi_def_cfa_offset 24
 634:Core/Src/bootloader.c ****     pFunction jump_to_application;
 1001              		.loc 1 634 5 view .LVU277
 635:Core/Src/bootloader.c ****     uint32_t jump_address;
 1002              		.loc 1 635 5 view .LVU278
 636:Core/Src/bootloader.c ****     uint32_t app_stack_pointer;
 1003              		.loc 1 636 5 view .LVU279
 637:Core/Src/bootloader.c ****     uint8_t jump_info[8];
 1004              		.loc 1 637 5 view .LVU280
 638:Core/Src/bootloader.c ****     
 1005              		.loc 1 638 5 view .LVU281
 641:Core/Src/bootloader.c ****     {
 1006              		.loc 1 641 5 view .LVU282
 641:Core/Src/bootloader.c ****     {
 1007              		.loc 1 641 10 is_stmt 0 view .LVU283
 1008 0004 FFF7FEFF 		bl	Bootloader_CheckValidApplication
 1009              	.LVL74:
 641:Core/Src/bootloader.c ****     {
 1010              		.loc 1 641 8 discriminator 1 view .LVU284
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 39


 1011 0008 58B3     		cbz	r0, .L84
 647:Core/Src/bootloader.c ****     jump_address = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 1012              		.loc 1 647 5 is_stmt 1 view .LVU285
 647:Core/Src/bootloader.c ****     jump_address = *(__IO uint32_t *)(APPLICATION_ADDRESS + 4);
 1013              		.loc 1 647 23 is_stmt 0 view .LVU286
 1014 000a 174E     		ldr	r6, .L86
 1015 000c 3468     		ldr	r4, [r6]
 1016              	.LVL75:
 648:Core/Src/bootloader.c ****     
 1017              		.loc 1 648 5 is_stmt 1 view .LVU287
 648:Core/Src/bootloader.c ****     
 1018              		.loc 1 648 18 is_stmt 0 view .LVU288
 1019 000e 7568     		ldr	r5, [r6, #4]
 1020              	.LVL76:
 651:Core/Src/bootloader.c ****     jump_info[1] = (app_stack_pointer >> 24) & 0xFF;  /* Stack pointer MSB */
 1021              		.loc 1 651 5 is_stmt 1 view .LVU289
 651:Core/Src/bootloader.c ****     jump_info[1] = (app_stack_pointer >> 24) & 0xFF;  /* Stack pointer MSB */
 1022              		.loc 1 651 18 is_stmt 0 view .LVU290
 1023 0010 1620     		movs	r0, #22
 1024 0012 8DF80000 		strb	r0, [sp]
 652:Core/Src/bootloader.c ****     jump_info[2] = (app_stack_pointer >> 16) & 0xFF;
 1025              		.loc 1 652 5 is_stmt 1 view .LVU291
 652:Core/Src/bootloader.c ****     jump_info[2] = (app_stack_pointer >> 16) & 0xFF;
 1026              		.loc 1 652 39 is_stmt 0 view .LVU292
 1027 0016 230E     		lsrs	r3, r4, #24
 652:Core/Src/bootloader.c ****     jump_info[2] = (app_stack_pointer >> 16) & 0xFF;
 1028              		.loc 1 652 18 view .LVU293
 1029 0018 8DF80130 		strb	r3, [sp, #1]
 653:Core/Src/bootloader.c ****     jump_info[3] = (app_stack_pointer >> 8) & 0xFF;
 1030              		.loc 1 653 5 is_stmt 1 view .LVU294
 653:Core/Src/bootloader.c ****     jump_info[3] = (app_stack_pointer >> 8) & 0xFF;
 1031              		.loc 1 653 39 is_stmt 0 view .LVU295
 1032 001c 230C     		lsrs	r3, r4, #16
 653:Core/Src/bootloader.c ****     jump_info[3] = (app_stack_pointer >> 8) & 0xFF;
 1033              		.loc 1 653 18 view .LVU296
 1034 001e 8DF80230 		strb	r3, [sp, #2]
 654:Core/Src/bootloader.c ****     jump_info[4] = app_stack_pointer & 0xFF;          /* Stack pointer LSB */
 1035              		.loc 1 654 5 is_stmt 1 view .LVU297
 654:Core/Src/bootloader.c ****     jump_info[4] = app_stack_pointer & 0xFF;          /* Stack pointer LSB */
 1036              		.loc 1 654 39 is_stmt 0 view .LVU298
 1037 0022 230A     		lsrs	r3, r4, #8
 654:Core/Src/bootloader.c ****     jump_info[4] = app_stack_pointer & 0xFF;          /* Stack pointer LSB */
 1038              		.loc 1 654 18 view .LVU299
 1039 0024 8DF80330 		strb	r3, [sp, #3]
 655:Core/Src/bootloader.c ****     jump_info[5] = (jump_address >> 16) & 0xFF;       /* Reset vector high word */
 1040              		.loc 1 655 5 is_stmt 1 view .LVU300
 655:Core/Src/bootloader.c ****     jump_info[5] = (jump_address >> 16) & 0xFF;       /* Reset vector high word */
 1041              		.loc 1 655 18 is_stmt 0 view .LVU301
 1042 0028 8DF80440 		strb	r4, [sp, #4]
 656:Core/Src/bootloader.c ****     jump_info[6] = (jump_address >> 8) & 0xFF;
 1043              		.loc 1 656 5 is_stmt 1 view .LVU302
 656:Core/Src/bootloader.c ****     jump_info[6] = (jump_address >> 8) & 0xFF;
 1044              		.loc 1 656 34 is_stmt 0 view .LVU303
 1045 002c 2B0C     		lsrs	r3, r5, #16
 656:Core/Src/bootloader.c ****     jump_info[6] = (jump_address >> 8) & 0xFF;
 1046              		.loc 1 656 18 view .LVU304
 1047 002e 8DF80530 		strb	r3, [sp, #5]
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 40


 657:Core/Src/bootloader.c ****     jump_info[7] = jump_address & 0xFF;               /* Reset vector LSB */
 1048              		.loc 1 657 5 is_stmt 1 view .LVU305
 657:Core/Src/bootloader.c ****     jump_info[7] = jump_address & 0xFF;               /* Reset vector LSB */
 1049              		.loc 1 657 34 is_stmt 0 view .LVU306
 1050 0032 2B0A     		lsrs	r3, r5, #8
 657:Core/Src/bootloader.c ****     jump_info[7] = jump_address & 0xFF;               /* Reset vector LSB */
 1051              		.loc 1 657 18 view .LVU307
 1052 0034 8DF80630 		strb	r3, [sp, #6]
 658:Core/Src/bootloader.c ****     
 1053              		.loc 1 658 5 is_stmt 1 view .LVU308
 658:Core/Src/bootloader.c ****     
 1054              		.loc 1 658 18 is_stmt 0 view .LVU309
 1055 0038 8DF80750 		strb	r5, [sp, #7]
 660:Core/Src/bootloader.c ****     
 1056              		.loc 1 660 5 is_stmt 1 view .LVU310
 1057 003c 0822     		movs	r2, #8
 1058 003e 6946     		mov	r1, sp
 1059 0040 FFF7FEFF 		bl	Bootloader_SendCANMessage
 1060              	.LVL77:
 663:Core/Src/bootloader.c ****     
 1061              		.loc 1 663 5 view .LVU311
 1062 0044 FFF7FEFF 		bl	Bootloader_WaitForCANTransmission
 1063              	.LVL78:
 665:Core/Src/bootloader.c ****     
 1064              		.loc 1 665 5 view .LVU312
 665:Core/Src/bootloader.c ****     
 1065              		.loc 1 665 29 is_stmt 0 view .LVU313
 1066 0048 084B     		ldr	r3, .L86+4
 1067 004a 0522     		movs	r2, #5
 1068 004c 1A70     		strb	r2, [r3]
 668:Core/Src/bootloader.c ****     
 1069              		.loc 1 668 5 is_stmt 1 view .LVU314
 1070 004e FFF7FEFF 		bl	Bootloader_DeInit
 1071              	.LVL79:
 671:Core/Src/bootloader.c ****     
 1072              		.loc 1 671 5 view .LVU315
 1073              	.LBB8:
 1074              	.LBI8:
 210:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 211:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 212:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 213:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 214:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Control Register
 215:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the Control Register.
 216:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Control Register value
 217:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 218:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_CONTROL(void)
 219:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 220:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 221:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 222:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control" : "=r" (result) );
 223:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 224:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 225:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 226:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 227:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 228:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 41


 229:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Control Register (non-secure)
 230:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the non-secure Control Register when in secure mode.
 231:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               non-secure Control Register value
 232:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 233:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_CONTROL_NS(void)
 234:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 235:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 236:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 237:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control_ns" : "=r" (result) );
 238:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 239:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 240:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 241:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 242:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 243:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 244:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Control Register
 245:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Writes the given value to the Control Register.
 246:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 247:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 248:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_CONTROL(uint32_t control)
 249:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 250:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control, %0" : : "r" (control) : "memory");
 251:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 252:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 253:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 254:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 255:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 256:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Control Register (non-secure)
 257:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Writes the given value to the non-secure Control Register when in secure state.
 258:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 259:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 260:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_CONTROL_NS(uint32_t control)
 261:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 262:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control_ns, %0" : : "r" (control) : "memory");
 263:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 264:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 265:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 266:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 267:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 268:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get IPSR Register
 269:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the IPSR Register.
 270:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               IPSR Register value
 271:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 272:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_IPSR(void)
 273:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 274:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 275:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 276:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, ipsr" : "=r" (result) );
 277:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 278:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 279:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 280:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 281:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 282:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get APSR Register
 283:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the APSR Register.
 284:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               APSR Register value
 285:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 42


 286:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_APSR(void)
 287:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 288:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 289:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 290:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, apsr" : "=r" (result) );
 291:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 292:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 293:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 294:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 295:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 296:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get xPSR Register
 297:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the content of the xPSR Register.
 298:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               xPSR Register value
 299:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 300:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_xPSR(void)
 301:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 302:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 303:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 304:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, xpsr" : "=r" (result) );
 305:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 306:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 307:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 308:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 309:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 310:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer
 311:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the current value of the Process Stack Pointer (PSP).
 312:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               PSP Register value
 313:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 314:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_PSP(void)
 315:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 316:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 317:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 318:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp"  : "=r" (result) );
 319:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 320:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 321:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 322:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 323:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 324:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 325:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer (non-secure)
 326:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Process Stack Pointer (PSP) when in secure s
 327:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               PSP Register value
 328:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 329:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_PSP_NS(void)
 330:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 331:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 332:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 333:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp_ns"  : "=r" (result) );
 334:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 335:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 336:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 337:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 338:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 339:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 340:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer
 341:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Assigns the given value to the Process Stack Pointer (PSP).
 342:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 43


 343:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 344:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_PSP(uint32_t topOfProcStack)
 345:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 346:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp, %0" : : "r" (topOfProcStack) : );
 347:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 348:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 349:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 350:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 351:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 352:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer (non-secure)
 353:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Process Stack Pointer (PSP) when in secure sta
 354:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
 355:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 356:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_PSP_NS(uint32_t topOfProcStack)
 357:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 358:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp_ns, %0" : : "r" (topOfProcStack) : );
 359:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 360:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 361:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 362:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 363:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 364:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer
 365:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the current value of the Main Stack Pointer (MSP).
 366:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               MSP Register value
 367:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 368:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_MSP(void)
 369:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 370:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 371:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 372:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp" : "=r" (result) );
 373:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 374:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 375:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 376:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 377:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 378:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 379:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer (non-secure)
 380:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Main Stack Pointer (MSP) when in secure stat
 381:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               MSP Register value
 382:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 383:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_MSP_NS(void)
 384:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 385:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 386:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 387:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp_ns" : "=r" (result) );
 388:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 389:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 390:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 391:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 392:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 393:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 394:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Set Main Stack Pointer
 395:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Assigns the given value to the Main Stack Pointer (MSP).
 396:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    topOfMainStack  Main Stack Pointer value to set
 397:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 398:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_MSP(uint32_t topOfMainStack)
 1075              		.loc 2 398 27 view .LVU316
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 44


 1076              	.LBB9:
 399:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 400:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("MSR msp, %0" : : "r" (topOfMainStack) : );
 1077              		.loc 2 400 3 view .LVU317
 1078              		.syntax unified
 1079              	@ 400 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1080 0052 84F30888 		MSR msp, r4
 1081              	@ 0 "" 2
 1082              	.LVL80:
 1083              		.loc 2 400 3 is_stmt 0 view .LVU318
 1084              		.thumb
 1085              		.syntax unified
 1086              	.LBE9:
 1087              	.LBE8:
 674:Core/Src/bootloader.c ****     
 1088              		.loc 1 674 5 is_stmt 1 view .LVU319
 677:Core/Src/bootloader.c ****     
 1089              		.loc 1 677 5 view .LVU320
 677:Core/Src/bootloader.c ****     
 1090              		.loc 1 677 15 is_stmt 0 view .LVU321
 1091 0056 064B     		ldr	r3, .L86+8
 1092 0058 9E60     		str	r6, [r3, #8]
 680:Core/Src/bootloader.c ****     
 1093              		.loc 1 680 5 is_stmt 1 view .LVU322
 1094 005a A847     		blx	r5
 1095              	.LVL81:
 683:Core/Src/bootloader.c **** }
 1096              		.loc 1 683 5 view .LVU323
 683:Core/Src/bootloader.c **** }
 1097              		.loc 1 683 12 is_stmt 0 view .LVU324
 1098 005c 0020     		movs	r0, #0
 1099              	.LVL82:
 1100              	.L83:
 684:Core/Src/bootloader.c **** 
 1101              		.loc 1 684 1 view .LVU325
 1102 005e 02B0     		add	sp, sp, #8
 1103              		.cfi_remember_state
 1104              		.cfi_def_cfa_offset 16
 1105              		@ sp needed
 1106 0060 70BD     		pop	{r4, r5, r6, pc}
 1107              	.L84:
 1108              		.cfi_restore_state
 643:Core/Src/bootloader.c ****     }
 1109              		.loc 1 643 16 view .LVU326
 1110 0062 0620     		movs	r0, #6
 1111 0064 FBE7     		b	.L83
 1112              	.L87:
 1113 0066 00BF     		.align	2
 1114              	.L86:
 1115 0068 00800008 		.word	134250496
 1116 006c 00000000 		.word	bootloader_status
 1117 0070 00ED00E0 		.word	-536810240
 1118              		.cfi_endproc
 1119              	.LFE142:
 1121              		.section	.text.Bootloader_SetApplicationValidFlag,"ax",%progbits
 1122              		.align	1
 1123              		.global	Bootloader_SetApplicationValidFlag
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 45


 1124              		.syntax unified
 1125              		.thumb
 1126              		.thumb_func
 1128              	Bootloader_SetApplicationValidFlag:
 1129              	.LFB146:
 734:Core/Src/bootloader.c **** 
 735:Core/Src/bootloader.c **** /**
 736:Core/Src/bootloader.c ****   * @brief  Set application valid flag in flash
 737:Core/Src/bootloader.c ****   * @retval ERR_NONE if successful, error code otherwise
 738:Core/Src/bootloader.c ****   */
 739:Core/Src/bootloader.c **** uint8_t Bootloader_SetApplicationValidFlag(void)
 740:Core/Src/bootloader.c **** {
 1130              		.loc 1 740 1 is_stmt 1 view -0
 1131              		.cfi_startproc
 1132              		@ args = 0, pretend = 0, frame = 32
 1133              		@ frame_needed = 0, uses_anonymous_args = 0
 1134 0000 10B5     		push	{r4, lr}
 1135              		.cfi_def_cfa_offset 8
 1136              		.cfi_offset 4, -8
 1137              		.cfi_offset 14, -4
 1138 0002 88B0     		sub	sp, sp, #32
 1139              		.cfi_def_cfa_offset 40
 741:Core/Src/bootloader.c ****     HAL_StatusTypeDef status;
 1140              		.loc 1 741 5 view .LVU328
 742:Core/Src/bootloader.c ****     uint32_t magic_data[2];
 1141              		.loc 1 742 5 view .LVU329
 743:Core/Src/bootloader.c ****     uint64_t data_to_write;
 1142              		.loc 1 743 5 view .LVU330
 744:Core/Src/bootloader.c ****     
 745:Core/Src/bootloader.c ****     magic_data[0] = APP_VALID_MAGIC_NUMBER;
 1143              		.loc 1 745 5 view .LVU331
 1144              		.loc 1 745 19 is_stmt 0 view .LVU332
 1145 0004 164B     		ldr	r3, .L95+8
 1146 0006 0693     		str	r3, [sp, #24]
 746:Core/Src/bootloader.c ****     magic_data[1] = APP_VALID_FLAG_COMPLEMENT;
 1147              		.loc 1 746 5 is_stmt 1 view .LVU333
 1148              		.loc 1 746 19 is_stmt 0 view .LVU334
 1149 0008 164B     		ldr	r3, .L95+12
 1150 000a 0793     		str	r3, [sp, #28]
 747:Core/Src/bootloader.c ****     
 748:Core/Src/bootloader.c ****     /* Unlock flash */
 749:Core/Src/bootloader.c ****     HAL_FLASH_Unlock();
 1151              		.loc 1 749 5 is_stmt 1 view .LVU335
 1152 000c FFF7FEFF 		bl	HAL_FLASH_Unlock
 1153              	.LVL83:
 750:Core/Src/bootloader.c ****     
 751:Core/Src/bootloader.c ****     /* Erase the page containing the flag (Page 63 - last page before application) */
 752:Core/Src/bootloader.c ****     FLASH_EraseInitTypeDef erase_init;
 1154              		.loc 1 752 5 view .LVU336
 753:Core/Src/bootloader.c ****     uint32_t page_error;
 1155              		.loc 1 753 5 view .LVU337
 754:Core/Src/bootloader.c ****     
 755:Core/Src/bootloader.c ****     erase_init.TypeErase = FLASH_TYPEERASE_PAGES;
 1156              		.loc 1 755 5 view .LVU338
 1157              		.loc 1 755 26 is_stmt 0 view .LVU339
 1158 0010 0023     		movs	r3, #0
 1159 0012 0293     		str	r3, [sp, #8]
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 46


 756:Core/Src/bootloader.c ****     erase_init.Page = 63;  /* Last page of bootloader area (32KB / 2KB per page = page 0-15, but fl
 1160              		.loc 1 756 5 is_stmt 1 view .LVU340
 1161              		.loc 1 756 21 is_stmt 0 view .LVU341
 1162 0014 3F23     		movs	r3, #63
 1163 0016 0493     		str	r3, [sp, #16]
 757:Core/Src/bootloader.c ****     erase_init.NbPages = 1;
 1164              		.loc 1 757 5 is_stmt 1 view .LVU342
 1165              		.loc 1 757 24 is_stmt 0 view .LVU343
 1166 0018 0123     		movs	r3, #1
 1167 001a 0593     		str	r3, [sp, #20]
 758:Core/Src/bootloader.c ****     
 759:Core/Src/bootloader.c ****     status = HAL_FLASHEx_Erase(&erase_init, &page_error);
 1168              		.loc 1 759 5 is_stmt 1 view .LVU344
 1169              		.loc 1 759 14 is_stmt 0 view .LVU345
 1170 001c 01A9     		add	r1, sp, #4
 1171 001e 02A8     		add	r0, sp, #8
 1172 0020 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 1173              	.LVL84:
 760:Core/Src/bootloader.c ****     if (status != HAL_OK)
 1174              		.loc 1 760 5 is_stmt 1 view .LVU346
 1175              		.loc 1 760 8 is_stmt 0 view .LVU347
 1176 0024 68B9     		cbnz	r0, .L93
 761:Core/Src/bootloader.c ****     {
 762:Core/Src/bootloader.c ****         HAL_FLASH_Lock();
 763:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
 764:Core/Src/bootloader.c ****     }
 765:Core/Src/bootloader.c ****     
 766:Core/Src/bootloader.c ****     /* Write magic number (first 4 bytes) */
 767:Core/Src/bootloader.c ****     status = HAL_FLASH_Program(FLASH_TYPEPROGRAM_DOUBLEWORD, APP_VALID_FLAG_ADDRESS, 
 1177              		.loc 1 767 5 is_stmt 1 view .LVU348
 1178              		.loc 1 767 14 is_stmt 0 view .LVU349
 1179 0026 0CA3     		adr	r3, .L95
 1180 0028 D3E90023 		ldrd	r2, [r3]
 1181 002c 0E49     		ldr	r1, .L95+16
 1182 002e 0020     		movs	r0, #0
 1183              	.LVL85:
 1184              		.loc 1 767 14 view .LVU350
 1185 0030 FFF7FEFF 		bl	HAL_FLASH_Program
 1186              	.LVL86:
 768:Core/Src/bootloader.c ****                                 *((uint64_t*)magic_data));
 769:Core/Src/bootloader.c ****     
 770:Core/Src/bootloader.c ****     if (status != HAL_OK)
 1187              		.loc 1 770 5 is_stmt 1 view .LVU351
 1188              		.loc 1 770 8 is_stmt 0 view .LVU352
 1189 0034 0446     		mov	r4, r0
 1190 0036 40B9     		cbnz	r0, .L94
 771:Core/Src/bootloader.c ****     {
 772:Core/Src/bootloader.c ****         HAL_FLASH_Lock();
 773:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 774:Core/Src/bootloader.c ****     }
 775:Core/Src/bootloader.c ****     
 776:Core/Src/bootloader.c ****     /* Lock flash */
 777:Core/Src/bootloader.c ****     HAL_FLASH_Lock();
 1191              		.loc 1 777 5 is_stmt 1 view .LVU353
 1192 0038 FFF7FEFF 		bl	HAL_FLASH_Lock
 1193              	.LVL87:
 778:Core/Src/bootloader.c ****     
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 47


 779:Core/Src/bootloader.c ****     return ERR_NONE;
 1194              		.loc 1 779 5 view .LVU354
 1195              	.L90:
 780:Core/Src/bootloader.c **** }
 1196              		.loc 1 780 1 is_stmt 0 view .LVU355
 1197 003c 2046     		mov	r0, r4
 1198 003e 08B0     		add	sp, sp, #32
 1199              		.cfi_remember_state
 1200              		.cfi_def_cfa_offset 8
 1201              		@ sp needed
 1202 0040 10BD     		pop	{r4, pc}
 1203              	.LVL88:
 1204              	.L93:
 1205              		.cfi_restore_state
 762:Core/Src/bootloader.c ****         return ERR_FLASH_ERASE_FAILED;
 1206              		.loc 1 762 9 is_stmt 1 view .LVU356
 1207 0042 FFF7FEFF 		bl	HAL_FLASH_Lock
 1208              	.LVL89:
 763:Core/Src/bootloader.c ****     }
 1209              		.loc 1 763 9 view .LVU357
 763:Core/Src/bootloader.c ****     }
 1210              		.loc 1 763 16 is_stmt 0 view .LVU358
 1211 0046 0324     		movs	r4, #3
 1212 0048 F8E7     		b	.L90
 1213              	.LVL90:
 1214              	.L94:
 772:Core/Src/bootloader.c ****         return ERR_FLASH_WRITE_FAILED;
 1215              		.loc 1 772 9 is_stmt 1 view .LVU359
 1216 004a FFF7FEFF 		bl	HAL_FLASH_Lock
 1217              	.LVL91:
 773:Core/Src/bootloader.c ****     }
 1218              		.loc 1 773 9 view .LVU360
 773:Core/Src/bootloader.c ****     }
 1219              		.loc 1 773 16 is_stmt 0 view .LVU361
 1220 004e 0424     		movs	r4, #4
 1221              	.LVL92:
 773:Core/Src/bootloader.c ****     }
 1222              		.loc 1 773 16 view .LVU362
 1223 0050 F4E7     		b	.L90
 1224              	.L96:
 1225 0052 00BFAFF3 		.align	3
 1225      0080
 1226              	.L95:
 1227 0058 EFBEADDE 		.word	-559038737
 1228 005c 10415221 		.word	559038736
 1229 0060 EFBEADDE 		.word	-559038737
 1230 0064 10415221 		.word	559038736
 1231 0068 F87F0008 		.word	134250488
 1232              		.cfi_endproc
 1233              	.LFE146:
 1235              		.section	.text.Bootloader_CheckApplicationValidFlag,"ax",%progbits
 1236              		.align	1
 1237              		.global	Bootloader_CheckApplicationValidFlag
 1238              		.syntax unified
 1239              		.thumb
 1240              		.thumb_func
 1242              	Bootloader_CheckApplicationValidFlag:
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 48


 1243              	.LFB147:
 781:Core/Src/bootloader.c **** 
 782:Core/Src/bootloader.c **** /**
 783:Core/Src/bootloader.c ****   * @brief  Check if application valid flag is set
 784:Core/Src/bootloader.c ****   * @retval 1 if valid, 0 if not valid
 785:Core/Src/bootloader.c ****   */
 786:Core/Src/bootloader.c **** uint8_t Bootloader_CheckApplicationValidFlag(void)
 787:Core/Src/bootloader.c **** {
 1244              		.loc 1 787 1 is_stmt 1 view -0
 1245              		.cfi_startproc
 1246              		@ args = 0, pretend = 0, frame = 0
 1247              		@ frame_needed = 0, uses_anonymous_args = 0
 1248              		@ link register save eliminated.
 788:Core/Src/bootloader.c ****     uint32_t *flag_ptr = (uint32_t *)APP_VALID_FLAG_ADDRESS;
 1249              		.loc 1 788 5 view .LVU364
 1250              	.LVL93:
 789:Core/Src/bootloader.c ****     
 790:Core/Src/bootloader.c ****     /* Check if both magic number and complement are present */
 791:Core/Src/bootloader.c ****     if (flag_ptr[0] == APP_VALID_MAGIC_NUMBER && 
 1251              		.loc 1 791 5 view .LVU365
 1252              		.loc 1 791 17 is_stmt 0 view .LVU366
 1253 0000 084B     		ldr	r3, .L102
 1254 0002 D3F8F82F 		ldr	r2, [r3, #4088]
 1255              		.loc 1 791 8 view .LVU367
 1256 0006 084B     		ldr	r3, .L102+4
 1257 0008 9A42     		cmp	r2, r3
 1258 000a 01D0     		beq	.L101
 792:Core/Src/bootloader.c ****         flag_ptr[1] == APP_VALID_FLAG_COMPLEMENT)
 793:Core/Src/bootloader.c ****     {
 794:Core/Src/bootloader.c ****         return 1;  /* Valid flag found */
 795:Core/Src/bootloader.c ****     }
 796:Core/Src/bootloader.c ****     
 797:Core/Src/bootloader.c ****     return 0;  /* No valid flag */
 1259              		.loc 1 797 12 view .LVU368
 1260 000c 0020     		movs	r0, #0
 1261 000e 7047     		bx	lr
 1262              	.L101:
 792:Core/Src/bootloader.c ****         flag_ptr[1] == APP_VALID_FLAG_COMPLEMENT)
 1263              		.loc 1 792 17 view .LVU369
 1264 0010 044B     		ldr	r3, .L102
 1265 0012 D3F8FC2F 		ldr	r2, [r3, #4092]
 791:Core/Src/bootloader.c ****         flag_ptr[1] == APP_VALID_FLAG_COMPLEMENT)
 1266              		.loc 1 791 47 discriminator 1 view .LVU370
 1267 0016 054B     		ldr	r3, .L102+8
 1268 0018 9A42     		cmp	r2, r3
 1269 001a 01D0     		beq	.L100
 1270              		.loc 1 797 12 view .LVU371
 1271 001c 0020     		movs	r0, #0
 1272 001e 7047     		bx	lr
 1273              	.L100:
 794:Core/Src/bootloader.c ****     }
 1274              		.loc 1 794 16 view .LVU372
 1275 0020 0120     		movs	r0, #1
 798:Core/Src/bootloader.c **** }
 1276              		.loc 1 798 1 view .LVU373
 1277 0022 7047     		bx	lr
 1278              	.L103:
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 49


 1279              		.align	2
 1280              	.L102:
 1281 0024 00700008 		.word	134246400
 1282 0028 EFBEADDE 		.word	-559038737
 1283 002c 10415221 		.word	559038736
 1284              		.cfi_endproc
 1285              	.LFE147:
 1287              		.section	.text.Bootloader_Main,"ax",%progbits
 1288              		.align	1
 1289              		.global	Bootloader_Main
 1290              		.syntax unified
 1291              		.thumb
 1292              		.thumb_func
 1294              	Bootloader_Main:
 1295              	.LFB134:
 113:Core/Src/bootloader.c ****     uint32_t timeout_start = HAL_GetTick();
 1296              		.loc 1 113 1 is_stmt 1 view -0
 1297              		.cfi_startproc
 1298              		@ args = 0, pretend = 0, frame = 0
 1299              		@ frame_needed = 0, uses_anonymous_args = 0
 1300 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1301              		.cfi_def_cfa_offset 24
 1302              		.cfi_offset 3, -24
 1303              		.cfi_offset 4, -20
 1304              		.cfi_offset 5, -16
 1305              		.cfi_offset 6, -12
 1306              		.cfi_offset 7, -8
 1307              		.cfi_offset 14, -4
 114:Core/Src/bootloader.c ****     uint32_t last_heartbeat = HAL_GetTick();
 1308              		.loc 1 114 5 view .LVU375
 114:Core/Src/bootloader.c ****     uint32_t last_heartbeat = HAL_GetTick();
 1309              		.loc 1 114 30 is_stmt 0 view .LVU376
 1310 0002 FFF7FEFF 		bl	HAL_GetTick
 1311              	.LVL94:
 1312 0006 0646     		mov	r6, r0
 1313              	.LVL95:
 115:Core/Src/bootloader.c ****     uint32_t last_led_toggle = HAL_GetTick();
 1314              		.loc 1 115 5 is_stmt 1 view .LVU377
 115:Core/Src/bootloader.c ****     uint32_t last_led_toggle = HAL_GetTick();
 1315              		.loc 1 115 31 is_stmt 0 view .LVU378
 1316 0008 FFF7FEFF 		bl	HAL_GetTick
 1317              	.LVL96:
 115:Core/Src/bootloader.c ****     uint32_t last_led_toggle = HAL_GetTick();
 1318              		.loc 1 115 31 view .LVU379
 1319 000c 0546     		mov	r5, r0
 1320              	.LVL97:
 116:Core/Src/bootloader.c ****     uint8_t timeout_expired = 0;
 1321              		.loc 1 116 5 is_stmt 1 view .LVU380
 116:Core/Src/bootloader.c ****     uint8_t timeout_expired = 0;
 1322              		.loc 1 116 32 is_stmt 0 view .LVU381
 1323 000e FFF7FEFF 		bl	HAL_GetTick
 1324              	.LVL98:
 116:Core/Src/bootloader.c ****     uint8_t timeout_expired = 0;
 1325              		.loc 1 116 32 view .LVU382
 1326 0012 0446     		mov	r4, r0
 1327              	.LVL99:
 117:Core/Src/bootloader.c ****     
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 50


 1328              		.loc 1 117 5 is_stmt 1 view .LVU383
 120:Core/Src/bootloader.c ****     
 1329              		.loc 1 120 5 view .LVU384
 120:Core/Src/bootloader.c ****     
 1330              		.loc 1 120 25 is_stmt 0 view .LVU385
 1331 0014 374B     		ldr	r3, .L115
 1332 0016 1D60     		str	r5, [r3]
 123:Core/Src/bootloader.c ****     tx_data[1] = 0x01;  /* Bootloader version */
 1333              		.loc 1 123 5 is_stmt 1 view .LVU386
 123:Core/Src/bootloader.c ****     tx_data[1] = 0x01;  /* Bootloader version */
 1334              		.loc 1 123 16 is_stmt 0 view .LVU387
 1335 0018 3749     		ldr	r1, .L115+4
 1336 001a 1420     		movs	r0, #20
 1337              	.LVL100:
 123:Core/Src/bootloader.c ****     tx_data[1] = 0x01;  /* Bootloader version */
 1338              		.loc 1 123 16 view .LVU388
 1339 001c 0870     		strb	r0, [r1]
 124:Core/Src/bootloader.c ****     tx_data[2] = 0x00;  /* Bootloader subversion */
 1340              		.loc 1 124 5 is_stmt 1 view .LVU389
 124:Core/Src/bootloader.c ****     tx_data[2] = 0x00;  /* Bootloader subversion */
 1341              		.loc 1 124 16 is_stmt 0 view .LVU390
 1342 001e 0123     		movs	r3, #1
 1343 0020 4B70     		strb	r3, [r1, #1]
 125:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1344              		.loc 1 125 5 is_stmt 1 view .LVU391
 125:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1345              		.loc 1 125 16 is_stmt 0 view .LVU392
 1346 0022 0025     		movs	r5, #0
 1347              	.LVL101:
 125:Core/Src/bootloader.c ****     Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1348              		.loc 1 125 16 view .LVU393
 1349 0024 8D70     		strb	r5, [r1, #2]
 126:Core/Src/bootloader.c ****     
 1350              		.loc 1 126 5 is_stmt 1 view .LVU394
 1351 0026 0322     		movs	r2, #3
 1352 0028 FFF7FEFF 		bl	Bootloader_SendCANMessage
 1353              	.LVL102:
 126:Core/Src/bootloader.c ****     
 1354              		.loc 1 126 5 is_stmt 0 view .LVU395
 1355 002c 44E0     		b	.L109
 1356              	.LVL103:
 1357              	.L112:
 134:Core/Src/bootloader.c ****             last_led_toggle = HAL_GetTick();
 1358              		.loc 1 134 13 is_stmt 1 view .LVU396
 1359 002e 0821     		movs	r1, #8
 1360 0030 3248     		ldr	r0, .L115+8
 1361 0032 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 1362              	.LVL104:
 135:Core/Src/bootloader.c ****         }
 1363              		.loc 1 135 13 view .LVU397
 135:Core/Src/bootloader.c ****         }
 1364              		.loc 1 135 31 is_stmt 0 view .LVU398
 1365 0036 FFF7FEFF 		bl	HAL_GetTick
 1366              	.LVL105:
 1367 003a 0446     		mov	r4, r0
 1368              	.LVL106:
 135:Core/Src/bootloader.c ****         }
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 51


 1369              		.loc 1 135 31 view .LVU399
 1370 003c 41E0     		b	.L105
 1371              	.LVL107:
 1372              	.L113:
 143:Core/Src/bootloader.c ****         {
 1373              		.loc 1 143 14 view .LVU400
 1374 003e FFF7FEFF 		bl	HAL_GetTick
 1375              	.LVL108:
 143:Core/Src/bootloader.c ****         {
 1376              		.loc 1 143 28 discriminator 1 view .LVU401
 1377 0042 C01B     		subs	r0, r0, r7
 142:Core/Src/bootloader.c ****             (HAL_GetTick() - last_heartbeat) >= HEARTBEAT_INTERVAL_MS)
 1378              		.loc 1 142 54 discriminator 1 view .LVU402
 1379 0044 B0F57A7F 		cmp	r0, #1000
 1380 0048 41D3     		bcc	.L106
 146:Core/Src/bootloader.c ****             tx_data[1] = 0x01;  /* Bootloader version */
 1381              		.loc 1 146 13 is_stmt 1 view .LVU403
 146:Core/Src/bootloader.c ****             tx_data[1] = 0x01;  /* Bootloader version */
 1382              		.loc 1 146 24 is_stmt 0 view .LVU404
 1383 004a 2B49     		ldr	r1, .L115+4
 1384 004c 1420     		movs	r0, #20
 1385 004e 0870     		strb	r0, [r1]
 147:Core/Src/bootloader.c ****             tx_data[2] = 0x00;  /* Bootloader subversion */
 1386              		.loc 1 147 13 is_stmt 1 view .LVU405
 147:Core/Src/bootloader.c ****             tx_data[2] = 0x00;  /* Bootloader subversion */
 1387              		.loc 1 147 24 is_stmt 0 view .LVU406
 1388 0050 0123     		movs	r3, #1
 1389 0052 4B70     		strb	r3, [r1, #1]
 148:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1390              		.loc 1 148 13 is_stmt 1 view .LVU407
 148:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1391              		.loc 1 148 24 is_stmt 0 view .LVU408
 1392 0054 0023     		movs	r3, #0
 1393 0056 8B70     		strb	r3, [r1, #2]
 149:Core/Src/bootloader.c ****             last_heartbeat = HAL_GetTick();
 1394              		.loc 1 149 13 is_stmt 1 view .LVU409
 1395 0058 0322     		movs	r2, #3
 1396 005a FFF7FEFF 		bl	Bootloader_SendCANMessage
 1397              	.LVL109:
 150:Core/Src/bootloader.c ****             last_heartbeat_time = last_heartbeat;  /* Update static variable */
 1398              		.loc 1 150 13 view .LVU410
 150:Core/Src/bootloader.c ****             last_heartbeat_time = last_heartbeat;  /* Update static variable */
 1399              		.loc 1 150 30 is_stmt 0 view .LVU411
 1400 005e FFF7FEFF 		bl	HAL_GetTick
 1401              	.LVL110:
 151:Core/Src/bootloader.c ****         }
 1402              		.loc 1 151 13 is_stmt 1 view .LVU412
 151:Core/Src/bootloader.c ****         }
 1403              		.loc 1 151 33 is_stmt 0 view .LVU413
 1404 0062 244B     		ldr	r3, .L115
 1405 0064 1860     		str	r0, [r3]
 1406 0066 32E0     		b	.L106
 1407              	.LVL111:
 1408              	.L114:
 165:Core/Src/bootloader.c ****                 tx_data[1] = 0xAA;  /* Special: Timeout auto-jump */
 1409              		.loc 1 165 17 is_stmt 1 view .LVU414
 165:Core/Src/bootloader.c ****                 tx_data[1] = 0xAA;  /* Special: Timeout auto-jump */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 52


 1410              		.loc 1 165 28 is_stmt 0 view .LVU415
 1411 0068 2349     		ldr	r1, .L115+4
 1412 006a 1420     		movs	r0, #20
 1413 006c 0870     		strb	r0, [r1]
 166:Core/Src/bootloader.c ****                 tx_data[2] = 0x55;
 1414              		.loc 1 166 17 is_stmt 1 view .LVU416
 166:Core/Src/bootloader.c ****                 tx_data[2] = 0x55;
 1415              		.loc 1 166 28 is_stmt 0 view .LVU417
 1416 006e AA23     		movs	r3, #170
 1417 0070 4B70     		strb	r3, [r1, #1]
 167:Core/Src/bootloader.c ****                 Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1418              		.loc 1 167 17 is_stmt 1 view .LVU418
 167:Core/Src/bootloader.c ****                 Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1419              		.loc 1 167 28 is_stmt 0 view .LVU419
 1420 0072 5523     		movs	r3, #85
 1421 0074 8B70     		strb	r3, [r1, #2]
 168:Core/Src/bootloader.c **** 
 1422              		.loc 1 168 17 is_stmt 1 view .LVU420
 1423 0076 0322     		movs	r2, #3
 1424 0078 FFF7FEFF 		bl	Bootloader_SendCANMessage
 1425              	.LVL112:
 171:Core/Src/bootloader.c ****                 HAL_Delay(10);
 1426              		.loc 1 171 17 view .LVU421
 1427 007c FFF7FEFF 		bl	Bootloader_WaitForCANTransmission
 1428              	.LVL113:
 172:Core/Src/bootloader.c **** 
 1429              		.loc 1 172 17 view .LVU422
 1430 0080 0A20     		movs	r0, #10
 1431 0082 FFF7FEFF 		bl	HAL_Delay
 1432              	.LVL114:
 175:Core/Src/bootloader.c ****             }
 1433              		.loc 1 175 17 view .LVU423
 1434 0086 FFF7FEFF 		bl	Bootloader_JumpToApplication
 1435              	.LVL115:
 159:Core/Src/bootloader.c **** 
 1436              		.loc 1 159 29 is_stmt 0 view .LVU424
 1437 008a 0125     		movs	r5, #1
 1438              	.LVL116:
 1439              	.L107:
 181:Core/Src/bootloader.c ****         {
 1440              		.loc 1 181 9 is_stmt 1 view .LVU425
 181:Core/Src/bootloader.c ****         {
 1441              		.loc 1 181 13 is_stmt 0 view .LVU426
 1442 008c 1C4B     		ldr	r3, .L115+12
 1443 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 181:Core/Src/bootloader.c ****         {
 1444              		.loc 1 181 12 view .LVU427
 1445 0090 7BB1     		cbz	r3, .L108
 184:Core/Src/bootloader.c ****             tx_data[1] = 0xFF;  /* Special: About to jump */
 1446              		.loc 1 184 13 is_stmt 1 view .LVU428
 184:Core/Src/bootloader.c ****             tx_data[1] = 0xFF;  /* Special: About to jump */
 1447              		.loc 1 184 24 is_stmt 0 view .LVU429
 1448 0092 1949     		ldr	r1, .L115+4
 1449 0094 1420     		movs	r0, #20
 1450 0096 0870     		strb	r0, [r1]
 185:Core/Src/bootloader.c ****             tx_data[2] = 0xFF;
 1451              		.loc 1 185 13 is_stmt 1 view .LVU430
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 53


 185:Core/Src/bootloader.c ****             tx_data[2] = 0xFF;
 1452              		.loc 1 185 24 is_stmt 0 view .LVU431
 1453 0098 FF23     		movs	r3, #255
 1454 009a 4B70     		strb	r3, [r1, #1]
 186:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1455              		.loc 1 186 13 is_stmt 1 view .LVU432
 186:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_READY, tx_data, 3);
 1456              		.loc 1 186 24 is_stmt 0 view .LVU433
 1457 009c 8B70     		strb	r3, [r1, #2]
 187:Core/Src/bootloader.c ****             
 1458              		.loc 1 187 13 is_stmt 1 view .LVU434
 1459 009e 0322     		movs	r2, #3
 1460 00a0 FFF7FEFF 		bl	Bootloader_SendCANMessage
 1461              	.LVL117:
 190:Core/Src/bootloader.c ****             
 1462              		.loc 1 190 13 view .LVU435
 1463 00a4 FFF7FEFF 		bl	Bootloader_WaitForCANTransmission
 1464              	.LVL118:
 193:Core/Src/bootloader.c ****             
 1465              		.loc 1 193 13 view .LVU436
 1466 00a8 FFF7FEFF 		bl	Bootloader_JumpToApplication
 1467              	.LVL119:
 196:Core/Src/bootloader.c ****         }
 1468              		.loc 1 196 13 view .LVU437
 196:Core/Src/bootloader.c ****         }
 1469              		.loc 1 196 30 is_stmt 0 view .LVU438
 1470 00ac 144B     		ldr	r3, .L115+12
 1471 00ae 0022     		movs	r2, #0
 1472 00b0 1A70     		strb	r2, [r3]
 1473              	.L108:
 200:Core/Src/bootloader.c ****     }
 1474              		.loc 1 200 9 is_stmt 1 view .LVU439
 1475 00b2 0120     		movs	r0, #1
 1476 00b4 FFF7FEFF 		bl	HAL_Delay
 1477              	.LVL120:
 129:Core/Src/bootloader.c ****     {
 1478              		.loc 1 129 11 view .LVU440
 1479              	.L109:
 129:Core/Src/bootloader.c ****     {
 1480              		.loc 1 129 5 view .LVU441
 132:Core/Src/bootloader.c ****         {
 1481              		.loc 1 132 9 view .LVU442
 132:Core/Src/bootloader.c ****         {
 1482              		.loc 1 132 14 is_stmt 0 view .LVU443
 1483 00b8 FFF7FEFF 		bl	HAL_GetTick
 1484              	.LVL121:
 132:Core/Src/bootloader.c ****         {
 1485              		.loc 1 132 28 discriminator 1 view .LVU444
 1486 00bc 031B     		subs	r3, r0, r4
 132:Core/Src/bootloader.c ****         {
 1487              		.loc 1 132 12 discriminator 1 view .LVU445
 1488 00be 632B     		cmp	r3, #99
 1489 00c0 B5D8     		bhi	.L112
 1490              	.LVL122:
 1491              	.L105:
 139:Core/Src/bootloader.c ****         
 1492              		.loc 1 139 9 is_stmt 1 view .LVU446
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 54


 139:Core/Src/bootloader.c ****         
 1493              		.loc 1 139 24 is_stmt 0 view .LVU447
 1494 00c2 0C4B     		ldr	r3, .L115
 1495 00c4 1F68     		ldr	r7, [r3]
 1496              	.LVL123:
 142:Core/Src/bootloader.c ****             (HAL_GetTick() - last_heartbeat) >= HEARTBEAT_INTERVAL_MS)
 1497              		.loc 1 142 9 is_stmt 1 view .LVU448
 142:Core/Src/bootloader.c ****             (HAL_GetTick() - last_heartbeat) >= HEARTBEAT_INTERVAL_MS)
 1498              		.loc 1 142 30 is_stmt 0 view .LVU449
 1499 00c6 0F4B     		ldr	r3, .L115+16
 1500 00c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 142:Core/Src/bootloader.c ****             (HAL_GetTick() - last_heartbeat) >= HEARTBEAT_INTERVAL_MS)
 1501              		.loc 1 142 12 view .LVU450
 1502 00ca 002B     		cmp	r3, #0
 1503 00cc B7D0     		beq	.L113
 1504              	.LVL124:
 1505              	.L106:
 156:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 1506              		.loc 1 156 9 is_stmt 1 view .LVU451
 156:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 1507              		.loc 1 156 12 is_stmt 0 view .LVU452
 1508 00ce 002D     		cmp	r5, #0
 1509 00d0 DCD1     		bne	.L107
 156:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 1510              		.loc 1 156 33 discriminator 1 view .LVU453
 1511 00d2 0D4B     		ldr	r3, .L115+20
 1512 00d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 156:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 1513              		.loc 1 156 30 discriminator 1 view .LVU454
 1514 00d6 002B     		cmp	r3, #0
 1515 00d8 D8D1     		bne	.L107
 157:Core/Src/bootloader.c ****         {
 1516              		.loc 1 157 14 view .LVU455
 1517 00da FFF7FEFF 		bl	HAL_GetTick
 1518              	.LVL125:
 157:Core/Src/bootloader.c ****         {
 1519              		.loc 1 157 28 discriminator 1 view .LVU456
 1520 00de 801B     		subs	r0, r0, r6
 156:Core/Src/bootloader.c ****             (HAL_GetTick() - timeout_start >= BOOTLOADER_TIMEOUT_MS))
 1521              		.loc 1 156 55 discriminator 2 view .LVU457
 1522 00e0 B0F57A7F 		cmp	r0, #1000
 1523 00e4 D2D3     		bcc	.L107
 159:Core/Src/bootloader.c **** 
 1524              		.loc 1 159 13 is_stmt 1 view .LVU458
 1525              	.LVL126:
 162:Core/Src/bootloader.c ****             {
 1526              		.loc 1 162 13 view .LVU459
 162:Core/Src/bootloader.c ****             {
 1527              		.loc 1 162 17 is_stmt 0 view .LVU460
 1528 00e6 FFF7FEFF 		bl	Bootloader_CheckApplicationValidFlag
 1529              	.LVL127:
 162:Core/Src/bootloader.c ****             {
 1530              		.loc 1 162 16 discriminator 1 view .LVU461
 1531 00ea 0028     		cmp	r0, #0
 1532 00ec BCD1     		bne	.L114
 159:Core/Src/bootloader.c **** 
 1533              		.loc 1 159 29 view .LVU462
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 55


 1534 00ee 0125     		movs	r5, #1
 1535 00f0 CCE7     		b	.L107
 1536              	.L116:
 1537 00f2 00BF     		.align	2
 1538              	.L115:
 1539 00f4 00000000 		.word	last_heartbeat_time
 1540 00f8 00000000 		.word	tx_data
 1541 00fc 00040048 		.word	1207960576
 1542 0100 00000000 		.word	jump_to_app_flag
 1543 0104 00000000 		.word	bootloader_status
 1544 0108 00000000 		.word	can_command_received
 1545              		.cfi_endproc
 1546              	.LFE134:
 1548              		.section	.text.Bootloader_ClearApplicationValidFlag,"ax",%progbits
 1549              		.align	1
 1550              		.global	Bootloader_ClearApplicationValidFlag
 1551              		.syntax unified
 1552              		.thumb
 1553              		.thumb_func
 1555              	Bootloader_ClearApplicationValidFlag:
 1556              	.LFB148:
 799:Core/Src/bootloader.c **** 
 800:Core/Src/bootloader.c **** /**
 801:Core/Src/bootloader.c ****   * @brief  Clear application valid flag
 802:Core/Src/bootloader.c ****   * @retval None
 803:Core/Src/bootloader.c ****   */
 804:Core/Src/bootloader.c **** void Bootloader_ClearApplicationValidFlag(void)
 805:Core/Src/bootloader.c **** {
 1557              		.loc 1 805 1 is_stmt 1 view -0
 1558              		.cfi_startproc
 1559              		@ args = 0, pretend = 0, frame = 24
 1560              		@ frame_needed = 0, uses_anonymous_args = 0
 1561 0000 00B5     		push	{lr}
 1562              		.cfi_def_cfa_offset 4
 1563              		.cfi_offset 14, -4
 1564 0002 87B0     		sub	sp, sp, #28
 1565              		.cfi_def_cfa_offset 32
 806:Core/Src/bootloader.c ****     HAL_StatusTypeDef status;
 1566              		.loc 1 806 5 view .LVU464
 807:Core/Src/bootloader.c ****     FLASH_EraseInitTypeDef erase_init;
 1567              		.loc 1 807 5 view .LVU465
 808:Core/Src/bootloader.c ****     uint32_t page_error;
 1568              		.loc 1 808 5 view .LVU466
 809:Core/Src/bootloader.c ****     
 810:Core/Src/bootloader.c ****     /* Unlock flash */
 811:Core/Src/bootloader.c ****     HAL_FLASH_Unlock();
 1569              		.loc 1 811 5 view .LVU467
 1570 0004 FFF7FEFF 		bl	HAL_FLASH_Unlock
 1571              	.LVL128:
 812:Core/Src/bootloader.c ****     
 813:Core/Src/bootloader.c ****     /* Erase the page containing the flag */
 814:Core/Src/bootloader.c ****     erase_init.TypeErase = FLASH_TYPEERASE_PAGES;
 1572              		.loc 1 814 5 view .LVU468
 1573              		.loc 1 814 26 is_stmt 0 view .LVU469
 1574 0008 0023     		movs	r3, #0
 1575 000a 0293     		str	r3, [sp, #8]
 815:Core/Src/bootloader.c ****     erase_init.Page = 63;  /* Last page of bootloader area */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 56


 1576              		.loc 1 815 5 is_stmt 1 view .LVU470
 1577              		.loc 1 815 21 is_stmt 0 view .LVU471
 1578 000c 3F23     		movs	r3, #63
 1579 000e 0493     		str	r3, [sp, #16]
 816:Core/Src/bootloader.c ****     erase_init.NbPages = 1;
 1580              		.loc 1 816 5 is_stmt 1 view .LVU472
 1581              		.loc 1 816 24 is_stmt 0 view .LVU473
 1582 0010 0123     		movs	r3, #1
 1583 0012 0593     		str	r3, [sp, #20]
 817:Core/Src/bootloader.c ****     
 818:Core/Src/bootloader.c ****     status = HAL_FLASHEx_Erase(&erase_init, &page_error);
 1584              		.loc 1 818 5 is_stmt 1 view .LVU474
 1585              		.loc 1 818 14 is_stmt 0 view .LVU475
 1586 0014 01A9     		add	r1, sp, #4
 1587 0016 02A8     		add	r0, sp, #8
 1588 0018 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 1589              	.LVL129:
 819:Core/Src/bootloader.c ****     
 820:Core/Src/bootloader.c ****     /* Lock flash */
 821:Core/Src/bootloader.c ****     HAL_FLASH_Lock();
 1590              		.loc 1 821 5 is_stmt 1 view .LVU476
 1591 001c FFF7FEFF 		bl	HAL_FLASH_Lock
 1592              	.LVL130:
 822:Core/Src/bootloader.c **** }
 1593              		.loc 1 822 1 is_stmt 0 view .LVU477
 1594 0020 07B0     		add	sp, sp, #28
 1595              		.cfi_def_cfa_offset 4
 1596              		@ sp needed
 1597 0022 5DF804FB 		ldr	pc, [sp], #4
 1598              		.cfi_endproc
 1599              	.LFE148:
 1601              		.section	.text.Bootloader_ProcessCANMessage,"ax",%progbits
 1602              		.align	1
 1603              		.global	Bootloader_ProcessCANMessage
 1604              		.syntax unified
 1605              		.thumb
 1606              		.thumb_func
 1608              	Bootloader_ProcessCANMessage:
 1609              	.LFB135:
 209:Core/Src/bootloader.c ****     uint8_t command;
 1610              		.loc 1 209 1 is_stmt 1 view -0
 1611              		.cfi_startproc
 1612              		@ args = 0, pretend = 0, frame = 0
 1613              		@ frame_needed = 0, uses_anonymous_args = 0
 1614 0000 10B5     		push	{r4, lr}
 1615              		.cfi_def_cfa_offset 8
 1616              		.cfi_offset 4, -8
 1617              		.cfi_offset 14, -4
 210:Core/Src/bootloader.c ****     uint32_t address;
 1618              		.loc 1 210 5 view .LVU479
 211:Core/Src/bootloader.c ****     uint16_t length;
 1619              		.loc 1 211 5 view .LVU480
 212:Core/Src/bootloader.c ****     uint8_t result;
 1620              		.loc 1 212 5 view .LVU481
 213:Core/Src/bootloader.c ****     static uint32_t *last_heartbeat_ptr = NULL;
 1621              		.loc 1 213 5 view .LVU482
 214:Core/Src/bootloader.c **** 
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 57


 1622              		.loc 1 214 5 view .LVU483
 217:Core/Src/bootloader.c ****     
 1623              		.loc 1 217 5 view .LVU484
 217:Core/Src/bootloader.c ****     
 1624              		.loc 1 217 26 is_stmt 0 view .LVU485
 1625 0002 884B     		ldr	r3, .L150
 1626 0004 0122     		movs	r2, #1
 1627 0006 1A70     		strb	r2, [r3]
 220:Core/Src/bootloader.c **** 
 1628              		.loc 1 220 5 is_stmt 1 view .LVU486
 220:Core/Src/bootloader.c **** 
 1629              		.loc 1 220 27 is_stmt 0 view .LVU487
 1630 0008 FFF7FEFF 		bl	HAL_GetTick
 1631              	.LVL131:
 220:Core/Src/bootloader.c **** 
 1632              		.loc 1 220 25 discriminator 1 view .LVU488
 1633 000c 864B     		ldr	r3, .L150+4
 1634 000e 1860     		str	r0, [r3]
 223:Core/Src/bootloader.c **** 
 1635              		.loc 1 223 5 is_stmt 1 view .LVU489
 223:Core/Src/bootloader.c **** 
 1636              		.loc 1 223 13 is_stmt 0 view .LVU490
 1637 0010 864B     		ldr	r3, .L150+8
 1638 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1639              	.LVL132:
 225:Core/Src/bootloader.c ****     {
 1640              		.loc 1 225 5 is_stmt 1 view .LVU491
 1641 0014 013B     		subs	r3, r3, #1
 1642 0016 062B     		cmp	r3, #6
 1643 0018 00F20081 		bhi	.L120
 1644 001c DFE813F0 		tbh	[pc, r3, lsl #1]
 1645              	.L122:
 1646 0020 1B00     		.2byte	(.L128-.L122)/2
 1647 0022 9400     		.2byte	(.L127-.L122)/2
 1648 0024 BB00     		.2byte	(.L126-.L122)/2
 1649 0026 EC00     		.2byte	(.L125-.L122)/2
 1650 0028 0700     		.2byte	(.L124-.L122)/2
 1651 002a 3100     		.2byte	(.L123-.L122)/2
 1652 002c 4F00     		.2byte	(.L121-.L122)/2
 1653              		.p2align 1
 1654              	.L124:
 229:Core/Src/bootloader.c ****             tx_data[1] = bootloader_status.state;
 1655              		.loc 1 229 13 view .LVU492
 229:Core/Src/bootloader.c ****             tx_data[1] = bootloader_status.state;
 1656              		.loc 1 229 24 is_stmt 0 view .LVU493
 1657 002e 8049     		ldr	r1, .L150+12
 1658 0030 1520     		movs	r0, #21
 1659 0032 0870     		strb	r0, [r1]
 230:Core/Src/bootloader.c ****             tx_data[2] = bootloader_status.last_error;
 1660              		.loc 1 230 13 is_stmt 1 view .LVU494
 230:Core/Src/bootloader.c ****             tx_data[2] = bootloader_status.last_error;
 1661              		.loc 1 230 43 is_stmt 0 view .LVU495
 1662 0034 7F4B     		ldr	r3, .L150+16
 1663 0036 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 230:Core/Src/bootloader.c ****             tx_data[2] = bootloader_status.last_error;
 1664              		.loc 1 230 24 view .LVU496
 1665 0038 4A70     		strb	r2, [r1, #1]
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 58


 231:Core/Src/bootloader.c ****             tx_data[3] = (bootloader_status.bytes_written >> 24) & 0xFF;
 1666              		.loc 1 231 13 is_stmt 1 view .LVU497
 231:Core/Src/bootloader.c ****             tx_data[3] = (bootloader_status.bytes_written >> 24) & 0xFF;
 1667              		.loc 1 231 43 is_stmt 0 view .LVU498
 1668 003a 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 231:Core/Src/bootloader.c ****             tx_data[3] = (bootloader_status.bytes_written >> 24) & 0xFF;
 1669              		.loc 1 231 24 view .LVU499
 1670 003c 8A70     		strb	r2, [r1, #2]
 232:Core/Src/bootloader.c ****             tx_data[4] = (bootloader_status.bytes_written >> 16) & 0xFF;
 1671              		.loc 1 232 13 is_stmt 1 view .LVU500
 232:Core/Src/bootloader.c ****             tx_data[4] = (bootloader_status.bytes_written >> 16) & 0xFF;
 1672              		.loc 1 232 44 is_stmt 0 view .LVU501
 1673 003e 9B68     		ldr	r3, [r3, #8]
 232:Core/Src/bootloader.c ****             tx_data[4] = (bootloader_status.bytes_written >> 16) & 0xFF;
 1674              		.loc 1 232 59 view .LVU502
 1675 0040 1A0E     		lsrs	r2, r3, #24
 232:Core/Src/bootloader.c ****             tx_data[4] = (bootloader_status.bytes_written >> 16) & 0xFF;
 1676              		.loc 1 232 24 view .LVU503
 1677 0042 CA70     		strb	r2, [r1, #3]
 233:Core/Src/bootloader.c ****             tx_data[5] = (bootloader_status.bytes_written >> 8) & 0xFF;
 1678              		.loc 1 233 13 is_stmt 1 view .LVU504
 233:Core/Src/bootloader.c ****             tx_data[5] = (bootloader_status.bytes_written >> 8) & 0xFF;
 1679              		.loc 1 233 59 is_stmt 0 view .LVU505
 1680 0044 1A0C     		lsrs	r2, r3, #16
 233:Core/Src/bootloader.c ****             tx_data[5] = (bootloader_status.bytes_written >> 8) & 0xFF;
 1681              		.loc 1 233 24 view .LVU506
 1682 0046 0A71     		strb	r2, [r1, #4]
 234:Core/Src/bootloader.c ****             tx_data[6] = bootloader_status.bytes_written & 0xFF;
 1683              		.loc 1 234 13 is_stmt 1 view .LVU507
 234:Core/Src/bootloader.c ****             tx_data[6] = bootloader_status.bytes_written & 0xFF;
 1684              		.loc 1 234 59 is_stmt 0 view .LVU508
 1685 0048 1A0A     		lsrs	r2, r3, #8
 234:Core/Src/bootloader.c ****             tx_data[6] = bootloader_status.bytes_written & 0xFF;
 1686              		.loc 1 234 24 view .LVU509
 1687 004a 4A71     		strb	r2, [r1, #5]
 235:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_DATA, tx_data, 8);
 1688              		.loc 1 235 13 is_stmt 1 view .LVU510
 235:Core/Src/bootloader.c ****             Bootloader_SendCANMessage(RESP_DATA, tx_data, 8);
 1689              		.loc 1 235 24 is_stmt 0 view .LVU511
 1690 004c 8B71     		strb	r3, [r1, #6]
 236:Core/Src/bootloader.c ****             break;
 1691              		.loc 1 236 13 is_stmt 1 view .LVU512
 1692 004e 0822     		movs	r2, #8
 1693 0050 FFF7FEFF 		bl	Bootloader_SendCANMessage
 1694              	.LVL133:
 237:Core/Src/bootloader.c ****             
 1695              		.loc 1 237 13 view .LVU513
 1696              	.L119:
 406:Core/Src/bootloader.c **** 
 1697              		.loc 1 406 1 is_stmt 0 view .LVU514
 1698 0054 10BD     		pop	{r4, pc}
 1699              	.LVL134:
 1700              	.L128:
 241:Core/Src/bootloader.c ****             
 1701              		.loc 1 241 13 is_stmt 1 view .LVU515
 241:Core/Src/bootloader.c ****             
 1702              		.loc 1 241 37 is_stmt 0 view .LVU516
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 59


 1703 0056 774B     		ldr	r3, .L150+16
 1704 0058 0122     		movs	r2, #1
 1705 005a 1A70     		strb	r2, [r3]
 244:Core/Src/bootloader.c ****             
 1706              		.loc 1 244 13 is_stmt 1 view .LVU517
 1707 005c FFF7FEFF 		bl	Bootloader_ClearApplicationValidFlag
 1708              	.LVL135:
 246:Core/Src/bootloader.c ****             if (result == ERR_NONE)
 1709              		.loc 1 246 13 view .LVU518
 246:Core/Src/bootloader.c ****             if (result == ERR_NONE)
 1710              		.loc 1 246 22 is_stmt 0 view .LVU519
 1711 0060 FFF7FEFF 		bl	Bootloader_EraseApplicationFlash
 1712              	.LVL136:
 247:Core/Src/bootloader.c ****             {
 1713              		.loc 1 247 13 is_stmt 1 view .LVU520
 247:Core/Src/bootloader.c ****             {
 1714              		.loc 1 247 16 is_stmt 0 view .LVU521
 1715 0064 50B9     		cbnz	r0, .L130
 249:Core/Src/bootloader.c ****                 bootloader_status.current_address = APPLICATION_ADDRESS;
 1716              		.loc 1 249 17 is_stmt 1 view .LVU522
 249:Core/Src/bootloader.c ****                 bootloader_status.current_address = APPLICATION_ADDRESS;
 1717              		.loc 1 249 49 is_stmt 0 view .LVU523
 1718 0066 734B     		ldr	r3, .L150+16
 1719 0068 0022     		movs	r2, #0
 1720 006a 9A60     		str	r2, [r3, #8]
 250:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1721              		.loc 1 250 17 is_stmt 1 view .LVU524
 250:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1722              		.loc 1 250 51 is_stmt 0 view .LVU525
 1723 006c 724A     		ldr	r2, .L150+20
 1724 006e 5A60     		str	r2, [r3, #4]
 251:Core/Src/bootloader.c ****             }
 1725              		.loc 1 251 17 is_stmt 1 view .LVU526
 1726 0070 FFF7FEFF 		bl	Bootloader_SendACK
 1727              	.LVL137:
 1728              	.L131:
 257:Core/Src/bootloader.c ****             break;
 1729              		.loc 1 257 13 view .LVU527
 257:Core/Src/bootloader.c ****             break;
 1730              		.loc 1 257 37 is_stmt 0 view .LVU528
 1731 0074 6F4B     		ldr	r3, .L150+16
 1732 0076 0022     		movs	r2, #0
 1733 0078 1A70     		strb	r2, [r3]
 258:Core/Src/bootloader.c ****             
 1734              		.loc 1 258 13 is_stmt 1 view .LVU529
 1735 007a EBE7     		b	.L119
 1736              	.LVL138:
 1737              	.L130:
 255:Core/Src/bootloader.c ****             }
 1738              		.loc 1 255 17 view .LVU530
 1739 007c FFF7FEFF 		bl	Bootloader_SendNACK
 1740              	.LVL139:
 255:Core/Src/bootloader.c ****             }
 1741              		.loc 1 255 17 is_stmt 0 view .LVU531
 1742 0080 F8E7     		b	.L131
 1743              	.LVL140:
 1744              	.L123:
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 60


 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1745              		.loc 1 262 13 is_stmt 1 view .LVU532
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1746              		.loc 1 262 31 is_stmt 0 view .LVU533
 1747 0082 6A4A     		ldr	r2, .L150+8
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1748              		.loc 1 262 31 view .LVU534
 1749 0084 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1750              		.loc 1 262 52 view .LVU535
 1751 0086 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1752              		.loc 1 262 56 view .LVU536
 1753 0088 1B04     		lsls	r3, r3, #16
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1754              		.loc 1 262 42 view .LVU537
 1755 008a 43EA0163 		orr	r3, r3, r1, lsl #24
 263:Core/Src/bootloader.c **** 
 1756              		.loc 1 263 30 view .LVU538
 1757 008e D178     		ldrb	r1, [r2, #3]	@ zero_extendqisi2
 262:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1758              		.loc 1 262 63 view .LVU539
 1759 0090 43EA0123 		orr	r3, r3, r1, lsl #8
 263:Core/Src/bootloader.c **** 
 1760              		.loc 1 263 49 view .LVU540
 1761 0094 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 263:Core/Src/bootloader.c **** 
 1762              		.loc 1 263 40 view .LVU541
 1763 0096 1343     		orrs	r3, r3, r2
 1764              	.LVL141:
 266:Core/Src/bootloader.c ****             {
 1765              		.loc 1 266 13 is_stmt 1 view .LVU542
 266:Core/Src/bootloader.c ****             {
 1766              		.loc 1 266 48 is_stmt 0 view .LVU543
 1767 0098 03F17842 		add	r2, r3, #-134217728
 1768 009c A2F50042 		sub	r2, r2, #32768
 266:Core/Src/bootloader.c ****             {
 1769              		.loc 1 266 16 view .LVU544
 1770 00a0 B2F5503F 		cmp	r2, #212992
 1771 00a4 07D2     		bcs	.L132
 268:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer */
 1772              		.loc 1 268 17 is_stmt 1 view .LVU545
 268:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer */
 1773              		.loc 1 268 51 is_stmt 0 view .LVU546
 1774 00a6 634A     		ldr	r2, .L150+16
 1775 00a8 5360     		str	r3, [r2, #4]
 269:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1776              		.loc 1 269 17 is_stmt 1 view .LVU547
 269:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1777              		.loc 1 269 30 is_stmt 0 view .LVU548
 1778 00aa 644B     		ldr	r3, .L150+24
 1779              	.LVL142:
 269:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1780              		.loc 1 269 30 view .LVU549
 1781 00ac 0022     		movs	r2, #0
 269:Core/Src/bootloader.c ****                 Bootloader_SendACK();
 1782              		.loc 1 269 30 view .LVU550
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 61


 1783 00ae 1A80     		strh	r2, [r3]	@ movhi
 270:Core/Src/bootloader.c ****             }
 1784              		.loc 1 270 17 is_stmt 1 view .LVU551
 1785 00b0 FFF7FEFF 		bl	Bootloader_SendACK
 1786              	.LVL143:
 270:Core/Src/bootloader.c ****             }
 1787              		.loc 1 270 17 is_stmt 0 view .LVU552
 1788 00b4 CEE7     		b	.L119
 1789              	.LVL144:
 1790              	.L132:
 274:Core/Src/bootloader.c ****             }
 1791              		.loc 1 274 17 is_stmt 1 view .LVU553
 1792 00b6 0220     		movs	r0, #2
 1793 00b8 FFF7FEFF 		bl	Bootloader_SendNACK
 1794              	.LVL145:
 274:Core/Src/bootloader.c ****             }
 1795              		.loc 1 274 17 is_stmt 0 view .LVU554
 1796 00bc CAE7     		b	.L119
 1797              	.LVL146:
 1798              	.L121:
 282:Core/Src/bootloader.c ****             length = rx_data[1];  /* Data length - should always be 4 */
 1799              		.loc 1 282 13 is_stmt 1 view .LVU555
 282:Core/Src/bootloader.c ****             length = rx_data[1];  /* Data length - should always be 4 */
 1800              		.loc 1 282 37 is_stmt 0 view .LVU556
 1801 00be 5D4B     		ldr	r3, .L150+16
 1802 00c0 0222     		movs	r2, #2
 1803 00c2 1A70     		strb	r2, [r3]
 283:Core/Src/bootloader.c ****             
 1804              		.loc 1 283 13 is_stmt 1 view .LVU557
 283:Core/Src/bootloader.c ****             
 1805              		.loc 1 283 29 is_stmt 0 view .LVU558
 1806 00c4 594B     		ldr	r3, .L150+8
 283:Core/Src/bootloader.c ****             
 1807              		.loc 1 283 29 view .LVU559
 1808 00c6 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1809              	.LVL147:
 285:Core/Src/bootloader.c ****             {
 1810              		.loc 1 285 13 is_stmt 1 view .LVU560
 285:Core/Src/bootloader.c ****             {
 1811              		.loc 1 285 16 is_stmt 0 view .LVU561
 1812 00c8 042B     		cmp	r3, #4
 1813 00ca 01D1     		bne	.L148
 1814              	.LBB10:
 294:Core/Src/bootloader.c ****             {
 1815              		.loc 1 294 26 view .LVU562
 1816 00cc 0023     		movs	r3, #0
 1817 00ce 15E0     		b	.L133
 1818              	.L148:
 1819              	.LBE10:
 287:Core/Src/bootloader.c ****                 bootloader_status.state = BL_STATE_IDLE;
 1820              		.loc 1 287 17 is_stmt 1 view .LVU563
 1821 00d0 0520     		movs	r0, #5
 1822 00d2 FFF7FEFF 		bl	Bootloader_SendNACK
 1823              	.LVL148:
 288:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer on error */
 1824              		.loc 1 288 17 view .LVU564
 288:Core/Src/bootloader.c ****                 buffer_index = 0;  /* Reset buffer on error */
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 62


 1825              		.loc 1 288 41 is_stmt 0 view .LVU565
 1826 00d6 0023     		movs	r3, #0
 1827 00d8 564A     		ldr	r2, .L150+16
 1828 00da 1370     		strb	r3, [r2]
 289:Core/Src/bootloader.c ****                 break;
 1829              		.loc 1 289 17 is_stmt 1 view .LVU566
 289:Core/Src/bootloader.c ****                 break;
 1830              		.loc 1 289 30 is_stmt 0 view .LVU567
 1831 00dc 574A     		ldr	r2, .L150+24
 1832 00de 1380     		strh	r3, [r2]	@ movhi
 290:Core/Src/bootloader.c ****             }
 1833              		.loc 1 290 17 is_stmt 1 view .LVU568
 1834 00e0 B8E7     		b	.L119
 1835              	.LVL149:
 1836              	.L134:
 1837              	.LBB11:
 296:Core/Src/bootloader.c ****             }
 1838              		.loc 1 296 17 view .LVU569
 296:Core/Src/bootloader.c ****             }
 1839              		.loc 1 296 58 is_stmt 0 view .LVU570
 1840 00e2 981C     		adds	r0, r3, #2
 296:Core/Src/bootloader.c ****             }
 1841              		.loc 1 296 42 view .LVU571
 1842 00e4 5549     		ldr	r1, .L150+24
 1843 00e6 0A88     		ldrh	r2, [r1]
 1844 00e8 02F1010C 		add	ip, r2, #1
 1845 00ec A1F800C0 		strh	ip, [r1]	@ movhi
 296:Core/Src/bootloader.c ****             }
 1846              		.loc 1 296 55 view .LVU572
 1847 00f0 4E49     		ldr	r1, .L150+8
 296:Core/Src/bootloader.c ****             }
 1848              		.loc 1 296 55 view .LVU573
 1849 00f2 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 296:Core/Src/bootloader.c ****             }
 1850              		.loc 1 296 46 view .LVU574
 1851 00f4 5249     		ldr	r1, .L150+28
 296:Core/Src/bootloader.c ****             }
 1852              		.loc 1 296 46 view .LVU575
 1853 00f6 8854     		strb	r0, [r1, r2]
 294:Core/Src/bootloader.c ****             {
 1854              		.loc 1 294 41 is_stmt 1 discriminator 3 view .LVU576
 1855 00f8 0133     		adds	r3, r3, #1
 1856              	.LVL150:
 294:Core/Src/bootloader.c ****             {
 1857              		.loc 1 294 41 is_stmt 0 discriminator 3 view .LVU577
 1858 00fa DBB2     		uxtb	r3, r3
 1859              	.LVL151:
 1860              	.L133:
 294:Core/Src/bootloader.c ****             {
 1861              		.loc 1 294 35 is_stmt 1 discriminator 1 view .LVU578
 1862 00fc 032B     		cmp	r3, #3
 1863 00fe F0D9     		bls	.L134
 1864              	.LBE11:
 300:Core/Src/bootloader.c ****             {
 1865              		.loc 1 300 13 view .LVU579
 300:Core/Src/bootloader.c ****             {
 1866              		.loc 1 300 30 is_stmt 0 view .LVU580
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 63


 1867 0100 4E4B     		ldr	r3, .L150+24
 1868              	.LVL152:
 300:Core/Src/bootloader.c ****             {
 1869              		.loc 1 300 30 view .LVU581
 1870 0102 1B88     		ldrh	r3, [r3]
 300:Core/Src/bootloader.c ****             {
 1871              		.loc 1 300 16 view .LVU582
 1872 0104 072B     		cmp	r3, #7
 1873 0106 19D9     		bls	.L135
 302:Core/Src/bootloader.c ****                                                flash_buffer, 8);
 1874              		.loc 1 302 17 is_stmt 1 view .LVU583
 302:Core/Src/bootloader.c ****                                                flash_buffer, 8);
 1875              		.loc 1 302 26 is_stmt 0 view .LVU584
 1876 0108 0822     		movs	r2, #8
 1877 010a 4D49     		ldr	r1, .L150+28
 1878 010c 494B     		ldr	r3, .L150+16
 1879 010e 5868     		ldr	r0, [r3, #4]
 1880 0110 FFF7FEFF 		bl	Bootloader_WriteFlash
 1881              	.LVL153:
 304:Core/Src/bootloader.c ****                 {
 1882              		.loc 1 304 17 is_stmt 1 view .LVU585
 304:Core/Src/bootloader.c ****                 {
 1883              		.loc 1 304 20 is_stmt 0 view .LVU586
 1884 0114 60B9     		cbnz	r0, .L136
 306:Core/Src/bootloader.c ****                     bootloader_status.bytes_written += 8;
 1885              		.loc 1 306 21 is_stmt 1 view .LVU587
 306:Core/Src/bootloader.c ****                     bootloader_status.bytes_written += 8;
 1886              		.loc 1 306 38 is_stmt 0 view .LVU588
 1887 0116 474B     		ldr	r3, .L150+16
 1888 0118 5A68     		ldr	r2, [r3, #4]
 306:Core/Src/bootloader.c ****                     bootloader_status.bytes_written += 8;
 1889              		.loc 1 306 55 view .LVU589
 1890 011a 0832     		adds	r2, r2, #8
 1891 011c 5A60     		str	r2, [r3, #4]
 307:Core/Src/bootloader.c ****                     buffer_index = 0;
 1892              		.loc 1 307 21 is_stmt 1 view .LVU590
 307:Core/Src/bootloader.c ****                     buffer_index = 0;
 1893              		.loc 1 307 38 is_stmt 0 view .LVU591
 1894 011e 9A68     		ldr	r2, [r3, #8]
 307:Core/Src/bootloader.c ****                     buffer_index = 0;
 1895              		.loc 1 307 53 view .LVU592
 1896 0120 0832     		adds	r2, r2, #8
 1897 0122 9A60     		str	r2, [r3, #8]
 308:Core/Src/bootloader.c ****                     Bootloader_SendACK();
 1898              		.loc 1 308 21 is_stmt 1 view .LVU593
 308:Core/Src/bootloader.c ****                     Bootloader_SendACK();
 1899              		.loc 1 308 34 is_stmt 0 view .LVU594
 1900 0124 454B     		ldr	r3, .L150+24
 1901 0126 0022     		movs	r2, #0
 1902 0128 1A80     		strh	r2, [r3]	@ movhi
 309:Core/Src/bootloader.c ****                 }
 1903              		.loc 1 309 21 is_stmt 1 view .LVU595
 1904 012a FFF7FEFF 		bl	Bootloader_SendACK
 1905              	.LVL154:
 309:Core/Src/bootloader.c ****                 }
 1906              		.loc 1 309 21 is_stmt 0 view .LVU596
 1907 012e 07E0     		b	.L137
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 64


 1908              	.LVL155:
 1909              	.L136:
 313:Core/Src/bootloader.c ****                     Bootloader_SendNACK(result);
 1910              		.loc 1 313 21 is_stmt 1 view .LVU597
 313:Core/Src/bootloader.c ****                     Bootloader_SendNACK(result);
 1911              		.loc 1 313 34 is_stmt 0 view .LVU598
 1912 0130 424A     		ldr	r2, .L150+24
 1913 0132 0021     		movs	r1, #0
 1914 0134 1180     		strh	r1, [r2]	@ movhi
 314:Core/Src/bootloader.c ****                 }
 1915              		.loc 1 314 21 is_stmt 1 view .LVU599
 1916 0136 FFF7FEFF 		bl	Bootloader_SendNACK
 1917              	.LVL156:
 314:Core/Src/bootloader.c ****                 }
 1918              		.loc 1 314 21 is_stmt 0 view .LVU600
 1919 013a 01E0     		b	.L137
 1920              	.LVL157:
 1921              	.L135:
 319:Core/Src/bootloader.c ****             }
 1922              		.loc 1 319 17 is_stmt 1 view .LVU601
 1923 013c FFF7FEFF 		bl	Bootloader_SendACK
 1924              	.LVL158:
 1925              	.L137:
 322:Core/Src/bootloader.c ****             break;
 1926              		.loc 1 322 13 view .LVU602
 322:Core/Src/bootloader.c ****             break;
 1927              		.loc 1 322 37 is_stmt 0 view .LVU603
 1928 0140 3C4B     		ldr	r3, .L150+16
 1929 0142 0022     		movs	r2, #0
 1930 0144 1A70     		strb	r2, [r3]
 323:Core/Src/bootloader.c ****             
 1931              		.loc 1 323 13 is_stmt 1 view .LVU604
 1932 0146 85E7     		b	.L119
 1933              	.LVL159:
 1934              	.L127:
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1935              		.loc 1 327 13 view .LVU605
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1936              		.loc 1 327 31 is_stmt 0 view .LVU606
 1937 0148 384B     		ldr	r3, .L150+8
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1938              		.loc 1 327 31 view .LVU607
 1939 014a 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1940              		.loc 1 327 52 view .LVU608
 1941 014c 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1942              		.loc 1 327 56 view .LVU609
 1943 014e 0004     		lsls	r0, r0, #16
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1944              		.loc 1 327 42 view .LVU610
 1945 0150 40EA0260 		orr	r0, r0, r2, lsl #24
 328:Core/Src/bootloader.c ****             length = rx_data[5];
 1946              		.loc 1 328 30 view .LVU611
 1947 0154 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 327:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 1948              		.loc 1 327 63 view .LVU612
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 65


 1949 0156 40EA0220 		orr	r0, r0, r2, lsl #8
 328:Core/Src/bootloader.c ****             length = rx_data[5];
 1950              		.loc 1 328 49 view .LVU613
 1951 015a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 328:Core/Src/bootloader.c ****             length = rx_data[5];
 1952              		.loc 1 328 40 view .LVU614
 1953 015c 1043     		orrs	r0, r0, r2
 1954              	.LVL160:
 329:Core/Src/bootloader.c **** 
 1955              		.loc 1 329 13 is_stmt 1 view .LVU615
 329:Core/Src/bootloader.c **** 
 1956              		.loc 1 329 29 is_stmt 0 view .LVU616
 1957 015e 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 1958              	.LVL161:
 332:Core/Src/bootloader.c ****             {
 1959              		.loc 1 332 13 is_stmt 1 view .LVU617
 332:Core/Src/bootloader.c ****             {
 1960              		.loc 1 332 48 is_stmt 0 view .LVU618
 1961 0160 00F17843 		add	r3, r0, #-134217728
 332:Core/Src/bootloader.c ****             {
 1962              		.loc 1 332 48 view .LVU619
 1963 0164 A3F50043 		sub	r3, r3, #32768
 332:Core/Src/bootloader.c ****             {
 1964              		.loc 1 332 16 view .LVU620
 1965 0168 B3F5503F 		cmp	r3, #212992
 1966 016c 0FD2     		bcs	.L138
 334:Core/Src/bootloader.c ****                 result = Bootloader_WriteFlash(address, &rx_data[6], length);
 1967              		.loc 1 334 17 is_stmt 1 view .LVU621
 334:Core/Src/bootloader.c ****                 result = Bootloader_WriteFlash(address, &rx_data[6], length);
 1968              		.loc 1 334 41 is_stmt 0 view .LVU622
 1969 016e 314B     		ldr	r3, .L150+16
 1970 0170 0221     		movs	r1, #2
 1971 0172 1970     		strb	r1, [r3]
 335:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 1972              		.loc 1 335 17 is_stmt 1 view .LVU623
 335:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 1973              		.loc 1 335 26 is_stmt 0 view .LVU624
 1974 0174 3349     		ldr	r1, .L150+32
 1975 0176 FFF7FEFF 		bl	Bootloader_WriteFlash
 1976              	.LVL162:
 336:Core/Src/bootloader.c ****                 {
 1977              		.loc 1 336 17 is_stmt 1 view .LVU625
 336:Core/Src/bootloader.c ****                 {
 1978              		.loc 1 336 20 is_stmt 0 view .LVU626
 1979 017a 28B9     		cbnz	r0, .L139
 338:Core/Src/bootloader.c ****                 }
 1980              		.loc 1 338 21 is_stmt 1 view .LVU627
 1981 017c FFF7FEFF 		bl	Bootloader_SendACK
 1982              	.LVL163:
 1983              	.L140:
 344:Core/Src/bootloader.c ****             }
 1984              		.loc 1 344 17 view .LVU628
 344:Core/Src/bootloader.c ****             }
 1985              		.loc 1 344 41 is_stmt 0 view .LVU629
 1986 0180 2C4B     		ldr	r3, .L150+16
 1987 0182 0022     		movs	r2, #0
 1988 0184 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 66


 1989 0186 65E7     		b	.L119
 1990              	.LVL164:
 1991              	.L139:
 342:Core/Src/bootloader.c ****                 }
 1992              		.loc 1 342 21 is_stmt 1 view .LVU630
 1993 0188 FFF7FEFF 		bl	Bootloader_SendNACK
 1994              	.LVL165:
 342:Core/Src/bootloader.c ****                 }
 1995              		.loc 1 342 21 is_stmt 0 view .LVU631
 1996 018c F8E7     		b	.L140
 1997              	.LVL166:
 1998              	.L138:
 348:Core/Src/bootloader.c ****             }
 1999              		.loc 1 348 17 is_stmt 1 view .LVU632
 2000 018e 0220     		movs	r0, #2
 2001              	.LVL167:
 348:Core/Src/bootloader.c ****             }
 2002              		.loc 1 348 17 is_stmt 0 view .LVU633
 2003 0190 FFF7FEFF 		bl	Bootloader_SendNACK
 2004              	.LVL168:
 348:Core/Src/bootloader.c ****             }
 2005              		.loc 1 348 17 view .LVU634
 2006 0194 5EE7     		b	.L119
 2007              	.LVL169:
 2008              	.L126:
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2009              		.loc 1 354 13 is_stmt 1 view .LVU635
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2010              		.loc 1 354 31 is_stmt 0 view .LVU636
 2011 0196 254B     		ldr	r3, .L150+8
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2012              		.loc 1 354 31 view .LVU637
 2013 0198 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2014              		.loc 1 354 52 view .LVU638
 2015 019a 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2016              		.loc 1 354 56 view .LVU639
 2017 019c 0004     		lsls	r0, r0, #16
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2018              		.loc 1 354 42 view .LVU640
 2019 019e 40EA0260 		orr	r0, r0, r2, lsl #24
 355:Core/Src/bootloader.c ****             length = rx_data[5];
 2020              		.loc 1 355 30 view .LVU641
 2021 01a2 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 354:Core/Src/bootloader.c ****                      (rx_data[3] << 8) | rx_data[4];
 2022              		.loc 1 354 63 view .LVU642
 2023 01a4 40EA0220 		orr	r0, r0, r2, lsl #8
 355:Core/Src/bootloader.c ****             length = rx_data[5];
 2024              		.loc 1 355 49 view .LVU643
 2025 01a8 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 355:Core/Src/bootloader.c ****             length = rx_data[5];
 2026              		.loc 1 355 40 view .LVU644
 2027 01aa 1043     		orrs	r0, r0, r2
 2028              	.LVL170:
 356:Core/Src/bootloader.c **** 
 2029              		.loc 1 356 13 is_stmt 1 view .LVU645
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 67


 356:Core/Src/bootloader.c **** 
 2030              		.loc 1 356 29 is_stmt 0 view .LVU646
 2031 01ac 5C79     		ldrb	r4, [r3, #5]	@ zero_extendqisi2
 2032              	.LVL171:
 359:Core/Src/bootloader.c ****             {
 2033              		.loc 1 359 13 is_stmt 1 view .LVU647
 359:Core/Src/bootloader.c ****             {
 2034              		.loc 1 359 48 is_stmt 0 view .LVU648
 2035 01ae 00F17843 		add	r3, r0, #-134217728
 359:Core/Src/bootloader.c ****             {
 2036              		.loc 1 359 48 view .LVU649
 2037 01b2 A3F50043 		sub	r3, r3, #32768
 359:Core/Src/bootloader.c ****             {
 2038              		.loc 1 359 16 view .LVU650
 2039 01b6 B3F5503F 		cmp	r3, #212992
 2040 01ba 01D2     		bcs	.L141
 359:Core/Src/bootloader.c ****             {
 2041              		.loc 1 359 86 discriminator 1 view .LVU651
 2042 01bc 072C     		cmp	r4, #7
 2043 01be 03D9     		bls	.L149
 2044              	.L141:
 376:Core/Src/bootloader.c ****             }
 2045              		.loc 1 376 17 is_stmt 1 view .LVU652
 2046 01c0 0220     		movs	r0, #2
 2047              	.LVL172:
 376:Core/Src/bootloader.c ****             }
 2048              		.loc 1 376 17 is_stmt 0 view .LVU653
 2049 01c2 FFF7FEFF 		bl	Bootloader_SendNACK
 2050              	.LVL173:
 376:Core/Src/bootloader.c ****             }
 2051              		.loc 1 376 17 view .LVU654
 2052 01c6 45E7     		b	.L119
 2053              	.LVL174:
 2054              	.L149:
 361:Core/Src/bootloader.c ****                 tx_data[0] = RESP_DATA;
 2055              		.loc 1 361 17 is_stmt 1 view .LVU655
 361:Core/Src/bootloader.c ****                 tx_data[0] = RESP_DATA;
 2056              		.loc 1 361 41 is_stmt 0 view .LVU656
 2057 01c8 1A4B     		ldr	r3, .L150+16
 2058 01ca 0322     		movs	r2, #3
 2059 01cc 1A70     		strb	r2, [r3]
 362:Core/Src/bootloader.c ****                 result = Bootloader_ReadFlash(address, &tx_data[1], length);
 2060              		.loc 1 362 17 is_stmt 1 view .LVU657
 362:Core/Src/bootloader.c ****                 result = Bootloader_ReadFlash(address, &tx_data[1], length);
 2061              		.loc 1 362 28 is_stmt 0 view .LVU658
 2062 01ce 1849     		ldr	r1, .L150+12
 2063 01d0 1523     		movs	r3, #21
 2064 01d2 01F8013B 		strb	r3, [r1], #1
 363:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 2065              		.loc 1 363 17 is_stmt 1 view .LVU659
 363:Core/Src/bootloader.c ****                 if (result == ERR_NONE)
 2066              		.loc 1 363 26 is_stmt 0 view .LVU660
 2067 01d6 2246     		mov	r2, r4
 2068 01d8 FFF7FEFF 		bl	Bootloader_ReadFlash
 2069              	.LVL175:
 364:Core/Src/bootloader.c ****                 {
 2070              		.loc 1 364 17 is_stmt 1 view .LVU661
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 68


 364:Core/Src/bootloader.c ****                 {
 2071              		.loc 1 364 20 is_stmt 0 view .LVU662
 2072 01dc 48B9     		cbnz	r0, .L142
 366:Core/Src/bootloader.c ****                 }
 2073              		.loc 1 366 21 is_stmt 1 view .LVU663
 2074 01de 621C     		adds	r2, r4, #1
 2075 01e0 D2B2     		uxtb	r2, r2
 2076 01e2 1349     		ldr	r1, .L150+12
 2077 01e4 1520     		movs	r0, #21
 2078              	.LVL176:
 366:Core/Src/bootloader.c ****                 }
 2079              		.loc 1 366 21 is_stmt 0 view .LVU664
 2080 01e6 FFF7FEFF 		bl	Bootloader_SendCANMessage
 2081              	.LVL177:
 2082              	.L143:
 372:Core/Src/bootloader.c ****             }
 2083              		.loc 1 372 17 is_stmt 1 view .LVU665
 372:Core/Src/bootloader.c ****             }
 2084              		.loc 1 372 41 is_stmt 0 view .LVU666
 2085 01ea 124B     		ldr	r3, .L150+16
 2086 01ec 0022     		movs	r2, #0
 2087 01ee 1A70     		strb	r2, [r3]
 2088 01f0 30E7     		b	.L119
 2089              	.LVL178:
 2090              	.L142:
 370:Core/Src/bootloader.c ****                 }
 2091              		.loc 1 370 21 is_stmt 1 view .LVU667
 2092 01f2 FFF7FEFF 		bl	Bootloader_SendNACK
 2093              	.LVL179:
 370:Core/Src/bootloader.c ****                 }
 2094              		.loc 1 370 21 is_stmt 0 view .LVU668
 2095 01f6 F8E7     		b	.L143
 2096              	.LVL180:
 2097              	.L125:
 382:Core/Src/bootloader.c ****             {
 2098              		.loc 1 382 13 is_stmt 1 view .LVU669
 382:Core/Src/bootloader.c ****             {
 2099              		.loc 1 382 17 is_stmt 0 view .LVU670
 2100 01f8 FFF7FEFF 		bl	Bootloader_CheckValidApplication
 2101              	.LVL181:
 382:Core/Src/bootloader.c ****             {
 2102              		.loc 1 382 16 discriminator 1 view .LVU671
 2103 01fc 50B1     		cbz	r0, .L144
 385:Core/Src/bootloader.c ****                 if (result != ERR_NONE)
 2104              		.loc 1 385 17 is_stmt 1 view .LVU672
 385:Core/Src/bootloader.c ****                 if (result != ERR_NONE)
 2105              		.loc 1 385 26 is_stmt 0 view .LVU673
 2106 01fe FFF7FEFF 		bl	Bootloader_SetApplicationValidFlag
 2107              	.LVL182:
 386:Core/Src/bootloader.c ****                 {
 2108              		.loc 1 386 17 is_stmt 1 view .LVU674
 386:Core/Src/bootloader.c ****                 {
 2109              		.loc 1 386 20 is_stmt 0 view .LVU675
 2110 0202 08B1     		cbz	r0, .L145
 389:Core/Src/bootloader.c ****                 }
 2111              		.loc 1 389 21 is_stmt 1 view .LVU676
 389:Core/Src/bootloader.c ****                 }
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 69


 2112              		.loc 1 389 50 is_stmt 0 view .LVU677
 2113 0204 0B4A     		ldr	r2, .L150+16
 2114 0206 1074     		strb	r0, [r2, #16]
 2115              	.L145:
 392:Core/Src/bootloader.c ****                 jump_to_app_flag = 1;  /* Set flag to trigger jump from main loop */
 2116              		.loc 1 392 17 is_stmt 1 view .LVU678
 2117 0208 FFF7FEFF 		bl	Bootloader_SendACK
 2118              	.LVL183:
 393:Core/Src/bootloader.c ****             }
 2119              		.loc 1 393 17 view .LVU679
 393:Core/Src/bootloader.c ****             }
 2120              		.loc 1 393 34 is_stmt 0 view .LVU680
 2121 020c 0E4B     		ldr	r3, .L150+36
 2122 020e 0122     		movs	r2, #1
 2123 0210 1A70     		strb	r2, [r3]
 2124 0212 1FE7     		b	.L119
 2125              	.LVL184:
 2126              	.L144:
 397:Core/Src/bootloader.c ****             }
 2127              		.loc 1 397 17 is_stmt 1 view .LVU681
 2128 0214 0620     		movs	r0, #6
 2129 0216 FFF7FEFF 		bl	Bootloader_SendNACK
 2130              	.LVL185:
 2131 021a 1BE7     		b	.L119
 2132              	.LVL186:
 2133              	.L120:
 403:Core/Src/bootloader.c ****             break;
 2134              		.loc 1 403 13 view .LVU682
 2135 021c 0120     		movs	r0, #1
 2136 021e FFF7FEFF 		bl	Bootloader_SendNACK
 2137              	.LVL187:
 404:Core/Src/bootloader.c ****     }
 2138              		.loc 1 404 13 view .LVU683
 406:Core/Src/bootloader.c **** 
 2139              		.loc 1 406 1 is_stmt 0 view .LVU684
 2140 0222 17E7     		b	.L119
 2141              	.L151:
 2142              		.align	2
 2143              	.L150:
 2144 0224 00000000 		.word	can_command_received
 2145 0228 00000000 		.word	last_heartbeat_time
 2146 022c 00000000 		.word	rx_data
 2147 0230 00000000 		.word	tx_data
 2148 0234 00000000 		.word	bootloader_status
 2149 0238 00800008 		.word	134250496
 2150 023c 00000000 		.word	buffer_index
 2151 0240 00000000 		.word	flash_buffer
 2152 0244 06000000 		.word	rx_data+6
 2153 0248 00000000 		.word	jump_to_app_flag
 2154              		.cfi_endproc
 2155              	.LFE135:
 2157              		.section	.text.HAL_CAN_RxFifo0MsgPendingCallback,"ax",%progbits
 2158              		.align	1
 2159              		.global	HAL_CAN_RxFifo0MsgPendingCallback
 2160              		.syntax unified
 2161              		.thumb
 2162              		.thumb_func
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 70


 2164              	HAL_CAN_RxFifo0MsgPendingCallback:
 2165              	.LVL188:
 2166              	.LFB149:
 823:Core/Src/bootloader.c **** 
 824:Core/Src/bootloader.c **** /**
 825:Core/Src/bootloader.c ****   * @brief  CAN RX FIFO 0 message pending callback
 826:Core/Src/bootloader.c ****   * @param  hcan: pointer to CAN Handle
 827:Core/Src/bootloader.c ****   * @retval None
 828:Core/Src/bootloader.c ****   */
 829:Core/Src/bootloader.c **** void HAL_CAN_RxFifo0MsgPendingCallback(CAN_HandleTypeDef *hcan)
 830:Core/Src/bootloader.c **** {
 2167              		.loc 1 830 1 is_stmt 1 view -0
 2168              		.cfi_startproc
 2169              		@ args = 0, pretend = 0, frame = 0
 2170              		@ frame_needed = 0, uses_anonymous_args = 0
 2171              		.loc 1 830 1 is_stmt 0 view .LVU686
 2172 0000 08B5     		push	{r3, lr}
 2173              		.cfi_def_cfa_offset 8
 2174              		.cfi_offset 3, -8
 2175              		.cfi_offset 14, -4
 831:Core/Src/bootloader.c ****     if (hcan == hcan_bootloader)
 2176              		.loc 1 831 5 is_stmt 1 view .LVU687
 2177              		.loc 1 831 14 is_stmt 0 view .LVU688
 2178 0002 0C4B     		ldr	r3, .L156
 2179 0004 1B68     		ldr	r3, [r3]
 2180              		.loc 1 831 8 view .LVU689
 2181 0006 8342     		cmp	r3, r0
 2182 0008 00D0     		beq	.L155
 2183              	.LVL189:
 2184              	.L152:
 832:Core/Src/bootloader.c ****     {
 833:Core/Src/bootloader.c ****         /* Get message from FIFO */
 834:Core/Src/bootloader.c ****         if (HAL_CAN_GetRxMessage(hcan, CAN_RX_FIFO0, &rx_header, rx_data) == HAL_OK)
 835:Core/Src/bootloader.c ****         {
 836:Core/Src/bootloader.c ****             /* Check if message is for bootloader (using ExtId for 29-bit extended ID) */
 837:Core/Src/bootloader.c ****             if (rx_header.ExtId == CAN_HOST_ID && rx_header.IDE == CAN_ID_EXT)
 838:Core/Src/bootloader.c ****             {
 839:Core/Src/bootloader.c ****                 /* Process the message */
 840:Core/Src/bootloader.c ****                 Bootloader_ProcessCANMessage();
 841:Core/Src/bootloader.c ****             }
 842:Core/Src/bootloader.c ****         }
 843:Core/Src/bootloader.c ****     }
 844:Core/Src/bootloader.c **** }
 2185              		.loc 1 844 1 view .LVU690
 2186 000a 08BD     		pop	{r3, pc}
 2187              	.LVL190:
 2188              	.L155:
 834:Core/Src/bootloader.c ****         {
 2189              		.loc 1 834 9 is_stmt 1 view .LVU691
 834:Core/Src/bootloader.c ****         {
 2190              		.loc 1 834 13 is_stmt 0 view .LVU692
 2191 000c 0A4B     		ldr	r3, .L156+4
 2192 000e 0B4A     		ldr	r2, .L156+8
 2193 0010 0021     		movs	r1, #0
 2194 0012 FFF7FEFF 		bl	HAL_CAN_GetRxMessage
 2195              	.LVL191:
 834:Core/Src/bootloader.c ****         {
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 71


 2196              		.loc 1 834 12 discriminator 1 view .LVU693
 2197 0016 0028     		cmp	r0, #0
 2198 0018 F7D1     		bne	.L152
 837:Core/Src/bootloader.c ****             {
 2199              		.loc 1 837 13 is_stmt 1 view .LVU694
 837:Core/Src/bootloader.c ****             {
 2200              		.loc 1 837 26 is_stmt 0 view .LVU695
 2201 001a 084B     		ldr	r3, .L156+8
 2202 001c 5A68     		ldr	r2, [r3, #4]
 837:Core/Src/bootloader.c ****             {
 2203              		.loc 1 837 16 view .LVU696
 2204 001e 084B     		ldr	r3, .L156+12
 2205 0020 9A42     		cmp	r2, r3
 2206 0022 F2D1     		bne	.L152
 837:Core/Src/bootloader.c ****             {
 2207              		.loc 1 837 60 discriminator 1 view .LVU697
 2208 0024 054B     		ldr	r3, .L156+8
 2209 0026 9B68     		ldr	r3, [r3, #8]
 837:Core/Src/bootloader.c ****             {
 2210              		.loc 1 837 48 discriminator 1 view .LVU698
 2211 0028 042B     		cmp	r3, #4
 2212 002a EED1     		bne	.L152
 840:Core/Src/bootloader.c ****             }
 2213              		.loc 1 840 17 is_stmt 1 view .LVU699
 2214 002c FFF7FEFF 		bl	Bootloader_ProcessCANMessage
 2215              	.LVL192:
 2216              		.loc 1 844 1 is_stmt 0 view .LVU700
 2217 0030 EBE7     		b	.L152
 2218              	.L157:
 2219 0032 00BF     		.align	2
 2220              	.L156:
 2221 0034 00000000 		.word	hcan_bootloader
 2222 0038 00000000 		.word	rx_data
 2223 003c 00000000 		.word	rx_header
 2224 0040 01070018 		.word	402654977
 2225              		.cfi_endproc
 2226              	.LFE149:
 2228              		.section	.bss.last_heartbeat_time,"aw",%nobits
 2229              		.align	2
 2232              	last_heartbeat_time:
 2233 0000 00000000 		.space	4
 2234              		.section	.bss.can_command_received,"aw",%nobits
 2237              	can_command_received:
 2238 0000 00       		.space	1
 2239              		.section	.bss.jump_to_app_flag,"aw",%nobits
 2242              	jump_to_app_flag:
 2243 0000 00       		.space	1
 2244              		.section	.bss.buffer_index,"aw",%nobits
 2245              		.align	1
 2248              	buffer_index:
 2249 0000 0000     		.space	2
 2250              		.section	.bss.flash_buffer,"aw",%nobits
 2251              		.align	2
 2254              	flash_buffer:
 2255 0000 00000000 		.space	8
 2255      00000000 
 2256              		.section	.bss.tx_mailbox,"aw",%nobits
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 72


 2257              		.align	2
 2260              	tx_mailbox:
 2261 0000 00000000 		.space	4
 2262              		.section	.bss.tx_header,"aw",%nobits
 2263              		.align	2
 2266              	tx_header:
 2267 0000 00000000 		.space	24
 2267      00000000 
 2267      00000000 
 2267      00000000 
 2267      00000000 
 2268              		.section	.bss.tx_data,"aw",%nobits
 2269              		.align	2
 2272              	tx_data:
 2273 0000 00000000 		.space	8
 2273      00000000 
 2274              		.section	.bss.rx_data,"aw",%nobits
 2275              		.align	2
 2278              	rx_data:
 2279 0000 00000000 		.space	8
 2279      00000000 
 2280              		.section	.bss.rx_header,"aw",%nobits
 2281              		.align	2
 2284              	rx_header:
 2285 0000 00000000 		.space	28
 2285      00000000 
 2285      00000000 
 2285      00000000 
 2285      00000000 
 2286              		.section	.bss.bootloader_status,"aw",%nobits
 2287              		.align	2
 2290              	bootloader_status:
 2291 0000 00000000 		.space	20
 2291      00000000 
 2291      00000000 
 2291      00000000 
 2291      00000000 
 2292              		.section	.bss.hcan_bootloader,"aw",%nobits
 2293              		.align	2
 2296              	hcan_bootloader:
 2297 0000 00000000 		.space	4
 2298              		.text
 2299              	.Letext0:
 2300              		.file 3 "C:/Users/Ali/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tool
 2301              		.file 4 "C:/Users/Ali/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tool
 2302              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 2303              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l432xx.h"
 2304              		.file 7 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 2305              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 2306              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 2307              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_can.h"
 2308              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 2309              		.file 12 "Core/Inc/bootloader.h"
 2310              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash_ex.h"
 2311              		.file 14 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 2312              		.file 15 "C:/Users/Ali/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-too
 2313              		.file 16 "Core/Inc/main.h"
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 73


ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 74


DEFINED SYMBOLS
                            *ABS*:00000000 bootloader.c
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:21     .text.Bootloader_ReadFlash:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:26     .text.Bootloader_ReadFlash:00000000 Bootloader_ReadFlash
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:104    .text.Bootloader_ReadFlash:00000040 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:109    .text.Bootloader_ConfigureCANFilter:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:114    .text.Bootloader_ConfigureCANFilter:00000000 Bootloader_ConfigureCANFilter
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:189    .text.Bootloader_ConfigureCANFilter:00000048 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2296   .bss.hcan_bootloader:00000000 hcan_bootloader
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:194    .text.Bootloader_WaitForCANTransmission:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:199    .text.Bootloader_WaitForCANTransmission:00000000 Bootloader_WaitForCANTransmission
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:247    .text.Bootloader_WaitForCANTransmission:00000024 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:253    .text.Bootloader_EraseApplicationFlash:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:258    .text.Bootloader_EraseApplicationFlash:00000000 Bootloader_EraseApplicationFlash
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:352    .text.Bootloader_EraseApplicationFlash:0000004c $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2290   .bss.bootloader_status:00000000 bootloader_status
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:358    .text.Bootloader_WriteFlash:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:363    .text.Bootloader_WriteFlash:00000000 Bootloader_WriteFlash
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:546    .text.Bootloader_WriteFlash:000000d4 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:553    .text.Bootloader_DeInit:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:558    .text.Bootloader_DeInit:00000000 Bootloader_DeInit
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:639    .text.Bootloader_DeInit:0000005c $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:645    .text.Bootloader_Init:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:651    .text.Bootloader_Init:00000000 Bootloader_Init
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:739    .text.Bootloader_Init:00000054 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2266   .bss.tx_header:00000000 tx_header
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:748    .text.Bootloader_CheckValidApplication:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:754    .text.Bootloader_CheckValidApplication:00000000 Bootloader_CheckValidApplication
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:802    .text.Bootloader_CheckValidApplication:00000028 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:808    .text.Bootloader_SendCANMessage:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:814    .text.Bootloader_SendCANMessage:00000000 Bootloader_SendCANMessage
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:885    .text.Bootloader_SendCANMessage:0000003c $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2260   .bss.tx_mailbox:00000000 tx_mailbox
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:892    .text.Bootloader_SendACK:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:897    .text.Bootloader_SendACK:00000000 Bootloader_SendACK
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:927    .text.Bootloader_SendACK:00000018 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2272   .bss.tx_data:00000000 tx_data
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:933    .text.Bootloader_SendNACK:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:938    .text.Bootloader_SendNACK:00000000 Bootloader_SendNACK
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:975    .text.Bootloader_SendNACK:00000018 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:981    .text.Bootloader_JumpToApplication:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:987    .text.Bootloader_JumpToApplication:00000000 Bootloader_JumpToApplication
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1115   .text.Bootloader_JumpToApplication:00000068 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1122   .text.Bootloader_SetApplicationValidFlag:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1128   .text.Bootloader_SetApplicationValidFlag:00000000 Bootloader_SetApplicationValidFlag
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1227   .text.Bootloader_SetApplicationValidFlag:00000058 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1236   .text.Bootloader_CheckApplicationValidFlag:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1242   .text.Bootloader_CheckApplicationValidFlag:00000000 Bootloader_CheckApplicationValidFlag
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1281   .text.Bootloader_CheckApplicationValidFlag:00000024 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1288   .text.Bootloader_Main:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1294   .text.Bootloader_Main:00000000 Bootloader_Main
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1539   .text.Bootloader_Main:000000f4 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2232   .bss.last_heartbeat_time:00000000 last_heartbeat_time
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2242   .bss.jump_to_app_flag:00000000 jump_to_app_flag
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2237   .bss.can_command_received:00000000 can_command_received
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1549   .text.Bootloader_ClearApplicationValidFlag:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1555   .text.Bootloader_ClearApplicationValidFlag:00000000 Bootloader_ClearApplicationValidFlag
ARM GAS  C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s 			page 75


C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1602   .text.Bootloader_ProcessCANMessage:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1608   .text.Bootloader_ProcessCANMessage:00000000 Bootloader_ProcessCANMessage
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1646   .text.Bootloader_ProcessCANMessage:00000020 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:1653   .text.Bootloader_ProcessCANMessage:0000002e $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2144   .text.Bootloader_ProcessCANMessage:00000224 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2278   .bss.rx_data:00000000 rx_data
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2248   .bss.buffer_index:00000000 buffer_index
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2254   .bss.flash_buffer:00000000 flash_buffer
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2158   .text.HAL_CAN_RxFifo0MsgPendingCallback:00000000 $t
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2164   .text.HAL_CAN_RxFifo0MsgPendingCallback:00000000 HAL_CAN_RxFifo0MsgPendingCallback
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2221   .text.HAL_CAN_RxFifo0MsgPendingCallback:00000034 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2284   .bss.rx_header:00000000 rx_header
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2229   .bss.last_heartbeat_time:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2238   .bss.can_command_received:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2243   .bss.jump_to_app_flag:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2245   .bss.buffer_index:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2251   .bss.flash_buffer:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2257   .bss.tx_mailbox:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2263   .bss.tx_header:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2269   .bss.tx_data:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2275   .bss.rx_data:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2281   .bss.rx_header:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2287   .bss.bootloader_status:00000000 $d
C:\Users\Ali\AppData\Local\Temp\ccg2zXhC.s:2293   .bss.hcan_bootloader:00000000 $d

UNDEFINED SYMBOLS
HAL_CAN_ConfigFilter
Error_Handler
HAL_CAN_GetTxMailboxesFreeLevel
HAL_Delay
HAL_FLASH_Unlock
HAL_FLASHEx_Erase
HAL_FLASH_Lock
HAL_FLASH_Program
HAL_GPIO_WritePin
HAL_GPIO_DeInit
HAL_CAN_DeactivateNotification
HAL_CAN_Stop
HAL_CAN_MspDeInit
HAL_CAN_Start
HAL_CAN_ActivateNotification
HAL_CAN_AddTxMessage
HAL_GetTick
HAL_GPIO_TogglePin
HAL_CAN_GetRxMessage
